import{o as Ho,b as tn,f as yo,C as Cr,j as O,e as nn,D as Ku,g as go,w as _o,p as Gu,r as Z,E as Ir,F as Tr,H as Hu,I as Or,J as Wu,K as Ar,t as Er,O as Pr,Q as jo,U as Ju,x as Yu,V as Qu,W as ec,X as tc,Y as nc,Z as oc,_ as sc,$ as rc,a0 as ac,a1 as ic,a2 as uc,a3 as Ps,a4 as cc,a5 as Eo,q as lc,a6 as dc,T as qs,a7 as Ms,a8 as pc,a9 as Et,G as st,aa as Bt,P as mc,R as hc,ab as fc,B as Jn,ac as qr,ad as yc,d as ne,ae as gc,i as Rt,M as _c}from"./index-BiYs92K_.js";import{u as zs}from"./dexie-react-hooks-DRr97_Ni.js";import{S as xt}from"./Stack-C3hlsle4.js";import{T as $t}from"./Text-mlgEjuQm.js";import{A as bc}from"./Avatar-ITSFOwhw.js";import{T as vc}from"./Textarea-DiJ-qpf1.js";var Mr={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const Sc=go((e,{radius:t,color:n,variant:o,autoContrast:s})=>{const r=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:o||"light",autoContrast:s});return{root:{"--alert-radius":t===void 0?void 0:_o(t),"--alert-bg":n||o?r.background:void 0,"--alert-color":r.color,"--alert-bd":n||o?r.border:void 0}}}),to=Ho((e,t)=>{const n=tn("Alert",null,e),{classNames:o,className:s,style:r,styles:a,unstyled:u,vars:c,radius:l,color:m,title:f,children:_,id:g,icon:h,withCloseButton:b,onClose:v,closeButtonLabel:w,variant:x,autoContrast:E,role:M,attributes:J,...H}=n,re=yo({name:"Alert",classes:Mr,props:n,className:s,style:r,classNames:o,styles:a,unstyled:u,attributes:J,vars:c,varsResolver:Sc}),Me=Cr(g),ve=f&&`${Me}-title`||void 0,Ze=`${Me}-body`;return O.jsx(nn,{id:Me,...re("root",{variant:x}),variant:x,ref:t,role:M||"alert",...H,"aria-describedby":_?Ze:void 0,"aria-labelledby":f?ve:void 0,children:O.jsxs("div",{...re("wrapper"),children:[h&&O.jsx("div",{...re("icon"),children:h}),O.jsxs("div",{...re("body"),children:[f&&O.jsx("div",{...re("title"),"data-with-close-button":b||void 0,children:O.jsx("span",{id:ve,...re("label"),children:f})}),_&&O.jsx("div",{id:Ze,...re("message"),"data-variant":x,children:_})]}),b&&O.jsx(Ku,{...re("closeButton"),onClick:v,variant:"transparent",size:16,iconSize:16,"aria-label":w,unstyled:u})]})})});to.classes=Mr;to.displayName="@mantine/core/Alert";var zr={root:"m_9e117634"};const wc=go((e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:_o(t),"--image-object-fit":n}})),Wo=Gu((e,t)=>{const n=tn("Image",null,e),{classNames:o,className:s,style:r,styles:a,unstyled:u,vars:c,onError:l,src:m,radius:f,fit:_,fallbackSrc:g,mod:h,attributes:b,...v}=n,[w,x]=Z.useState(!m);Z.useEffect(()=>x(!m),[m]);const E=yo({name:"Image",classes:zr,props:n,className:s,style:r,classNames:o,styles:a,unstyled:u,attributes:b,vars:c,varsResolver:wc});return w&&g?O.jsx(nn,{component:"img",ref:t,src:g,...E("root"),onError:l,mod:["fallback",h],...v}):O.jsx(nn,{component:"img",ref:t,...E("root"),src:m,onError:M=>{l?.(M),x(!0)},mod:h,...v})});Wo.classes=zr;Wo.displayName="@mantine/core/Image";const kc={duration:100,transition:"fade"};function js(e,t){return{...kc,...t,...e}}function Rc({offset:e,position:t,defaultOpened:n}){const[o,s]=Z.useState(n),r=Z.useRef(null),{x:a,y:u,elements:c,refs:l,update:m,placement:f}=Ir({placement:t,middleware:[Tr({crossAxis:!0,padding:5,rootBoundary:"document"})]}),_=f.includes("right")?e:t.includes("left")?e*-1:0,g=f.includes("bottom")?e:t.includes("top")?e*-1:0,h=Z.useCallback(({clientX:b,clientY:v})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:b,y:v,left:b+_,top:v+g,right:b,bottom:v}}})},[c.reference]);return Z.useEffect(()=>{if(l.floating.current){const b=r.current;b.addEventListener("mousemove",h);const v=Hu(l.floating.current);return v.forEach(w=>{w.addEventListener("scroll",m)}),()=>{b.removeEventListener("mousemove",h),v.forEach(w=>{w.removeEventListener("scroll",m)})}}},[c.reference,l.floating.current,m,h,o]),{handleMouseMove:h,x:a,y:u,opened:o,setOpened:s,boundaryRef:r,floating:l.setFloating}}var bo={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const xc={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Or("popover")},$c=go((e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:_o(t),"--tooltip-bg":n?Yu(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}})),Jo=Ho((e,t)=>{const n=tn("TooltipFloating",xc,e),{children:o,refProp:s,withinPortal:r,style:a,className:u,classNames:c,styles:l,unstyled:m,radius:f,color:_,label:g,offset:h,position:b,multiline:v,zIndex:w,disabled:x,defaultOpened:E,variant:M,vars:J,portalProps:H,attributes:re,...Me}=n,ve=Wu(),Ze=yo({name:"TooltipFloating",props:n,classes:bo,className:u,style:a,classNames:c,styles:l,unstyled:m,attributes:re,rootSelector:"tooltip",vars:J,varsResolver:$c}),{handleMouseMove:Fe,x:Dt,y:ct,opened:Zt,boundaryRef:Te,floating:fn,setOpened:Ft}=Rc({offset:h,position:b,defaultOpened:E});if(!Ar(o))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const yn=Er(Te,Pr(o),t),St=o.props,Xt=Qe=>{St.onMouseEnter?.(Qe),Fe(Qe),Ft(!0)},lt=Qe=>{St.onMouseLeave?.(Qe),Ft(!1)};return O.jsxs(O.Fragment,{children:[O.jsx(jo,{...H,withinPortal:r,children:O.jsx(nn,{...Me,...Ze("tooltip",{style:{...Ju(a,ve),zIndex:w,display:!x&&Zt?"block":"none",top:(ct&&Math.round(ct))??"",left:(Dt&&Math.round(Dt))??""}}),variant:M,ref:fn,mod:{multiline:v},children:g})}),Z.cloneElement(o,{...St,[s]:yn,onMouseEnter:Xt,onMouseLeave:lt})]})});Jo.classes=bo;Jo.displayName="@mantine/core/TooltipFloating";const jr=Z.createContext(!1),Cc=jr.Provider,Ic=()=>Z.useContext(jr),Tc={openDelay:0,closeDelay:0};function Yo(e){const{openDelay:t,closeDelay:n,children:o}=tn("TooltipGroup",Tc,e);return O.jsx(Cc,{value:!0,children:O.jsx(Qu,{delay:{open:t,close:n},children:o})})}Yo.displayName="@mantine/core/TooltipGroup";Yo.extend=e=>e;function Oc(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Ac(e){const t=Oc(e.middlewares),n=[uc(e.offset)];return t.shift&&n.push(Tr(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?Ps():Ps(t.flip)),n.push(cc({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?Eo():Eo(t.inline)):e.inline&&n.push(Eo()),n}function Ec(e){const[t,n]=Z.useState(e.defaultOpened),s=typeof e.opened=="boolean"?e.opened:t,r=Ic(),a=Cr(),u=Z.useCallback(J=>{n(J),J&&w(a)},[a]),{x:c,y:l,context:m,refs:f,placement:_,middlewareData:{arrow:{x:g,y:h}={}}}=Ir({strategy:e.strategy,placement:e.position,open:s,onOpenChange:u,middleware:Ac(e),whileElementsMounted:tc}),{delay:b,currentId:v,setCurrentId:w}=ec(m,{id:a}),{getReferenceProps:x,getFloatingProps:E}=nc([oc(m,{enabled:e.events?.hover,delay:r?b:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),sc(m,{enabled:e.events?.focus,visibleOnly:!0}),rc(m,{role:"tooltip"}),ac(m,{enabled:typeof e.opened>"u"})]);ic(()=>{e.onPositionChange?.(_)},[_]);const M=s&&v&&v!==a;return{x:c,y:l,arrowX:g,arrowY:h,reference:f.setReference,floating:f.setFloating,getFloatingProps:E,getReferenceProps:x,isGroupPhase:M,opened:s,placement:_}}const Ns={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Or("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},Pc=go((e,{radius:t,color:n,variant:o,autoContrast:s})=>{const r=e.variantColorResolver({theme:e,color:n||e.primaryColor,autoContrast:s,variant:o||"filled"});return{tooltip:{"--tooltip-radius":t===void 0?void 0:_o(t),"--tooltip-bg":n?r.background:void 0,"--tooltip-color":n?r.color:void 0}}}),ot=Ho((e,t)=>{const n=tn("Tooltip",Ns,e),{children:o,position:s,refProp:r,label:a,openDelay:u,closeDelay:c,onPositionChange:l,opened:m,defaultOpened:f,withinPortal:_,radius:g,color:h,classNames:b,styles:v,unstyled:w,style:x,className:E,withArrow:M,arrowSize:J,arrowOffset:H,arrowRadius:re,arrowPosition:Me,offset:ve,transitionProps:Ze,multiline:Fe,events:Dt,zIndex:ct,disabled:Zt,positionDependencies:Te,onClick:fn,onMouseEnter:Ft,onMouseLeave:yn,inline:St,variant:Xt,keepMounted:lt,vars:Qe,portalProps:gn,mod:wt,floatingStrategy:_n,middlewares:Ao,autoContrast:As,attributes:j,target:D,...Y}=tn("Tooltip",Ns,n),{dir:Re}=lc(),je=Z.useRef(null),K=Ec({position:dc(Re,s),closeDelay:c,openDelay:u,onPositionChange:l,opened:m,defaultOpened:f,events:Dt,arrowRef:je,arrowOffset:H,offset:typeof ve=="number"?ve+(M?J/2:0):ve,positionDependencies:[...Te,D??o],inline:St,strategy:_n,middlewares:Ao});Z.useEffect(()=>{const kt=D instanceof HTMLElement?D:typeof D=="string"?document.querySelector(D):D?.current||null;kt&&K.reference(kt)},[D,K]);const xe=yo({name:"Tooltip",props:n,classes:bo,className:E,style:x,classNames:b,styles:v,unstyled:w,attributes:j,rootSelector:"tooltip",vars:Qe,varsResolver:Pc});if(!D&&!Ar(o))return null;if(D){const kt=js(Ze,{duration:100,transition:"fade"});return O.jsx(O.Fragment,{children:O.jsx(jo,{...gn,withinPortal:_,children:O.jsx(qs,{...kt,keepMounted:lt,mounted:!Zt&&!!K.opened,duration:K.isGroupPhase?10:kt.duration,children:Vu=>O.jsxs(nn,{...Y,"data-fixed":_n==="fixed"||void 0,variant:Xt,mod:[{multiline:Fe},wt],...K.getFloatingProps({ref:K.floating,className:xe("tooltip").className,style:{...xe("tooltip").style,...Vu,zIndex:ct,top:K.y??0,left:K.x??0}}),children:[a,O.jsx(Ms,{ref:je,arrowX:K.arrowX,arrowY:K.arrowY,visible:M,position:K.placement,arrowSize:J,arrowOffset:H,arrowRadius:re,arrowPosition:Me,...xe("arrow")})]})})})})}const pe=o,$e=pe.props,bn=Er(K.reference,Pr(pe),t),Es=js(Ze,{duration:100,transition:"fade"});return O.jsxs(O.Fragment,{children:[O.jsx(jo,{...gn,withinPortal:_,children:O.jsx(qs,{...Es,keepMounted:lt,mounted:!Zt&&!!K.opened,duration:K.isGroupPhase?10:Es.duration,children:kt=>O.jsxs(nn,{...Y,"data-fixed":_n==="fixed"||void 0,variant:Xt,mod:[{multiline:Fe},wt],...K.getFloatingProps({ref:K.floating,className:xe("tooltip").className,style:{...xe("tooltip").style,...kt,zIndex:ct,top:K.y??0,left:K.x??0}}),children:[a,O.jsx(Ms,{ref:je,arrowX:K.arrowX,arrowY:K.arrowY,visible:M,position:K.placement,arrowSize:J,arrowOffset:H,arrowRadius:re,arrowPosition:Me,...xe("arrow")})]})})}),Z.cloneElement(pe,K.getReferenceProps({onClick:fn,onMouseEnter:Ft,onMouseLeave:yn,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:pc(E,$e.className),...$e,[r]:bn}))]})});ot.classes=bo;ot.displayName="@mantine/core/Tooltip";ot.Floating=Jo;ot.Group=Yo;const qc=[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]],Mc=Et("outline","chevron-left","ChevronLeft",qc);const zc=[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]],jc=Et("outline","chevron-right","ChevronRight",zc);const Nc=[["path",{d:"M7 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M7 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M7 8l0 8",key:"svg-3"}],["path",{d:"M9 18h6a2 2 0 0 0 2 -2v-5",key:"svg-4"}],["path",{d:"M14 14l3 -3l3 3",key:"svg-5"}]],Uc=Et("outline","git-branch","GitBranch",Nc);const Lc=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],Us=Et("outline","info-circle","InfoCircle",Lc);const Dc=[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]],Zc=Et("outline","refresh","Refresh",Dc);const Fc=[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]],Xc=Et("outline","send","Send",Fc);const Bc=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],Vc=Et("outline","trash","Trash",Bc),Kc=({text:e,time:t,fromMe:n=!1,avatarUrl:o,name:s,onDelete:r,onRegenerate:a,onCreateBranch:u,onNavigateBranch:c,branchLabel:l,canNavigatePrev:m=!1,canNavigateNext:f=!1})=>{const _=Z.useMemo(()=>s?.trim()?.[0]?.toUpperCase()??void 0,[s]),g=Z.useMemo(()=>{const b=(w,x,E)=>w.split(/\r?\n/g).flatMap((M,J)=>{const H=[];return J>0&&H.push(O.jsx("br",{},`${E}-br-${J}`)),H.push(x(M,J)),H});return e.split(/(!\[[^\]]*\]\([^)]+\)|\*[^*]+\*|"[^"]+")/g).flatMap((w,x)=>{if(!w)return[];const E=w.match(/^!\[([^\]]*)\]\(([^)]+)\)$/);if(E){const[,M,J]=E;return[O.jsx(Wo,{src:J,alt:M||"Image",radius:"md",fit:"contain",maw:260,loading:"lazy",style:{maxWidth:"100%"}},`image-${x}`)]}if(w.startsWith('"')&&w.endsWith('"')){const J=`"${w.slice(1,-1)}"`;return b(J,(H,re)=>O.jsx("span",{style:{fontWeight:600},children:H},`quote-${x}-${re}`),`quote-${x}`)}if(w.startsWith("*")&&w.endsWith("*")){const M=w.slice(1,-1);return b(M,(J,H)=>O.jsx("span",{style:{color:"var(--mantine-color-dimmed)",fontStyle:"italic"},children:J},`asterisk-${x}-${H}`),`asterisk-${x}`)}return b(w,(M,J)=>O.jsx(hc.Fragment,{children:M},`plain-${x}-${J}`),`plain-${x}`)})},[e]),h=b=>O.jsx(bc,{src:o,radius:"xl",size:28,alt:s,children:!o&&_},`${s}-${b}`);return O.jsxs(st,{justify:n?"end":"start",align:"end",gap:6,children:[!n&&h("left"),O.jsxs(xt,{align:n?"flex-end":"flex-start",gap:4,maw:"80%",children:[(s||l||r||a||u||c)&&O.jsxs(st,{justify:"space-between",gap:4,w:"100%",children:[O.jsxs(st,{gap:6,align:"center",children:[!n&&s&&O.jsx($t,{size:"xs",c:"dimmed",children:s}),l&&O.jsx($t,{size:"xs",c:"dimmed",children:l})]}),O.jsxs(st,{gap:4,justify:"flex-end",children:[c&&O.jsxs(O.Fragment,{children:[O.jsx(ot,{label:"Previous branch",withArrow:!0,children:O.jsx(Bt,{size:"sm",variant:"subtle",color:"gray","aria-label":"Previous branch",disabled:!m,onClick:()=>{m&&c("previous")},children:O.jsx(Mc,{size:14,stroke:1.5})})}),O.jsx(ot,{label:"Next branch",withArrow:!0,children:O.jsx(Bt,{size:"sm",variant:"subtle",color:"gray","aria-label":"Next branch",disabled:!f,onClick:()=>{f&&c("next")},children:O.jsx(jc,{size:14,stroke:1.5})})})]}),u&&O.jsx(ot,{label:"Create branch from here",withArrow:!0,children:O.jsx(Bt,{size:"sm",variant:"subtle",color:"teal","aria-label":"Create branch",onClick:u,children:O.jsx(Uc,{size:14,stroke:1.5})})}),a&&O.jsx(ot,{label:"Regenerate message",withArrow:!0,children:O.jsx(Bt,{size:"sm",variant:"subtle",color:"blue","aria-label":"Regenerate message",onClick:a,children:O.jsx(Zc,{size:14,stroke:1.5})})}),r&&O.jsx(ot,{label:"Delete message",withArrow:!0,children:O.jsx(Bt,{size:"sm",variant:"subtle",color:"gray","aria-label":"Delete message",onClick:r,children:O.jsx(Vc,{size:14,stroke:1.5})})})]})]}),O.jsx(mc,{radius:16,p:"sm",shadow:"xs",style:{backdropFilter:"saturate(180%) blur(20px)",backgroundColor:"rgba(0, 0, 0, 0.5)",borderTopRightRadius:n?4:16,borderTopLeftRadius:n?16:4},children:O.jsx($t,{size:"sm",style:{whiteSpace:"pre-wrap"},children:g})}),t&&O.jsx($t,{size:"xs",c:"dimmed",children:new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),n&&h("right")]})},Gc=({viewport:e,messages:t,characters:n,persona:o,onDeleteMessage:s,onRegenerateMessage:r,onCreateBranch:a,onNavigateBranch:u,branchLabel:c,canNavigatePrev:l,canNavigateNext:m})=>{const f=Z.useMemo(()=>[...t??[]].sort((g,h)=>g.timestamp-h.timestamp),[t]),_=Z.useMemo(()=>g=>g.avatar?g.avatar:g.role==="user"?o?.avatar??"":g.role==="assistant"?n.find(b=>(b.inChatName||b.name)?.toLowerCase()===g.name?.toLowerCase()||b.name?.toLowerCase()===g.name?.toLowerCase())?.avatar??"":"",[n,o?.avatar]);return O.jsx(fc,{scrollbarSize:4,type:"never",viewportRef:e,children:O.jsx(xt,{gap:"xs",py:"xs",children:f.length===0?O.jsx($t,{size:"sm",c:"dimmed",ta:"center",children:"Start the conversation by sending a message."}):f.map(g=>O.jsx(Kc,{text:g.content,time:g.timestamp,fromMe:g.role==="user",name:g.name,avatarUrl:_(g),onDelete:()=>s(g),onRegenerate:g.role==="assistant"&&r?()=>r(g):void 0,onCreateBranch:a?()=>a(g):void 0,onNavigateBranch:u,branchLabel:c,canNavigatePrev:l,canNavigateNext:m},g.id))})})},Ls={OOC:"((ooc: **)) ",USER:"{{user}} ",CHAR:"{{char}} ",ACTION:"((action: **)) ",NEXT:"((next)) "},Hc=({onSend:e,disabled:t=!1,isProcessing:n=!1})=>{const[o,s]=Z.useState(""),r=Z.useRef(null),a=c=>{const l=Ls[c],m=r.current;if(!m||!l)return;const f=m.selectionStart??o.length,_=m.selectionEnd??o.length;s(g=>{const h=g.slice(0,f)+l+g.slice(_);return requestAnimationFrame(()=>{m.focus();const b=f+l.length;m.setSelectionRange(b,b)}),h})},u=async()=>{const c=o.trim();if(!(!c||t||n))try{await e(c),s("")}finally{requestAnimationFrame(()=>{r.current?.focus()})}};return O.jsxs(xt,{gap:6,children:[O.jsx(st,{gap:4,children:Object.keys(Ls).map(c=>O.jsx(Jn,{size:"compact-xs",disabled:t||n,onMouseDown:l=>l.preventDefault(),onClick:()=>a(c),children:c},c))}),O.jsx(st,{gap:"xs",wrap:"nowrap",children:O.jsx(vc,{radius:"lg",autosize:!0,minRows:2,placeholder:"Type your message...",flex:1,value:o,onChange:c=>s(c.currentTarget.value),ref:r,disabled:t||n,onKeyDown:c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),u())},rightSection:O.jsx(Bt,{onClick:u,radius:"xl",variant:"light",disabled:t||n||o.trim().length===0,children:n?O.jsx(qr,{size:"xs"}):O.jsx(Xc,{})})})})]})},Wc=Object.prototype.hasOwnProperty;function le(e,t){const n=/\{([a-zA-Z0-9_][a-zA-Z0-9_-]*?)\}/g;return function(s={}){return e.replace(n,function(r,a){if(!Wc.call(s,a))throw new Error(`Parameter '${a}' is required`);const u=s[a];if(typeof u!="string"&&typeof u!="number")throw new Error(`Parameter '${a}' must be a string or number`);return`${u}`})}}const Nr="production",Jc={[Nr]:"https://openrouter.ai/api/v1"};function Ur(e){let t=e.serverURL;const n={};if(!t){const s=e.server??Nr;t=Jc[s]||""}const o=le(t)(n);return new URL(o)}const Yc={userAgent:"speakeasy-sdk/typescript 0.2.9 2.768.0 1.0.0 @openrouter/sdk"},Qc=(e,t)=>t==null?fetch(e):fetch(e,t);class Qo{constructor(t={}){this.options=t,this.requestHooks=[],this.requestErrorHooks=[],this.responseHooks=[],this.fetcher=t.fetcher||Qc}async request(t){let n=t;for(const o of this.requestHooks){const s=await o(n);s&&(n=s)}try{const o=await this.fetcher(n);for(const s of this.responseHooks)await s(o,n);return o}catch(o){for(const s of this.requestErrorHooks)await s(o,n);throw o}}addHook(...t){if(t[0]==="beforeRequest")this.requestHooks.push(t[1]);else if(t[0]==="requestError")this.requestErrorHooks.push(t[1]);else if(t[0]==="response")this.responseHooks.push(t[1]);else throw new Error(`Invalid hook type: ${t[0]}`);return this}removeHook(...t){let n;if(t[0]==="beforeRequest")n=this.requestHooks;else if(t[0]==="requestError")n=this.requestErrorHooks;else if(t[0]==="response")n=this.responseHooks;else throw new Error(`Invalid hook type: ${t[0]}`);const o=n.findIndex(s=>s===t[1]);return o>=0&&n.splice(o,1),this}clone(){const t=new Qo(this.options);return t.requestHooks=this.requestHooks.slice(),t.requestErrorHooks=this.requestErrorHooks.slice(),t.responseHooks=this.responseHooks.slice(),t}}const Ds=/\s*;\s*/g;function Vt(e,t){if(t==="*")return!0;let n=e.headers.get("content-type")?.trim()||"application/octet-stream";n=n.toLowerCase();const o=t.toLowerCase().trim().split(Ds),[s="",...r]=o;if(s.split("/").length!==2)return!1;const a=n.split(Ds),[u="",...c]=a,[l="",m=""]=u.split("/");if(!l||!m||s!=="*/*"&&u!==s&&`${l}/*`!==s&&`*/${m}`!==s||c.length<r.length)return!1;const f=new Set(c);for(const _ of r)if(!f.has(_))return!1;return!0}const el=new RegExp("^[0-9]xx$","i");function es(e,t){const n=`${e.status}`,o=Array.isArray(t)?t:[t];return o.length?o.some(s=>{const r=`${s}`;if(r==="default")return!0;if(!el.test(`${r}`))return r===n;const a=r.charAt(0);if(!a)throw new Error("Invalid status code range");const u=n.charAt(0);if(!u)throw new Error(`Invalid response status code: ${n}`);return u===a}):!1}function tl(e,t,n){return es(e,t)&&Vt(e,n)}function Lr(e){if(typeof e!="object"||e==null)return!1;const t=e instanceof TypeError&&e.message.toLowerCase().startsWith("failed to fetch"),n=e instanceof TypeError&&e.message.toLowerCase().startsWith("fetch failed"),o="name"in e&&e.name==="ConnectionError",s="code"in e&&typeof e.code=="string"&&e.code.toLowerCase()==="econnreset";return t||n||s||o}function Dr(e){if(typeof e!="object"||e==null)return!1;const t="name"in e&&e.name==="TimeoutError",n="code"in e&&e.code===23,o="code"in e&&typeof e.code=="string"&&e.code.toLowerCase()==="econnaborted";return t||n||o}function nl(e){if(typeof e!="object"||e==null)return!1;const t="name"in e&&e.name==="AbortError",n="code"in e&&e.code===20,o="code"in e&&typeof e.code=="string"&&e.code.toLowerCase()==="econnaborted";return t||n||o}class Zs{constructor(){this.sdkInitHooks=[],this.beforeCreateRequestHooks=[],this.beforeRequestHooks=[],this.afterSuccessHooks=[],this.afterErrorHooks=[];const t=[];for(const n of t)"sdkInit"in n&&this.registerSDKInitHook(n),"beforeCreateRequest"in n&&this.registerBeforeCreateRequestHook(n),"beforeRequest"in n&&this.registerBeforeRequestHook(n),"afterSuccess"in n&&this.registerAfterSuccessHook(n),"afterError"in n&&this.registerAfterErrorHook(n)}registerSDKInitHook(t){this.sdkInitHooks.push(t)}registerBeforeCreateRequestHook(t){this.beforeCreateRequestHooks.push(t)}registerBeforeRequestHook(t){this.beforeRequestHooks.push(t)}registerAfterSuccessHook(t){this.afterSuccessHooks.push(t)}registerAfterErrorHook(t){this.afterErrorHooks.push(t)}sdkInit(t){return this.sdkInitHooks.reduce((n,o)=>o.sdkInit(n),t)}beforeCreateRequest(t,n){let o=n;for(const s of this.beforeCreateRequestHooks)o=s.beforeCreateRequest(t,o);return o}async beforeRequest(t,n){let o=n;for(const s of this.beforeRequestHooks)o=await s.beforeRequest(t,o);return o}async afterSuccess(t,n){let o=n;for(const s of this.afterSuccessHooks)o=await s.afterSuccess(t,o);return o}async afterError(t,n,o){let s=n,r=o;for(const a of this.afterErrorHooks){const u=await a.afterError(t,s,r);s=u.response,r=u.error}return{response:s,error:r}}}class Nn extends Error{constructor(t,n){let o=t;n?.cause&&(o+=`: ${n.cause}`),super(o,n),this.name="HTTPClientError",typeof this.cause>"u"&&(this.cause=n?.cause)}}class Fs extends Nn{constructor(){super(...arguments),this.name="UnexpectedClientError"}}class ol extends Nn{constructor(){super(...arguments),this.name="InvalidRequestError"}}class sl extends Nn{constructor(){super(...arguments),this.name="RequestAbortedError"}}class rl extends Nn{constructor(){super(...arguments),this.name="RequestTimeoutError"}}class al extends Nn{constructor(){super(...arguments),this.name="ConnectionError"}}function no(e){return{ok:!0,value:e}}function dt(e){return{ok:!1,error:e}}async function ue(e){const t=await e;if(!t.ok)throw t.error;return t.value}const Zr=Object.freeze({status:"aborted"});function $(e,t,n){function o(u,c){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:c,constr:a,traits:new Set},enumerable:!1}),u._zod.traits.has(e))return;u._zod.traits.add(e),t(u,c);const l=a.prototype,m=Object.keys(l);for(let f=0;f<m.length;f++){const _=m[f];_ in u||(u[_]=l[_].bind(u))}}const s=n?.Parent??Object;class r extends s{}Object.defineProperty(r,"name",{value:e});function a(u){var c;const l=n?.Parent?new r:this;o(l,u),(c=l._zod).deferred??(c.deferred=[]);for(const m of l._zod.deferred)m();return l}return Object.defineProperty(a,"init",{value:o}),Object.defineProperty(a,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}class Qt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Fr extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const No={};function rt(e){return e&&Object.assign(No,e),No}function Xr(e){const t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,s])=>t.indexOf(+o)===-1).map(([o,s])=>s)}function Xs(e,t="|"){return e.map(n=>Kr(n)).join(t)}function Uo(e,t){return typeof t=="bigint"?t.toString():t}function ts(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ns(e){return e==null}function os(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function il(e,t){const n=(e.toString().split(".")[1]||"").length,o=t.toString();let s=(o.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(o)){const c=o.match(/\d?e-(\d?)/);c?.[1]&&(s=Number.parseInt(c[1]))}const r=n>s?n:s,a=Number.parseInt(e.toFixed(r).replace(".","")),u=Number.parseInt(t.toFixed(r).replace(".",""));return a%u/10**r}const Bs=Symbol("evaluating");function te(e,t,n){let o;Object.defineProperty(e,t,{get(){if(o!==Bs)return o===void 0&&(o=Bs,o=n()),o},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Pt(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function qt(...e){const t={};for(const n of e){const o=Object.getOwnPropertyDescriptors(n);Object.assign(t,o)}return Object.defineProperties({},t)}function Vs(e){return JSON.stringify(e)}function ul(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Br="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function oo(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const cl=ts(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function on(e){if(oo(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(oo(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Vr(e){return on(e)?{...e}:Array.isArray(e)?[...e]:e}const ll=new Set(["string","number","symbol"]);function sn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function gt(e,t,n){const o=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(o._zod.parent=e),o}function U(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Kr(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function dl(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const pl={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ml(e,t){const n=e._zod.def,o=qt(e._zod.def,{get shape(){const s={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(s[r]=n.shape[r])}return Pt(this,"shape",s),s},checks:[]});return gt(e,o)}function hl(e,t){const n=e._zod.def,o=qt(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete s[r]}return Pt(this,"shape",s),s},checks:[]});return gt(e,o)}function fl(e,t){if(!on(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=qt(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return Pt(this,"shape",r),r},checks:[]});return gt(e,s)}function yl(e,t){if(!on(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const o={...e._zod.def.shape,...t};return Pt(this,"shape",o),o},checks:e._zod.def.checks};return gt(e,n)}function gl(e,t){const n=qt(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t._zod.def.shape};return Pt(this,"shape",o),o},get catchall(){return t._zod.def.catchall},checks:[]});return gt(e,n)}function _l(e,t,n){const o=qt(t._zod.def,{get shape(){const s=t._zod.def.shape,r={...s};if(n)for(const a in n){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(r[a]=e?new e({type:"optional",innerType:s[a]}):s[a])}else for(const a in s)r[a]=e?new e({type:"optional",innerType:s[a]}):s[a];return Pt(this,"shape",r),r},checks:[]});return gt(t,o)}function bl(e,t,n){const o=qt(t._zod.def,{get shape(){const s=t._zod.def.shape,r={...s};if(n)for(const a in n){if(!(a in r))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(r[a]=new e({type:"nonoptional",innerType:s[a]}))}else for(const a in s)r[a]=new e({type:"nonoptional",innerType:s[a]});return Pt(this,"shape",r),r},checks:[]});return gt(t,o)}function Ht(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Wt(e,t){return t.map(n=>{var o;return(o=n).path??(o.path=[]),n.path.unshift(e),n})}function Bn(e){return typeof e=="string"?e:e?.message}function pt(e,t,n){const o={...e,path:e.path??[]};if(!e.message){const s=Bn(e.inst?._zod.def?.error?.(e))??Bn(t?.error?.(e))??Bn(n.customError?.(e))??Bn(n.localeError?.(e))??"Invalid input";o.message=s}return delete o.inst,delete o.continue,t?.reportInput||delete o.input,o}function ss(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Rn(...e){const[t,n,o]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:o}:{...t}}const Gr=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Uo,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},vo=$("$ZodError",Gr),Hr=$("$ZodError",Gr,{Parent:Error});function vl(e,t=n=>n.message){const n={},o=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):o.push(t(s));return{formErrors:o,fieldErrors:n}}function Sl(e,t=n=>n.message){const n={_errors:[]},o=s=>{for(const r of s.issues)if(r.code==="invalid_union"&&r.errors.length)r.errors.map(a=>o({issues:a}));else if(r.code==="invalid_key")o({issues:r.issues});else if(r.code==="invalid_element")o({issues:r.issues});else if(r.path.length===0)n._errors.push(t(r));else{let a=n,u=0;for(;u<r.path.length;){const c=r.path[u];u===r.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(r))):a[c]=a[c]||{_errors:[]},a=a[c],u++}}};return o(e),n}function wl(e){const t=[],n=e.map(o=>typeof o=="object"?o.key:o);for(const o of n)typeof o=="number"?t.push(`[${o}]`):typeof o=="symbol"?t.push(`[${JSON.stringify(String(o))}]`):/[^\w$]/.test(o)?t.push(`[${JSON.stringify(o)}]`):(t.length&&t.push("."),t.push(o));return t.join("")}function kl(e){const t=[],n=[...e.issues].sort((o,s)=>(o.path??[]).length-(s.path??[]).length);for(const o of n)t.push(`✖ ${o.message}`),o.path?.length&&t.push(`  → at ${wl(o.path)}`);return t.join(`
`)}const rs=e=>(t,n,o,s)=>{const r=o?Object.assign(o,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},r);if(a instanceof Promise)throw new Qt;if(a.issues.length){const u=new(s?.Err??e)(a.issues.map(c=>pt(c,r,rt())));throw Br(u,s?.callee),u}return a.value},as=e=>async(t,n,o,s)=>{const r=o?Object.assign(o,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},r);if(a instanceof Promise&&(a=await a),a.issues.length){const u=new(s?.Err??e)(a.issues.map(c=>pt(c,r,rt())));throw Br(u,s?.callee),u}return a.value},So=e=>(t,n,o)=>{const s=o?{...o,async:!1}:{async:!1},r=t._zod.run({value:n,issues:[]},s);if(r instanceof Promise)throw new Qt;return r.issues.length?{success:!1,error:new(e??vo)(r.issues.map(a=>pt(a,s,rt())))}:{success:!0,data:r.value}},Rl=So(Hr),wo=e=>async(t,n,o)=>{const s=o?Object.assign(o,{async:!0}):{async:!0};let r=t._zod.run({value:n,issues:[]},s);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new e(r.issues.map(a=>pt(a,s,rt())))}:{success:!0,data:r.value}},xl=wo(Hr),$l=e=>(t,n,o)=>{const s=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return rs(e)(t,n,s)},Cl=e=>(t,n,o)=>rs(e)(t,n,o),Il=e=>async(t,n,o)=>{const s=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return as(e)(t,n,s)},Tl=e=>async(t,n,o)=>as(e)(t,n,o),Ol=e=>(t,n,o)=>{const s=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return So(e)(t,n,s)},Al=e=>(t,n,o)=>So(e)(t,n,o),El=e=>async(t,n,o)=>{const s=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return wo(e)(t,n,s)},Pl=e=>async(t,n,o)=>wo(e)(t,n,o),ql=/^[cC][^\s-]{8,}$/,Ml=/^[0-9a-z]+$/,zl=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,jl=/^[0-9a-vA-V]{20}$/,Nl=/^[A-Za-z0-9]{27}$/,Ul=/^[a-zA-Z0-9_-]{21}$/,Ll=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Dl=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ks=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Zl=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Fl="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Xl(){return new RegExp(Fl,"u")}const Bl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Vl=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Kl=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Gl=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Hl=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Wr=/^[A-Za-z0-9_-]*$/,Wl=/^\+(?:[0-9]){6,14}[0-9]$/,Jr="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Jl=new RegExp(`^${Jr}$`);function Yr(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Yl(e){return new RegExp(`^${Yr(e)}$`)}function Ql(e){const t=Yr({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${t}(?:${n.join("|")})`;return new RegExp(`^${Jr}T(?:${o})$`)}const ed=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},td=/^-?\d+$/,nd=/^-?\d+(?:\.\d+)?/,od=/^(?:true|false)$/i,sd=/^[^A-Z]*$/,rd=/^[^a-z]*$/,ze=$("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Qr={number:"number",bigint:"bigint",object:"date"},ea=$("$ZodCheckLessThan",(e,t)=>{ze.init(e,t);const n=Qr[typeof t.value];e._zod.onattach.push(o=>{const s=o._zod.bag,r=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:n,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ta=$("$ZodCheckGreaterThan",(e,t)=>{ze.init(e,t);const n=Qr[typeof t.value];e._zod.onattach.push(o=>{const s=o._zod.bag,r=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:n,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ad=$("$ZodCheckMultipleOf",(e,t)=>{ze.init(e,t),e._zod.onattach.push(n=>{var o;(o=n._zod.bag).multipleOf??(o.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):il(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),id=$("$ZodCheckNumberFormat",(e,t)=>{ze.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),o=n?"int":"number",[s,r]=pl[t.format];e._zod.onattach.push(a=>{const u=a._zod.bag;u.format=t.format,u.minimum=s,u.maximum=r,n&&(u.pattern=td)}),e._zod.check=a=>{const u=a.value;if(n){if(!Number.isInteger(u)){a.issues.push({expected:o,format:t.format,code:"invalid_type",continue:!1,input:u,inst:e});return}if(!Number.isSafeInteger(u)){u>0?a.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):a.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort});return}}u<s&&a.issues.push({origin:"number",input:u,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),u>r&&a.issues.push({origin:"number",input:u,code:"too_big",maximum:r,inst:e})}}),ud=$("$ZodCheckMaxLength",(e,t)=>{var n;ze.init(e,t),(n=e._zod.def).when??(n.when=o=>{const s=o.value;return!ns(s)&&s.length!==void 0}),e._zod.onattach.push(o=>{const s=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{const s=o.value;if(s.length<=t.maximum)return;const a=ss(s);o.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),cd=$("$ZodCheckMinLength",(e,t)=>{var n;ze.init(e,t),(n=e._zod.def).when??(n.when=o=>{const s=o.value;return!ns(s)&&s.length!==void 0}),e._zod.onattach.push(o=>{const s=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{const s=o.value;if(s.length>=t.minimum)return;const a=ss(s);o.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),ld=$("$ZodCheckLengthEquals",(e,t)=>{var n;ze.init(e,t),(n=e._zod.def).when??(n.when=o=>{const s=o.value;return!ns(s)&&s.length!==void 0}),e._zod.onattach.push(o=>{const s=o._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=o=>{const s=o.value,r=s.length;if(r===t.length)return;const a=ss(s),u=r>t.length;o.issues.push({origin:a,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),ko=$("$ZodCheckStringFormat",(e,t)=>{var n,o;ze.init(e,t),e._zod.onattach.push(s=>{const r=s._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),dd=$("$ZodCheckRegex",(e,t)=>{ko.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),pd=$("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=sd),ko.init(e,t)}),md=$("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=rd),ko.init(e,t)}),hd=$("$ZodCheckIncludes",(e,t)=>{ze.init(e,t);const n=sn(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=o,e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(o)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),fd=$("$ZodCheckStartsWith",(e,t)=>{ze.init(e,t);const n=new RegExp(`^${sn(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=o=>{o.value.startsWith(t.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:o.value,inst:e,continue:!t.abort})}}),yd=$("$ZodCheckEndsWith",(e,t)=>{ze.init(e,t);const n=new RegExp(`.*${sn(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=o=>{o.value.endsWith(t.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:o.value,inst:e,continue:!t.abort})}}),gd=$("$ZodCheckOverwrite",(e,t)=>{ze.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class _d{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const o=t.split(`
`).filter(a=>a),s=Math.min(...o.map(a=>a.length-a.trimStart().length)),r=o.map(a=>a.slice(s)).map(a=>" ".repeat(this.indent*2)+a);for(const a of r)this.content.push(a)}compile(){const t=Function,n=this?.args,s=[...(this?.content??[""]).map(r=>`  ${r}`)];return new t(...n,s.join(`
`))}}const bd={major:4,minor:1,patch:13},ie=$("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=bd;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const s of o)for(const r of s._zod.onattach)r(e);if(o.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(a,u,c)=>{let l=Ht(a),m;for(const f of u){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(l)continue;const _=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new Qt;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,a.issues.length!==_&&(l||(l=Ht(a,_)))});else{if(a.issues.length===_)continue;l||(l=Ht(a,_))}}return m?m.then(()=>a):a},r=(a,u,c)=>{if(Ht(a))return a.aborted=!0,a;const l=s(u,o,c);if(l instanceof Promise){if(c.async===!1)throw new Qt;return l.then(m=>e._zod.parse(m,c))}return e._zod.parse(l,c)};e._zod.run=(a,u)=>{if(u.skipChecks)return e._zod.parse(a,u);if(u.direction==="backward"){const l=e._zod.parse({value:a.value,issues:[]},{...u,skipChecks:!0});return l instanceof Promise?l.then(m=>r(m,a,u)):r(l,a,u)}const c=e._zod.parse(a,u);if(c instanceof Promise){if(u.async===!1)throw new Qt;return c.then(l=>s(l,o,u))}return s(c,o,u)}}e["~standard"]={validate:s=>{try{const r=Rl(e,s);return r.success?{value:r.data}:{issues:r.error?.issues}}catch{return xl(e,s).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),is=$("$ZodString",(e,t)=>{ie.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??ed(e._zod.bag),e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),me=$("$ZodStringFormat",(e,t)=>{ko.init(e,t),is.init(e,t)}),vd=$("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Dl),me.init(e,t)}),Sd=$("$ZodUUID",(e,t)=>{if(t.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Ks(o))}else t.pattern??(t.pattern=Ks());me.init(e,t)}),wd=$("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Zl),me.init(e,t)}),kd=$("$ZodURL",(e,t)=>{me.init(e,t),e._zod.check=n=>{try{const o=n.value.trim(),s=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=s.href:n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Rd=$("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Xl()),me.init(e,t)}),xd=$("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Ul),me.init(e,t)}),$d=$("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=ql),me.init(e,t)}),Cd=$("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Ml),me.init(e,t)}),Id=$("$ZodULID",(e,t)=>{t.pattern??(t.pattern=zl),me.init(e,t)}),Td=$("$ZodXID",(e,t)=>{t.pattern??(t.pattern=jl),me.init(e,t)}),Od=$("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Nl),me.init(e,t)}),Ad=$("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Ql(t)),me.init(e,t)}),Ed=$("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Jl),me.init(e,t)}),Pd=$("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Yl(t)),me.init(e,t)}),qd=$("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Ll),me.init(e,t)}),Md=$("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Bl),me.init(e,t),e._zod.bag.format="ipv4"}),zd=$("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Vl),me.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),jd=$("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Kl),me.init(e,t)}),Nd=$("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Gl),me.init(e,t),e._zod.check=n=>{const o=n.value.split("/");try{if(o.length!==2)throw new Error;const[s,r]=o;if(!r)throw new Error;const a=Number(r);if(`${a}`!==r)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function na(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Ud=$("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Hl),me.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{na(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Ld(e){if(!Wr.test(e))return!1;const t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return na(n)}const Dd=$("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Wr),me.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{Ld(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Zd=$("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Wl),me.init(e,t)});function Fd(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[o]=n;if(!o)return!1;const s=JSON.parse(atob(o));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const Xd=$("$ZodJWT",(e,t)=>{me.init(e,t),e._zod.check=n=>{Fd(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),oa=$("$ZodNumber",(e,t)=>{ie.init(e,t),e._zod.pattern=e._zod.bag.pattern??nd,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const r=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...r?{received:r}:{}}),n}}),Bd=$("$ZodNumberFormat",(e,t)=>{id.init(e,t),oa.init(e,t)}),Vd=$("$ZodBoolean",(e,t)=>{ie.init(e,t),e._zod.pattern=od,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),Kd=$("$ZodAny",(e,t)=>{ie.init(e,t),e._zod.parse=n=>n}),Gd=$("$ZodUnknown",(e,t)=>{ie.init(e,t),e._zod.parse=n=>n}),Hd=$("$ZodNever",(e,t)=>{ie.init(e,t),e._zod.parse=(n,o)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)}),Wd=$("$ZodDate",(e,t)=>{ie.init(e,t),e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,r=s instanceof Date;return r&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...r?{received:"Invalid Date"}:{},inst:e}),n}});function Gs(e,t,n){e.issues.length&&t.issues.push(...Wt(n,e.issues)),t.value[n]=e.value}const Jd=$("$ZodArray",(e,t)=>{ie.init(e,t),e._zod.parse=(n,o)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const r=[];for(let a=0;a<s.length;a++){const u=s[a],c=t.element._zod.run({value:u,issues:[]},o);c instanceof Promise?r.push(c.then(l=>Gs(l,n,a))):Gs(c,n,a)}return r.length?Promise.all(r).then(()=>n):n}});function so(e,t,n,o){e.issues.length&&t.issues.push(...Wt(n,e.issues)),e.value===void 0?n in o&&(t.value[n]=void 0):t.value[n]=e.value}function sa(e){const t=Object.keys(e.shape);for(const o of t)if(!e.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const n=dl(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function ra(e,t,n,o,s,r){const a=[],u=s.keySet,c=s.catchall._zod,l=c.def.type;for(const m in t){if(u.has(m))continue;if(l==="never"){a.push(m);continue}const f=c.run({value:t[m],issues:[]},o);f instanceof Promise?e.push(f.then(_=>so(_,n,m,t))):so(f,n,m,t)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:r}),e.length?Promise.all(e).then(()=>n):n}const Yd=$("$ZodObject",(e,t)=>{if(ie.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const u=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...u};return Object.defineProperty(t,"shape",{value:c}),c}})}const o=ts(()=>sa(t));te(e._zod,"propValues",()=>{const u=t.shape,c={};for(const l in u){const m=u[l]._zod;if(m.values){c[l]??(c[l]=new Set);for(const f of m.values)c[l].add(f)}}return c});const s=oo,r=t.catchall;let a;e._zod.parse=(u,c)=>{a??(a=o.value);const l=u.value;if(!s(l))return u.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),u;u.value={};const m=[],f=a.shape;for(const _ of a.keys){const h=f[_]._zod.run({value:l[_],issues:[]},c);h instanceof Promise?m.push(h.then(b=>so(b,u,_,l))):so(h,u,_,l)}return r?ra(m,l,u,c,o.value,e):m.length?Promise.all(m).then(()=>u):u}}),Qd=$("$ZodObjectJIT",(e,t)=>{Yd.init(e,t);const n=e._zod.parse,o=ts(()=>sa(t)),s=_=>{const g=new _d(["shape","payload","ctx"]),h=o.value,b=E=>{const M=Vs(E);return`shape[${M}]._zod.run({ value: input[${M}], issues: [] }, ctx)`};g.write("const input = payload.value;");const v=Object.create(null);let w=0;for(const E of h.keys)v[E]=`key_${w++}`;g.write("const newResult = {};");for(const E of h.keys){const M=v[E],J=Vs(E);g.write(`const ${M} = ${b(E)};`),g.write(`
        if (${M}.issues.length) {
          payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${J}, ...iss.path] : [${J}]
          })));
        }
        
        
        if (${M}.value === undefined) {
          if (${J} in input) {
            newResult[${J}] = undefined;
          }
        } else {
          newResult[${J}] = ${M}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const x=g.compile();return(E,M)=>x(_,E,M)};let r;const a=oo,u=!No.jitless,l=u&&cl.value,m=t.catchall;let f;e._zod.parse=(_,g)=>{f??(f=o.value);const h=_.value;return a(h)?u&&l&&g?.async===!1&&g.jitless!==!0?(r||(r=s(t.shape)),_=r(_,g),m?ra([],h,_,g,f,e):_):n(_,g):(_.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),_)}});function Hs(e,t,n,o){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;const s=e.filter(r=>!Ht(r));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(a=>pt(a,o,rt())))}),t)}const ep=$("$ZodUnion",(e,t)=>{ie.init(e,t),te(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),te(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),te(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),te(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${s.map(r=>os(r.source)).join("|")})$`)}});const n=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(s,r)=>{if(n)return o(s,r);let a=!1;const u=[];for(const c of t.options){const l=c._zod.run({value:s.value,issues:[]},r);if(l instanceof Promise)u.push(l),a=!0;else{if(l.issues.length===0)return l;u.push(l)}}return a?Promise.all(u).then(c=>Hs(c,s,e,r)):Hs(u,s,e,r)}}),tp=$("$ZodIntersection",(e,t)=>{ie.init(e,t),e._zod.parse=(n,o)=>{const s=n.value,r=t.left._zod.run({value:s,issues:[]},o),a=t.right._zod.run({value:s,issues:[]},o);return r instanceof Promise||a instanceof Promise?Promise.all([r,a]).then(([c,l])=>Ws(n,c,l)):Ws(n,r,a)}});function Lo(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(on(e)&&on(t)){const n=Object.keys(t),o=Object.keys(e).filter(r=>n.indexOf(r)!==-1),s={...e,...t};for(const r of o){const a=Lo(e[r],t[r]);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};s[r]=a.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let o=0;o<e.length;o++){const s=e[o],r=t[o],a=Lo(s,r);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Ws(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Ht(e))return e;const o=Lo(t.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}const np=$("$ZodRecord",(e,t)=>{ie.init(e,t),e._zod.parse=(n,o)=>{const s=n.value;if(!on(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),n;const r=[],a=t.keyType._zod.values;if(a){n.value={};const u=new Set;for(const l of a)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){u.add(typeof l=="number"?l.toString():l);const m=t.valueType._zod.run({value:s[l],issues:[]},o);m instanceof Promise?r.push(m.then(f=>{f.issues.length&&n.issues.push(...Wt(l,f.issues)),n.value[l]=f.value})):(m.issues.length&&n.issues.push(...Wt(l,m.issues)),n.value[l]=m.value)}let c;for(const l in s)u.has(l)||(c=c??[],c.push(l));c&&c.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:c})}else{n.value={};for(const u of Reflect.ownKeys(s)){if(u==="__proto__")continue;const c=t.keyType._zod.run({value:u,issues:[]},o);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(m=>pt(m,o,rt())),input:u,path:[u],inst:e}),n.value[c.value]=c.value;continue}const l=t.valueType._zod.run({value:s[u],issues:[]},o);l instanceof Promise?r.push(l.then(m=>{m.issues.length&&n.issues.push(...Wt(u,m.issues)),n.value[c.value]=m.value})):(l.issues.length&&n.issues.push(...Wt(u,l.issues)),n.value[c.value]=l.value)}}return r.length?Promise.all(r).then(()=>n):n}}),op=$("$ZodEnum",(e,t)=>{ie.init(e,t);const n=Xr(t.entries),o=new Set(n);e._zod.values=o,e._zod.pattern=new RegExp(`^(${n.filter(s=>ll.has(typeof s)).map(s=>typeof s=="string"?sn(s):s.toString()).join("|")})$`),e._zod.parse=(s,r)=>{const a=s.value;return o.has(a)||s.issues.push({code:"invalid_value",values:n,input:a,inst:e}),s}}),sp=$("$ZodLiteral",(e,t)=>{if(ie.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(o=>typeof o=="string"?sn(o):o?sn(o.toString()):String(o)).join("|")})$`),e._zod.parse=(o,s)=>{const r=o.value;return n.has(r)||o.issues.push({code:"invalid_value",values:t.values,input:r,inst:e}),o}}),rp=$("$ZodTransform",(e,t)=>{ie.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new Fr(e.constructor.name);const s=t.transform(n.value,n);if(o.async)return(s instanceof Promise?s:Promise.resolve(s)).then(a=>(n.value=a,n));if(s instanceof Promise)throw new Qt;return n.value=s,n}});function Js(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const ap=$("$ZodOptional",(e,t)=>{ie.init(e,t),e._zod.optin="optional",e._zod.optout="optional",te(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),te(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${os(n.source)})?$`):void 0}),e._zod.parse=(n,o)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(n,o);return s instanceof Promise?s.then(r=>Js(r,n.value)):Js(s,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,o)}}),ip=$("$ZodNullable",(e,t)=>{ie.init(e,t),te(e._zod,"optin",()=>t.innerType._zod.optin),te(e._zod,"optout",()=>t.innerType._zod.optout),te(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${os(n.source)}|null)$`):void 0}),te(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,o)=>n.value===null?n:t.innerType._zod.run(n,o)}),up=$("$ZodDefault",(e,t)=>{ie.init(e,t),e._zod.optin="optional",te(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);if(n.value===void 0)return n.value=t.defaultValue,n;const s=t.innerType._zod.run(n,o);return s instanceof Promise?s.then(r=>Ys(r,t)):Ys(s,t)}});function Ys(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const cp=$("$ZodPrefault",(e,t)=>{ie.init(e,t),e._zod.optin="optional",te(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>(o.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,o))}),lp=$("$ZodNonOptional",(e,t)=>{ie.init(e,t),te(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(o=>o!==void 0)):void 0}),e._zod.parse=(n,o)=>{const s=t.innerType._zod.run(n,o);return s instanceof Promise?s.then(r=>Qs(r,e)):Qs(s,e)}});function Qs(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const dp=$("$ZodCatch",(e,t)=>{ie.init(e,t),te(e._zod,"optin",()=>t.innerType._zod.optin),te(e._zod,"optout",()=>t.innerType._zod.optout),te(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const s=t.innerType._zod.run(n,o);return s instanceof Promise?s.then(r=>(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(a=>pt(a,o,rt()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(r=>pt(r,o,rt()))},input:n.value}),n.issues=[]),n)}}),pp=$("$ZodPipe",(e,t)=>{ie.init(e,t),te(e._zod,"values",()=>t.in._zod.values),te(e._zod,"optin",()=>t.in._zod.optin),te(e._zod,"optout",()=>t.out._zod.optout),te(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,o)=>{if(o.direction==="backward"){const r=t.out._zod.run(n,o);return r instanceof Promise?r.then(a=>Vn(a,t.in,o)):Vn(r,t.in,o)}const s=t.in._zod.run(n,o);return s instanceof Promise?s.then(r=>Vn(r,t.out,o)):Vn(s,t.out,o)}});function Vn(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const mp=$("$ZodReadonly",(e,t)=>{ie.init(e,t),te(e._zod,"propValues",()=>t.innerType._zod.propValues),te(e._zod,"values",()=>t.innerType._zod.values),te(e._zod,"optin",()=>t.innerType?._zod?.optin),te(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const s=t.innerType._zod.run(n,o);return s instanceof Promise?s.then(er):er(s)}});function er(e){return e.value=Object.freeze(e.value),e}const hp=$("$ZodLazy",(e,t)=>{ie.init(e,t),te(e._zod,"innerType",()=>t.getter()),te(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),te(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),te(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),te(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(n,o)=>e._zod.innerType._zod.run(n,o)}),fp=$("$ZodCustom",(e,t)=>{ze.init(e,t),ie.init(e,t),e._zod.parse=(n,o)=>n,e._zod.check=n=>{const o=n.value,s=t.fn(o);if(s instanceof Promise)return s.then(r=>tr(r,n,o,e));tr(s,n,o,e)}});function tr(e,t,n,o){if(!e){const s={code:"custom",input:n,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(s.params=o._zod.def.params),t.issues.push(Rn(s))}}const yp=e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},gp=()=>{const e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(o){return e[o]??null}const n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Invalid input: expected ${o.expected}, received ${yp(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${Kr(o.values[0])}`:`Invalid option: expected one of ${Xs(o.values,"|")}`;case"too_big":{const s=o.inclusive?"<=":"<",r=t(o.origin);return r?`Too big: expected ${o.origin??"value"} to have ${s}${o.maximum.toString()} ${r.unit??"elements"}`:`Too big: expected ${o.origin??"value"} to be ${s}${o.maximum.toString()}`}case"too_small":{const s=o.inclusive?">=":">",r=t(o.origin);return r?`Too small: expected ${o.origin} to have ${s}${o.minimum.toString()} ${r.unit}`:`Too small: expected ${o.origin} to be ${s}${o.minimum.toString()}`}case"invalid_format":{const s=o;return s.format==="starts_with"?`Invalid string: must start with "${s.prefix}"`:s.format==="ends_with"?`Invalid string: must end with "${s.suffix}"`:s.format==="includes"?`Invalid string: must include "${s.includes}"`:s.format==="regex"?`Invalid string: must match pattern ${s.pattern}`:`Invalid ${n[s.format]??o.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${o.divisor}`;case"unrecognized_keys":return`Unrecognized key${o.keys.length>1?"s":""}: ${Xs(o.keys,", ")}`;case"invalid_key":return`Invalid key in ${o.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${o.origin}`;default:return"Invalid input"}}};function _p(){return{localeError:gp()}}var nr;class aa{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const o=n[0];if(this._map.set(t,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const o={...this.get(n)??{}};delete o.id;const s={...o,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function bp(){return new aa}(nr=globalThis).__zod_globalRegistry??(nr.__zod_globalRegistry=bp());const wn=globalThis.__zod_globalRegistry;function vp(e,t){return new e({type:"string",...U(t)})}function Sp(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...U(t)})}function or(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...U(t)})}function wp(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...U(t)})}function kp(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...U(t)})}function Rp(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...U(t)})}function xp(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...U(t)})}function $p(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...U(t)})}function Cp(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...U(t)})}function Ip(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...U(t)})}function Tp(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...U(t)})}function Op(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...U(t)})}function Ap(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...U(t)})}function Ep(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...U(t)})}function Pp(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...U(t)})}function qp(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...U(t)})}function Mp(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...U(t)})}function zp(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...U(t)})}function jp(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...U(t)})}function Np(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...U(t)})}function Up(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...U(t)})}function Lp(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...U(t)})}function Dp(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...U(t)})}function Zp(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...U(t)})}function Fp(e,t){return new e({type:"string",format:"date",check:"string_format",...U(t)})}function Xp(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...U(t)})}function Bp(e,t){return new e({type:"string",format:"duration",check:"string_format",...U(t)})}function Vp(e,t){return new e({type:"number",checks:[],...U(t)})}function Kp(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...U(t)})}function Gp(e,t){return new e({type:"boolean",...U(t)})}function Hp(e,t){return new e({type:"boolean",coerce:!0,...U(t)})}function Wp(e){return new e({type:"any"})}function Jp(e){return new e({type:"unknown"})}function Yp(e,t){return new e({type:"never",...U(t)})}function Qp(e,t){return new e({type:"date",...U(t)})}function sr(e,t){return new ea({check:"less_than",...U(t),value:e,inclusive:!1})}function Yn(e,t){return new ea({check:"less_than",...U(t),value:e,inclusive:!0})}function rr(e,t){return new ta({check:"greater_than",...U(t),value:e,inclusive:!1})}function Qn(e,t){return new ta({check:"greater_than",...U(t),value:e,inclusive:!0})}function ar(e,t){return new ad({check:"multiple_of",...U(t),value:e})}function ia(e,t){return new ud({check:"max_length",...U(t),maximum:e})}function ro(e,t){return new cd({check:"min_length",...U(t),minimum:e})}function ua(e,t){return new ld({check:"length_equals",...U(t),length:e})}function em(e,t){return new dd({check:"string_format",format:"regex",...U(t),pattern:e})}function tm(e){return new pd({check:"string_format",format:"lowercase",...U(e)})}function nm(e){return new md({check:"string_format",format:"uppercase",...U(e)})}function om(e,t){return new hd({check:"string_format",format:"includes",...U(t),includes:e})}function sm(e,t){return new fd({check:"string_format",format:"starts_with",...U(t),prefix:e})}function rm(e,t){return new yd({check:"string_format",format:"ends_with",...U(t),suffix:e})}function dn(e){return new gd({check:"overwrite",tx:e})}function am(e){return dn(t=>t.normalize(e))}function im(){return dn(e=>e.trim())}function um(){return dn(e=>e.toLowerCase())}function cm(){return dn(e=>e.toUpperCase())}function lm(){return dn(e=>ul(e))}function dm(e,t,n){return new e({type:"array",element:t,...U(n)})}function pm(e,t,n){const o=U(n);return o.abort??(o.abort=!0),new e({type:"custom",check:"custom",fn:t,...o})}function mm(e,t,n){return new e({type:"custom",check:"custom",fn:t,...U(n)})}function hm(e){const t=fm(n=>(n.addIssue=o=>{if(typeof o=="string")n.issues.push(Rn(o,n.value,t._zod.def));else{const s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),n.issues.push(Rn(s))}},e(n.value,n)));return t}function fm(e,t){const n=new ze({check:"custom",...U(t)});return n._zod.check=e,n}class ir{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??wn,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var o;const s=t._zod.def,r={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const u={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,u);const c=t._zod.toJSONSchema?.();if(c)u.schema=c;else{const f={...n,schemaPath:[...n.schemaPath,t],path:n.path},_=t._zod.parent;if(_)u.ref=_,this.process(_,f),this.seen.get(_).isParent=!0;else{const g=u.schema;switch(s.type){case"string":{const h=g;h.type="string";const{minimum:b,maximum:v,format:w,patterns:x,contentEncoding:E}=t._zod.bag;if(typeof b=="number"&&(h.minLength=b),typeof v=="number"&&(h.maxLength=v),w&&(h.format=r[w]??w,h.format===""&&delete h.format),E&&(h.contentEncoding=E),x&&x.size>0){const M=[...x];M.length===1?h.pattern=M[0].source:M.length>1&&(u.schema.allOf=[...M.map(J=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:J.source}))])}break}case"number":{const h=g,{minimum:b,maximum:v,format:w,multipleOf:x,exclusiveMaximum:E,exclusiveMinimum:M}=t._zod.bag;typeof w=="string"&&w.includes("int")?h.type="integer":h.type="number",typeof M=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(h.minimum=M,h.exclusiveMinimum=!0):h.exclusiveMinimum=M),typeof b=="number"&&(h.minimum=b,typeof M=="number"&&this.target!=="draft-4"&&(M>=b?delete h.minimum:delete h.exclusiveMinimum)),typeof E=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(h.maximum=E,h.exclusiveMaximum=!0):h.exclusiveMaximum=E),typeof v=="number"&&(h.maximum=v,typeof E=="number"&&this.target!=="draft-4"&&(E<=v?delete h.maximum:delete h.exclusiveMaximum)),typeof x=="number"&&(h.multipleOf=x);break}case"boolean":{const h=g;h.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(g.type="string",g.nullable=!0,g.enum=[null]):g.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{g.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const h=g,{minimum:b,maximum:v}=t._zod.bag;typeof b=="number"&&(h.minItems=b),typeof v=="number"&&(h.maxItems=v),h.type="array",h.items=this.process(s.element,{...f,path:[...f.path,"items"]});break}case"object":{const h=g;h.type="object",h.properties={};const b=s.shape;for(const x in b)h.properties[x]=this.process(b[x],{...f,path:[...f.path,"properties",x]});const v=new Set(Object.keys(b)),w=new Set([...v].filter(x=>{const E=s.shape[x]._zod;return this.io==="input"?E.optin===void 0:E.optout===void 0}));w.size>0&&(h.required=Array.from(w)),s.catchall?._zod.def.type==="never"?h.additionalProperties=!1:s.catchall?s.catchall&&(h.additionalProperties=this.process(s.catchall,{...f,path:[...f.path,"additionalProperties"]})):this.io==="output"&&(h.additionalProperties=!1);break}case"union":{const h=g,b=s.discriminator!==void 0,v=s.options.map((w,x)=>this.process(w,{...f,path:[...f.path,b?"oneOf":"anyOf",x]}));b?h.oneOf=v:h.anyOf=v;break}case"intersection":{const h=g,b=this.process(s.left,{...f,path:[...f.path,"allOf",0]}),v=this.process(s.right,{...f,path:[...f.path,"allOf",1]}),w=E=>"allOf"in E&&Object.keys(E).length===1,x=[...w(b)?b.allOf:[b],...w(v)?v.allOf:[v]];h.allOf=x;break}case"tuple":{const h=g;h.type="array";const b=this.target==="draft-2020-12"?"prefixItems":"items",v=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",w=s.items.map((J,H)=>this.process(J,{...f,path:[...f.path,b,H]})),x=s.rest?this.process(s.rest,{...f,path:[...f.path,v,...this.target==="openapi-3.0"?[s.items.length]:[]]}):null;this.target==="draft-2020-12"?(h.prefixItems=w,x&&(h.items=x)):this.target==="openapi-3.0"?(h.items={anyOf:w},x&&h.items.anyOf.push(x),h.minItems=w.length,x||(h.maxItems=w.length)):(h.items=w,x&&(h.additionalItems=x));const{minimum:E,maximum:M}=t._zod.bag;typeof E=="number"&&(h.minItems=E),typeof M=="number"&&(h.maxItems=M);break}case"record":{const h=g;h.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(h.propertyNames=this.process(s.keyType,{...f,path:[...f.path,"propertyNames"]})),h.additionalProperties=this.process(s.valueType,{...f,path:[...f.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const h=g,b=Xr(s.entries);b.every(v=>typeof v=="number")&&(h.type="number"),b.every(v=>typeof v=="string")&&(h.type="string"),h.enum=b;break}case"literal":{const h=g,b=[];for(const v of s.values)if(v===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof v=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");b.push(Number(v))}else b.push(v);if(b.length!==0)if(b.length===1){const v=b[0];h.type=v===null?"null":typeof v,this.target==="draft-4"||this.target==="openapi-3.0"?h.enum=[v]:h.const=v}else b.every(v=>typeof v=="number")&&(h.type="number"),b.every(v=>typeof v=="string")&&(h.type="string"),b.every(v=>typeof v=="boolean")&&(h.type="string"),b.every(v=>v===null)&&(h.type="null"),h.enum=b;break}case"file":{const h=g,b={type:"string",format:"binary",contentEncoding:"binary"},{minimum:v,maximum:w,mime:x}=t._zod.bag;v!==void 0&&(b.minLength=v),w!==void 0&&(b.maxLength=w),x?x.length===1?(b.contentMediaType=x[0],Object.assign(h,b)):h.anyOf=x.map(E=>({...b,contentMediaType:E})):Object.assign(h,b);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const h=this.process(s.innerType,f);this.target==="openapi-3.0"?(u.ref=s.innerType,g.nullable=!0):g.anyOf=[h,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,f),u.ref=s.innerType;break}case"success":{const h=g;h.type="boolean";break}case"default":{this.process(s.innerType,f),u.ref=s.innerType,g.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,f),u.ref=s.innerType,this.io==="input"&&(g._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,f),u.ref=s.innerType;let h;try{h=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}g.default=h;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const h=g,b=t._zod.pattern;if(!b)throw new Error("Pattern not found in template literal");h.type="string",h.pattern=b.source;break}case"pipe":{const h=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(h,f),u.ref=h;break}case"readonly":{this.process(s.innerType,f),u.ref=s.innerType,g.readOnly=!0;break}case"promise":{this.process(s.innerType,f),u.ref=s.innerType;break}case"optional":{this.process(s.innerType,f),u.ref=s.innerType;break}case"lazy":{const h=t._zod.innerType;this.process(h,f),u.ref=h;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}}}}const l=this.metadataRegistry.get(t);return l&&Object.assign(u.schema,l),this.io==="input"&&Ae(t)&&(delete u.schema.examples,delete u.schema.default),this.io==="input"&&u.schema._prefault&&((o=u.schema).default??(o.default=u.schema._prefault)),delete u.schema._prefault,this.seen.get(t).schema}emit(t,n){const o={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},s=this.seen.get(t);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=m=>{const f=this.target==="draft-2020-12"?"$defs":"definitions";if(o.external){const b=o.external.registry.get(m[0])?.id,v=o.external.uri??(x=>x);if(b)return{ref:v(b)};const w=m[1].defId??m[1].schema.id??`schema${this.counter++}`;return m[1].defId=w,{defId:w,ref:`${v("__shared")}#/${f}/${w}`}}if(m[1]===s)return{ref:"#"};const g=`#/${f}/`,h=m[1].schema.id??`__schema${this.counter++}`;return{defId:h,ref:g+h}},a=m=>{if(m[1].schema.$ref)return;const f=m[1],{ref:_,defId:g}=r(m);f.def={...f.schema},g&&(f.defId=g);const h=f.schema;for(const b in h)delete h[b];h.$ref=_};if(o.cycles==="throw")for(const m of this.seen.entries()){const f=m[1];if(f.cycle)throw new Error(`Cycle detected: #/${f.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const m of this.seen.entries()){const f=m[1];if(t===m[0]){a(m);continue}if(o.external){const g=o.external.registry.get(m[0])?.id;if(t!==m[0]&&g){a(m);continue}}if(this.metadataRegistry.get(m[0])?.id){a(m);continue}if(f.cycle){a(m);continue}if(f.count>1&&o.reused==="ref"){a(m);continue}}const u=(m,f)=>{const _=this.seen.get(m),g=_.def??_.schema,h={...g};if(_.ref===null)return;const b=_.ref;if(_.ref=null,b){u(b,f);const v=this.seen.get(b).schema;v.$ref&&(f.target==="draft-7"||f.target==="draft-4"||f.target==="openapi-3.0")?(g.allOf=g.allOf??[],g.allOf.push(v)):(Object.assign(g,v),Object.assign(g,h))}_.isParent||this.override({zodSchema:m,jsonSchema:g,path:_.path??[]})};for(const m of[...this.seen.entries()].reverse())u(m[0],{target:this.target});const c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?c.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),o.external?.uri){const m=o.external.registry.get(t)?.id;if(!m)throw new Error("Schema is missing an `id` property");c.$id=o.external.uri(m)}Object.assign(c,s.def);const l=o.external?.defs??{};for(const m of this.seen.entries()){const f=m[1];f.def&&f.defId&&(l[f.defId]=f.def)}o.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?c.$defs=l:c.definitions=l);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}}function ym(e,t){if(e instanceof aa){const o=new ir(t),s={};for(const u of e._idmap.entries()){const[c,l]=u;o.process(l)}const r={},a={registry:e,uri:t?.uri,defs:s};for(const u of e._idmap.entries()){const[c,l]=u;r[c]=o.emit(l,{...t,external:a})}if(Object.keys(s).length>0){const u=o.target==="draft-2020-12"?"$defs":"definitions";r.__shared={[u]:s}}return{schemas:r}}const n=new ir(t);return n.process(e),n.emit(e,t)}function Ae(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return Ae(o.element,n);if(o.type==="set")return Ae(o.valueType,n);if(o.type==="lazy")return Ae(o.getter(),n);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return Ae(o.innerType,n);if(o.type==="intersection")return Ae(o.left,n)||Ae(o.right,n);if(o.type==="record"||o.type==="map")return Ae(o.keyType,n)||Ae(o.valueType,n);if(o.type==="pipe")return Ae(o.in,n)||Ae(o.out,n);if(o.type==="object"){for(const s in o.shape)if(Ae(o.shape[s],n))return!0;return!1}if(o.type==="union"){for(const s of o.options)if(Ae(s,n))return!0;return!1}if(o.type==="tuple"){for(const s of o.items)if(Ae(s,n))return!0;return!!(o.rest&&Ae(o.rest,n))}return!1}const gm=$("ZodISODateTime",(e,t)=>{Ad.init(e,t),be.init(e,t)});function pn(e){return Zp(gm,e)}const _m=$("ZodISODate",(e,t)=>{Ed.init(e,t),be.init(e,t)});function bm(e){return Fp(_m,e)}const vm=$("ZodISOTime",(e,t)=>{Pd.init(e,t),be.init(e,t)});function Sm(e){return Xp(vm,e)}const wm=$("ZodISODuration",(e,t)=>{qd.init(e,t),be.init(e,t)});function km(e){return Bp(wm,e)}const Rm=(e,t)=>{vo.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Sl(e,n)},flatten:{value:n=>vl(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Uo,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Uo,2)}},isEmpty:{get(){return e.issues.length===0}}})},De=$("ZodError",Rm,{Parent:Error}),xm=rs(De),$m=as(De),Cm=So(De),Im=wo(De),Tm=$l(De),Om=Cl(De),Am=Il(De),Em=Tl(De),Pm=Ol(De),qm=Al(De),Mm=El(De),zm=Pl(De),de=$("ZodType",(e,t)=>(ie.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(qt(t,{checks:[...t.checks??[],...n.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})),e.clone=(n,o)=>gt(e,n,o),e.brand=()=>e,e.register=((n,o)=>(n.add(e,o),e)),e.parse=(n,o)=>xm(e,n,o,{callee:e.parse}),e.safeParse=(n,o)=>Cm(e,n,o),e.parseAsync=async(n,o)=>$m(e,n,o,{callee:e.parseAsync}),e.safeParseAsync=async(n,o)=>Im(e,n,o),e.spa=e.safeParseAsync,e.encode=(n,o)=>Tm(e,n,o),e.decode=(n,o)=>Om(e,n,o),e.encodeAsync=async(n,o)=>Am(e,n,o),e.decodeAsync=async(n,o)=>Em(e,n,o),e.safeEncode=(n,o)=>Pm(e,n,o),e.safeDecode=(n,o)=>qm(e,n,o),e.safeEncodeAsync=async(n,o)=>Mm(e,n,o),e.safeDecodeAsync=async(n,o)=>zm(e,n,o),e.refine=(n,o)=>e.check(Ih(n,o)),e.superRefine=n=>e.check(Th(n)),e.overwrite=n=>e.check(dn(n)),e.optional=()=>lr(e),e.nullable=()=>d(e),e.nullish=()=>lr(d(e)),e.nonoptional=n=>Sh(e,n),e.array=()=>I(e),e.or=n=>k([e,n]),e.and=n=>dh(e,n),e.transform=n=>dr(e,fh(n)),e.default=n=>_h(e,n),e.prefault=n=>vh(e,n),e.catch=n=>kh(e,n),e.pipe=n=>dr(e,n),e.readonly=()=>$h(e),e.describe=n=>{const o=e.clone();return wn.add(o,{description:n}),o},Object.defineProperty(e,"description",{get(){return wn.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return wn.get(e);const o=e.clone();return wn.add(o,n[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),ca=$("_ZodString",(e,t)=>{is.init(e,t),de.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...o)=>e.check(em(...o)),e.includes=(...o)=>e.check(om(...o)),e.startsWith=(...o)=>e.check(sm(...o)),e.endsWith=(...o)=>e.check(rm(...o)),e.min=(...o)=>e.check(ro(...o)),e.max=(...o)=>e.check(ia(...o)),e.length=(...o)=>e.check(ua(...o)),e.nonempty=(...o)=>e.check(ro(1,...o)),e.lowercase=o=>e.check(tm(o)),e.uppercase=o=>e.check(nm(o)),e.trim=()=>e.check(im()),e.normalize=(...o)=>e.check(am(...o)),e.toLowerCase=()=>e.check(um()),e.toUpperCase=()=>e.check(cm()),e.slugify=()=>e.check(lm())}),jm=$("ZodString",(e,t)=>{is.init(e,t),ca.init(e,t),e.email=n=>e.check(Sp(Nm,n)),e.url=n=>e.check($p(Um,n)),e.jwt=n=>e.check(Dp(eh,n)),e.emoji=n=>e.check(Cp(Lm,n)),e.guid=n=>e.check(or(ur,n)),e.uuid=n=>e.check(wp(Kn,n)),e.uuidv4=n=>e.check(kp(Kn,n)),e.uuidv6=n=>e.check(Rp(Kn,n)),e.uuidv7=n=>e.check(xp(Kn,n)),e.nanoid=n=>e.check(Ip(Dm,n)),e.guid=n=>e.check(or(ur,n)),e.cuid=n=>e.check(Tp(Zm,n)),e.cuid2=n=>e.check(Op(Fm,n)),e.ulid=n=>e.check(Ap(Xm,n)),e.base64=n=>e.check(Np(Jm,n)),e.base64url=n=>e.check(Up(Ym,n)),e.xid=n=>e.check(Ep(Bm,n)),e.ksuid=n=>e.check(Pp(Vm,n)),e.ipv4=n=>e.check(qp(Km,n)),e.ipv6=n=>e.check(Mp(Gm,n)),e.cidrv4=n=>e.check(zp(Hm,n)),e.cidrv6=n=>e.check(jp(Wm,n)),e.e164=n=>e.check(Lp(Qm,n)),e.datetime=n=>e.check(pn(n)),e.date=n=>e.check(bm(n)),e.time=n=>e.check(Sm(n)),e.duration=n=>e.check(km(n))});function i(e){return vp(jm,e)}const be=$("ZodStringFormat",(e,t)=>{me.init(e,t),ca.init(e,t)}),Nm=$("ZodEmail",(e,t)=>{wd.init(e,t),be.init(e,t)}),ur=$("ZodGUID",(e,t)=>{vd.init(e,t),be.init(e,t)}),Kn=$("ZodUUID",(e,t)=>{Sd.init(e,t),be.init(e,t)}),Um=$("ZodURL",(e,t)=>{kd.init(e,t),be.init(e,t)}),Lm=$("ZodEmoji",(e,t)=>{Rd.init(e,t),be.init(e,t)}),Dm=$("ZodNanoID",(e,t)=>{xd.init(e,t),be.init(e,t)}),Zm=$("ZodCUID",(e,t)=>{$d.init(e,t),be.init(e,t)}),Fm=$("ZodCUID2",(e,t)=>{Cd.init(e,t),be.init(e,t)}),Xm=$("ZodULID",(e,t)=>{Id.init(e,t),be.init(e,t)}),Bm=$("ZodXID",(e,t)=>{Td.init(e,t),be.init(e,t)}),Vm=$("ZodKSUID",(e,t)=>{Od.init(e,t),be.init(e,t)}),Km=$("ZodIPv4",(e,t)=>{Md.init(e,t),be.init(e,t)}),Gm=$("ZodIPv6",(e,t)=>{zd.init(e,t),be.init(e,t)}),Hm=$("ZodCIDRv4",(e,t)=>{jd.init(e,t),be.init(e,t)}),Wm=$("ZodCIDRv6",(e,t)=>{Nd.init(e,t),be.init(e,t)}),Jm=$("ZodBase64",(e,t)=>{Ud.init(e,t),be.init(e,t)}),Ym=$("ZodBase64URL",(e,t)=>{Dd.init(e,t),be.init(e,t)}),Qm=$("ZodE164",(e,t)=>{Zd.init(e,t),be.init(e,t)}),eh=$("ZodJWT",(e,t)=>{Xd.init(e,t),be.init(e,t)}),la=$("ZodNumber",(e,t)=>{oa.init(e,t),de.init(e,t),e.gt=(o,s)=>e.check(rr(o,s)),e.gte=(o,s)=>e.check(Qn(o,s)),e.min=(o,s)=>e.check(Qn(o,s)),e.lt=(o,s)=>e.check(sr(o,s)),e.lte=(o,s)=>e.check(Yn(o,s)),e.max=(o,s)=>e.check(Yn(o,s)),e.int=o=>e.check(ce(o)),e.safe=o=>e.check(ce(o)),e.positive=o=>e.check(rr(0,o)),e.nonnegative=o=>e.check(Qn(0,o)),e.negative=o=>e.check(sr(0,o)),e.nonpositive=o=>e.check(Yn(0,o)),e.multipleOf=(o,s)=>e.check(ar(o,s)),e.step=(o,s)=>e.check(ar(o,s)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function y(e){return Vp(la,e)}const th=$("ZodNumberFormat",(e,t)=>{Bd.init(e,t),la.init(e,t)});function ce(e){return Kp(th,e)}const da=$("ZodBoolean",(e,t)=>{Vd.init(e,t),de.init(e,t)});function B(e){return Gp(da,e)}const nh=$("ZodAny",(e,t)=>{Kd.init(e,t),de.init(e,t)});function L(){return Wp(nh)}const oh=$("ZodUnknown",(e,t)=>{Gd.init(e,t),de.init(e,t)});function cr(){return Jp(oh)}const sh=$("ZodNever",(e,t)=>{Hd.init(e,t),de.init(e,t)});function rh(e){return Yp(sh,e)}const ah=$("ZodDate",(e,t)=>{Wd.init(e,t),de.init(e,t),e.min=(o,s)=>e.check(Qn(o,s)),e.max=(o,s)=>e.check(Yn(o,s));const n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function pa(e){return Qp(ah,e)}const ih=$("ZodArray",(e,t)=>{Jd.init(e,t),de.init(e,t),e.element=t.element,e.min=(n,o)=>e.check(ro(n,o)),e.nonempty=n=>e.check(ro(1,n)),e.max=(n,o)=>e.check(ia(n,o)),e.length=(n,o)=>e.check(ua(n,o)),e.unwrap=()=>e.element});function I(e,t){return dm(ih,e,t)}const uh=$("ZodObject",(e,t)=>{Qd.init(e,t),de.init(e,t),te(e,"shape",()=>t.shape),e.keyof=()=>z(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:cr()}),e.loose=()=>e.clone({...e._zod.def,catchall:cr()}),e.strict=()=>e.clone({...e._zod.def,catchall:rh()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>fl(e,n),e.safeExtend=n=>yl(e,n),e.merge=n=>gl(e,n),e.pick=n=>ml(e,n),e.omit=n=>hl(e,n),e.partial=(...n)=>_l(ma,e,n[0]),e.required=(...n)=>bl(ha,e,n[0])});function p(e,t){const n={type:"object",shape:e??{},...U(t)};return new uh(n)}const ch=$("ZodUnion",(e,t)=>{ep.init(e,t),de.init(e,t),e.options=t.options});function k(e,t){return new ch({type:"union",options:e,...U(t)})}const lh=$("ZodIntersection",(e,t)=>{tp.init(e,t),de.init(e,t)});function dh(e,t){return new lh({type:"intersection",left:e,right:t})}const ph=$("ZodRecord",(e,t)=>{np.init(e,t),de.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function oe(e,t,n){return new ph({type:"record",keyType:e,valueType:t,...U(n)})}const Do=$("ZodEnum",(e,t)=>{op.init(e,t),de.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(o,s)=>{const r={};for(const a of o)if(n.has(a))r[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Do({...t,checks:[],...U(s),entries:r})},e.exclude=(o,s)=>{const r={...t.entries};for(const a of o)if(n.has(a))delete r[a];else throw new Error(`Key ${a} not found in enum`);return new Do({...t,checks:[],...U(s),entries:r})}});function z(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Do({type:"enum",entries:n,...U(t)})}const mh=$("ZodLiteral",(e,t)=>{sp.init(e,t),de.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function C(e,t){return new mh({type:"literal",values:Array.isArray(e)?e:[e],...U(t)})}const hh=$("ZodTransform",(e,t)=>{rp.init(e,t),de.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new Fr(e.constructor.name);n.addIssue=r=>{if(typeof r=="string")n.issues.push(Rn(r,n.value,t));else{const a=r;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=e),n.issues.push(Rn(a))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(r=>(n.value=r,n)):(n.value=s,n)}});function fh(e){return new hh({type:"transform",transform:e})}const ma=$("ZodOptional",(e,t)=>{ap.init(e,t),de.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lr(e){return new ma({type:"optional",innerType:e})}const yh=$("ZodNullable",(e,t)=>{ip.init(e,t),de.init(e,t),e.unwrap=()=>e._zod.def.innerType});function d(e){return new yh({type:"nullable",innerType:e})}const gh=$("ZodDefault",(e,t)=>{up.init(e,t),de.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function _h(e,t){return new gh({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Vr(t)}})}const bh=$("ZodPrefault",(e,t)=>{cp.init(e,t),de.init(e,t),e.unwrap=()=>e._zod.def.innerType});function vh(e,t){return new bh({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Vr(t)}})}const ha=$("ZodNonOptional",(e,t)=>{lp.init(e,t),de.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Sh(e,t){return new ha({type:"nonoptional",innerType:e,...U(t)})}const wh=$("ZodCatch",(e,t)=>{dp.init(e,t),de.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function kh(e,t){return new wh({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Rh=$("ZodPipe",(e,t)=>{pp.init(e,t),de.init(e,t),e.in=t.in,e.out=t.out});function dr(e,t){return new Rh({type:"pipe",in:e,out:t})}const xh=$("ZodReadonly",(e,t)=>{mp.init(e,t),de.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $h(e){return new xh({type:"readonly",innerType:e})}const Ch=$("ZodLazy",(e,t)=>{hp.init(e,t),de.init(e,t),e.unwrap=()=>e._zod.def.getter()});function R(e){return new Ch({type:"lazy",getter:e})}const fa=$("ZodCustom",(e,t)=>{fp.init(e,t),de.init(e,t)});function ee(e,t){return pm(fa,e??(()=>!0),t)}function Ih(e,t={}){return mm(fa,e,t)}function Th(e){return hm(e)}function Oh(e){return Hp(da,e)}rt(_p());function us(e){return btoa(String.fromCodePoint(...e))}function Ah(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}function ya(e){return new TextEncoder().encode(e)}function Eh(e){return us(ya(e))}ee(e=>e instanceof Uint8Array).or(i().transform(ya));ee(e=>e instanceof Uint8Array).or(i().transform(Ah));function rn(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ph(e){return(t,n,o)=>{let s="";const r=o?.explode?_a(t,n):[[t,n]];if(r.every(([l,m])=>m==null))return;const a=l=>o?.charEncoding==="percent"?encodeURIComponent(l):l,u=l=>a(ba(l)),c=a(e);return r.forEach(([l,m])=>{let f="",_=null;m!=null&&(Array.isArray(m)?_=Sa(m,g=>`${u(g)}`)?.join(c):rn(m)?_=wa(Object.entries(m),([g,h])=>`${a(g)}${c}${u(h)}`)?.join(c):_=`${u(m)}`,_!=null&&(f=`${a(l)}=${_}`,!(!f||f==="=")&&(s+=`&${f}`)))}),s.slice(1)}}const ga=Ph(",");function it(e,t,n){if(typeof t>"u")return;const o=r=>n?.charEncoding==="percent"?encodeURIComponent(r):r,s=o(JSON.stringify(t,va));return n?.explode?s:`${o(e)}=${s}`}const It=(e,t,n)=>{let o="";const s=n?.explode?_a(e,t):[[e,t]];if(s.every(([u,c])=>c==null))return;const r=u=>n?.charEncoding==="percent"?encodeURIComponent(u):u,a=u=>r(ba(u));return s.forEach(([u,c])=>{let l="";c!=null&&(Array.isArray(c)?l=Sa(c,m=>`${a(m)}`)?.join(","):rn(c)?l=wa(Object.entries(c),([f,_])=>`,${r(f)},${a(_)}`)?.join("").slice(1):l=`${n?.explode&&rn(t)?`${u}=`:""}${a(c)}`,o+=l?`,${l}`:"")}),o.slice(1)};function _a(e,t){return Array.isArray(t)?t.map(n=>[e,n]):rn(t)?Object.entries(t??{}).map(([o,s])=>[o,s]):[[e,t]]}function ba(e){return e==null?"":e instanceof Date?e.toISOString():e instanceof Uint8Array?us(e):typeof e=="object"?JSON.stringify(e,va):`${e}`}function va(e,t){return t instanceof Uint8Array?us(t):t}function Sa(e,t){const n=e.reduce((o,s)=>{if(s==null)return o;const r=t(s);return r==null||o.push(r),o},[]);return n.length?n:null}function wa(e,t){const n=[];for(const[o,s]of e){if(s==null)continue;const r=t([o,s]);r!=null&&n.push(r)}return n.length?n:null}function qh(...e){return e.filter(Boolean).join("&")}function Mh(e){return function(n,o){const s={...o,explode:o?.explode??!0,charEncoding:o?.charEncoding??"percent"},r=new Set(o?.allowEmptyValue??[]),a=Object.entries(n).map(([u,c])=>r.has(u)&&(c==null||c===""||Array.isArray(c)&&c.length===0)?`${encodeURIComponent(u)}=`:e(u,c,s));return qh(...a)}}const Un=Mh(ga);function zh(e,t,n,o,s){for(t=Array.isArray(t)?t:t.split("."),o=0;o<t.length;o++){const r=t[o];e=r!=null&&e?e[r]:s}return e===s?n:e}const jh=p({OPENROUTER_API_KEY:i().optional(),OPENROUTER_HTTP_REFERER:i().optional(),OPENROUTER_X_TITLE:i().optional(),OPENROUTER_DEBUG:Oh().optional()});function Nh(){return"Deno"in globalThis}let Gn;function cs(){if(Gn)return Gn;let e={};return Nh()?e=globalThis.Deno?.env?.toObject?.()??{}:e=zh(globalThis,"process.env")??{},Gn=jh.parse(e),Gn}function Uh(e){const t={...e},n=cs();return typeof n.OPENROUTER_HTTP_REFERER<"u"&&(t.httpReferer??(t.httpReferer=n.OPENROUTER_HTTP_REFERER)),typeof n.OPENROUTER_X_TITLE<"u"&&(t.xTitle??(t.xTitle=n.OPENROUTER_X_TITLE)),t}const Lh={initialInterval:500,maxInterval:6e4,exponent:1.5,maxElapsedTime:36e5};class Ro extends Error{constructor(t,n){let o=t;n?.cause&&(o+=`: ${n.cause}`),super(o,n),this.name="PermanentError",typeof this.cause>"u"&&(this.cause=n?.cause),Object.setPrototypeOf(this,Ro.prototype)}}class an extends Error{constructor(t,n){super(t),this.response=n,this.name="TemporaryError",Object.setPrototypeOf(this,an.prototype)}}async function Dh(e,t){switch(t.config.strategy){case"backoff":return Bh(Zh(e,{statusCodes:t.statusCodes,retryConnectionErrors:!!t.config.retryConnectionErrors}),t.config.backoff??Lh);default:return await e()}}function Zh(e,t){return async()=>{try{const n=await e();if(Xh(n,t.statusCodes))throw new an("Response failed with retryable status code",n);return n}catch(n){throw n instanceof an||t.retryConnectionErrors&&(Dr(n)||Lr(n))?n:new Ro("Permanent error",{cause:n})}}}const Fh=new RegExp("^[0-9]xx$","i");function Xh(e,t){const n=`${e.status}`;return t.some(o=>{if(!Fh.test(o))return o===n;const s=o.charAt(0);if(!s)throw new Error("Invalid status code range");const r=n.charAt(0);if(!r)throw new Error(`Invalid response status code: ${n}`);return r===s})}async function Bh(e,t){const{maxElapsedTime:n,initialInterval:o,exponent:s,maxInterval:r}=t,a=Date.now();let u=0;for(;;)try{return await e()}catch(c){if(c instanceof Ro)throw c.cause;if(Date.now()-a>n){if(c instanceof an)return c.response;throw c}let m=0;c instanceof an&&(m=Vh(c.response)),m<=0&&(m=o*Math.pow(u,s)+Math.random()*1e3);const f=Math.min(m,r);await Kh(f),u++}}function Vh(e){const t=e.headers.get("retry-after")||"";if(!t)return 0;const n=Number(t);if(Number.isInteger(n))return n*1e3;const o=Date.parse(t);if(Number.isInteger(o)){const s=o-Date.now();return s>0?Math.ceil(s):0}return 0}async function Kh(e){return new Promise(t=>setTimeout(t,e))}var vn=function(e,t,n,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Ue=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},eo,Ke,et;const Hn=typeof globalThis>"u"?null:globalThis,Gh=typeof Hn=="object"&&Hn!=null&&"importScripts"in Hn&&typeof Hn.importScripts=="function",Hh=Gh||typeof navigator<"u"&&"serviceWorker"in navigator||typeof window=="object"&&typeof window.document<"u";class Pe{constructor(t={}){eo.set(this,void 0),Ke.set(this,void 0),et.set(this,void 0);const n=t;typeof n=="object"&&n!=null&&"hooks"in n&&n.hooks instanceof Zs?vn(this,Ke,n.hooks,"f"):vn(this,Ke,new Zs,"f");const o=new Qo;t.httpClient=t.httpClient||o,t=Ue(this,Ke,"f").sdkInit(t);const s=Ur(t);s&&(s.pathname=s.pathname.replace(/\/+$/,"")+"/"),this._baseURL=s,vn(this,eo,t.httpClient||o,"f"),this._options={...Uh(t),hooks:Ue(this,Ke,"f")},vn(this,et,this._options.debugLogger,"f"),!Ue(this,et,"f")&&cs().OPENROUTER_DEBUG&&vn(this,et,console,"f")}_createRequest(t,n,o){const{method:s,path:r,query:a,headers:u,security:c}=n,l=n.baseURL??this._baseURL;if(!l)return dt(new ol("No base URL provided for operation"));const m=new URL(l),f=new URL(r,m);r&&(m.pathname+=m.pathname.endsWith("/")?"":"/",m.pathname+=f.pathname.replace(/^\/+/,""));let _=a||"";const g=[];for(const[H,re]of Object.entries(c?.queryParams||{})){const Me=ga(H,re,{charEncoding:"percent"});typeof Me<"u"&&g.push(Me)}if(g.length&&(_+=`&${g.join("&")}`),_){const H=_.startsWith("&")?_.slice(1):_;m.search=`?${H}`}const h=new Headers(u),b=c?.basic.username,v=c?.basic.password;if(b!=null||v!=null){const H=Eh([b||"",v||""].join(":"));h.set("Authorization",`Basic ${H}`)}const w=new Headers(c?.headers||{});for(const[H,re]of w)h.set(H,re);let x=h.get("cookie")||"";for(const[H,re]of Object.entries(c?.cookies||{}))x+=`; ${H}=${re}`;x=x.startsWith("; ")?x.slice(2):x,h.set("cookie",x);const E=new Headers(o?.headers??o?.fetchOptions?.headers);for(const[H,re]of E)h.set(H,re);Hh||h.set(n.uaHeader??"user-agent",n.userAgent??Yc.userAgent);const M={...o?.fetchOptions,...o};if(!M?.signal&&n.timeoutMs&&n.timeoutMs>0){const H=AbortSignal.timeout(n.timeoutMs);M.signal=H}n.body instanceof ReadableStream&&Object.assign(M,{duplex:"half"});let J;try{J=Ue(this,Ke,"f").beforeCreateRequest(t,{url:m,options:{...M,body:n.body??null,headers:h,method:s}})}catch(H){return dt(new Fs("Create request hook failed to execute",{cause:H}))}return no(new Request(J.url,J.options))}async _do(t,n){const{context:o,errorCodes:s}=n;return Dh(async()=>{const r=await Ue(this,Ke,"f").beforeRequest(o,t.clone());await Wh(Ue(this,et,"f"),r).catch(u=>Ue(this,et,"f")?.log("Failed to log request:",u));let a=await Ue(this,eo,"f").request(r);try{if(es(a,s)){const u=await Ue(this,Ke,"f").afterError(o,a,null);if(u.error)throw u.error;a=u.response||a}else a=await Ue(this,Ke,"f").afterSuccess(o,a)}finally{await Jh(Ue(this,et,"f"),a,r).catch(u=>Ue(this,et,"f")?.log("Failed to log response:",u))}return a},{config:n.retryConfig,statusCodes:n.retryCodes}).then(r=>no(r),r=>{switch(!0){case nl(r):return dt(new sl("Request aborted by client",{cause:r}));case Dr(r):return dt(new rl("Request timed out",{cause:r}));case Lr(r):return dt(new al("Unable to make request",{cause:r}));default:return dt(new Fs("Unexpected HTTP client error",{cause:r}))}})}}eo=new WeakMap,Ke=new WeakMap,et=new WeakMap;const ka=/(application|text)\/.*?\+*json.*/,pr=/(application|text)\/(.*?\+*\bjsonl\b.*|.*?\+*\bx-ndjson\b.*)/;async function Wh(e,t){if(!e)return;const n=t.headers.get("content-type"),o=n?.split(";")[0]||"";e.group(`> Request: ${t.method} ${t.url}`),e.group("Headers:");for(const[s,r]of t.headers.entries())e.log(`${s}: ${r}`);switch(e.groupEnd(),e.group("Body:"),!0){case ka.test(o):e.log(await t.clone().json());break;case o.startsWith("text/"):e.log(await t.clone().text());break;case o==="multipart/form-data":{const s=await t.clone().formData();for(const[r,a]of s){const u=a instanceof Blob?"<Blob>":a;e.log(`${r}: ${u}`)}break}default:e.log(`<${n}>`);break}e.groupEnd(),e.groupEnd()}async function Jh(e,t,n){if(!e)return;const o=t.headers.get("content-type"),s=o?.split(";")[0]||"";e.group(`< Response: ${n.method} ${n.url}`),e.log("Status Code:",t.status,t.statusText),e.group("Headers:");for(const[r,a]of t.headers.entries())e.log(`${r}: ${a}`);switch(e.groupEnd(),e.group("Body:"),!0){case(Vt(t,"application/json")||ka.test(s)&&!pr.test(s)):e.log(await t.clone().json());break;case(Vt(t,"application/jsonl")||pr.test(s)):e.log(await t.clone().text());break;case Vt(t,"text/event-stream"):e.log(`<${o}>`);break;case Vt(t,"text/*"):e.log(await t.clone().text());break;case Vt(t,"multipart/form-data"):{const r=await t.clone().formData();for(const[a,u]of r){const c=u instanceof Blob?"<Blob>":u;e.log(`${a}: ${c}`)}break}default:e.log(`<${o}>`);break}e.groupEnd(),e.groupEnd()}class Ce extends Error{constructor(t,n){super(t),this.statusCode=n.response.status,this.body=n.body,this.headers=n.response.headers,this.contentType=n.response.headers.get("content-type")||"",this.rawResponse=n.response,this.name="OpenRouterError"}}class mr extends Ce{constructor(t,n){t&&(t+=": "),t+=`Status ${n.response.status}`;const o=n.response.headers.get("content-type")||'""';o!=="application/json"&&(t+=` Content-Type ${o.includes(" ")?`"${o}"`:o}`);const s=n.body||'""';t+=s.length>100?`
`:". ";let r=s;if(s.length>1e4){const a=s.substring(0,1e4),u=s.length-1e4;r=`${a}...and ${u} more chars`}t+=`Body: ${r}`,t=t.trim(),super(t,n),this.name="OpenRouterDefaultError"}}class Yh extends Error{static[Symbol.hasInstance](t){return!(!(t instanceof Error)||!("rawValue"in t)||!("rawMessage"in t)||!("pretty"in t)||typeof t.pretty!="function")}constructor(t,n,o){super(`${t}: ${n}`),this.name="SDKValidationError",this.cause=n,this.rawValue=o,this.rawMessage=t}pretty(){return this.cause instanceof vo?`${this.rawMessage}
${Ra(this.cause)}`:this.toString()}}function Ra(e){return kl(e)}class Qh extends Ce{constructor(t,n){super(t,n),this.name="ResponseValidationError",this.cause=n.cause,this.rawValue=n.rawValue,this.rawMessage=n.rawMessage}pretty(){return this.cause instanceof vo?`${this.rawMessage}
${Ra(this.cause)}`:this.toString()}}const ef={jsonl:"application/jsonl",json:"application/json",text:"text/plain",bytes:"application/octet-stream",stream:"application/octet-stream",sse:"text/event-stream",nil:"*",fail:"*"};function A(e,t,n){return{...n,err:!0,enc:"json",codes:e,schema:t}}function he(e,t,n){return{...n,enc:"json",codes:e,schema:t}}function xa(e,t,n){return{...n,enc:"sse",codes:e,schema:t}}function V(e){return{enc:"fail",codes:e}}function fe(...e){return async function(n,o,s){let r,a;for(const f of e){const{codes:_}=f,g="ctype"in f?f.ctype:ef[f.enc];if(g&&tl(n,_,g)){a=f;break}else if(!g&&es(n,_)){a=f;break}}if(!a)return[{ok:!1,error:new mr("Unexpected Status or Content-Type",{response:n,request:o,body:await n.text().catch(()=>"")})},r];const u=a.enc;let c="";switch(u){case"json":c=await n.text(),r=JSON.parse(c);break;case"jsonl":r=n.body;break;case"bytes":r=new Uint8Array(await n.arrayBuffer());break;case"stream":r=n.body;break;case"text":c=await n.text(),r=c;break;case"sse":r=n.body;break;case"nil":c=await n.text(),r=void 0;break;case"fail":c=await n.text(),r=c;break;default:throw new Error(`Unsupported response type: ${u}`)}if(a.enc==="fail")return[{ok:!1,error:new mr("API error occurred",{request:o,response:n,body:c})},r];const l=a.key||s?.resultKey;let m;if("err"in a?m={...s?.extraFields,...a.hdrs?{Headers:Po(n.headers)}:null,...rn(r)?r:null,request$:o,response$:n,body$:c}:l?m={...s?.extraFields,...a.hdrs?{Headers:Po(n.headers)}:null,[l]:r}:a.hdrs?m={...s?.extraFields,...a.hdrs?{Headers:Po(n.headers)}:null,...rn(r)?r:null}:m=r,"err"in a){const f=hr(m,_=>a.schema.parse(_),"Response validation failed",{request:o,response:n,body:c});return[f.ok?{ok:!1,error:f.value}:f,r]}else return[hr(m,f=>a.schema.parse(f),"Response validation failed",{request:o,response:n,body:c}),r]}}const tf=/, */;function Po(e){const t={};for(const[n,o]of e.entries())t[n]=o.split(tf);return t}function hr(e,t,n,o){try{return no(t(e))}catch(s){return dt(new Qh(n,{cause:s,rawValue:e,rawMessage:n,...o}))}}function S(e,t){let n={};if(!Object.keys(t).length)return n=e,n;for(const[o,s]of Object.entries(e)){const r=t[o];r!==null&&(n[r??o]=s)}return n}function ye(e){const t={};for(const[n,o]of Object.entries(e))typeof o<"u"&&(t[n]=o);return t}function Ie(e,t,n){try{return no(t(e))}catch(o){return dt(new Yh(n,o,e))}}var ao;(function(e){e.Incomplete="incomplete",e.UnrecognisedSecurityType="unrecognized_security_type"})(ao||(ao={}));class io extends Error{constructor(t,n){super(n),this.code=t,this.name="SecurityError"}static incomplete(){return new io(ao.Incomplete,"Security requirements not met in order to perform the operation")}static unrecognizedType(t){return new io(ao.UnrecognisedSecurityType,`Unrecognised security type: ${t}`)}}function xo(...e){const t={basic:{},headers:{},queryParams:{},cookies:{},oauth2:{type:"none"}},n=e.find(o=>o.every(s=>{if(s.value==null)return!1;if(s.type==="http:basic")return s.value.username!=null||s.value.password!=null;if(s.type==="http:custom")return null;if(s.type==="oauth2:password")return typeof s.value=="string"&&!!s.value;if(s.type==="oauth2:client_credentials")return typeof s.value=="string"?!!s.value:s.value.clientID!=null||s.value.clientSecret!=null;if(typeof s.value=="string")return!!s.value;throw new Error(`Unrecognized security type: ${s.type} (value type: ${typeof s.value})`)}));return n==null?null:(n.forEach(o=>{if(o.value==null)return;const{type:s}=o;switch(s){case"apiKey:header":t.headers[o.fieldName]=o.value;break;case"apiKey:query":t.queryParams[o.fieldName]=o.value;break;case"apiKey:cookie":t.cookies[o.fieldName]=o.value;break;case"http:basic":nf(t,o);break;case"http:custom":break;case"http:bearer":Wn(t,o);break;case"oauth2":Wn(t,o);break;case"oauth2:password":Wn(t,o);break;case"oauth2:client_credentials":break;case"openIdConnect":Wn(t,o);break;default:throw io.unrecognizedType(s)}}),t)}function nf(e,t){t.value!=null&&(e.basic=t.value)}function Wn(e,t){if(typeof t.value!="string"||!t.value)return;let n=t.value;n.slice(0,7).toLowerCase()!=="bearer "&&(n=`Bearer ${n}`),t.fieldName!==void 0&&(e.headers[t.fieldName]=n)}function we(e){return xo([{fieldName:"Authorization",type:"http:bearer",value:e?.apiKey??cs().OPENROUTER_API_KEY}])}async function ke(e){if(e!=null)return typeof e=="function"?e():e}const of=p({date:i(),model:i(),model_permaslug:i(),endpoint_id:i(),provider_name:i(),usage:y(),byok_usage_inference:y(),requests:y(),prompt_tokens:y(),completion_tokens:y(),reasoning_tokens:y()}).transform(e=>S(e,{model_permaslug:"modelPermaslug",endpoint_id:"endpointId",provider_name:"providerName",byok_usage_inference:"byokUsageInference",prompt_tokens:"promptTokens",completion_tokens:"completionTokens",reasoning_tokens:"reasoningTokens"})),sf=p({data:i(),format:i()}),rf=p({data:i(),format:i()}),af=p({type:C("input_audio"),input_audio:R(()=>sf)}).transform(e=>S(e,{input_audio:"inputAudio"})),uf=p({type:C("input_audio"),inputAudio:R(()=>rf)}).transform(e=>S(e,{inputAudio:"input_audio"}));function se(e){const t=Object.values(e);return k([...t.map(n=>C(n)),i().transform(n=>n)])}function cf(e){const t=Object.values(e).filter(n=>typeof n=="number");return k([...t.map(n=>C(n)),ce().transform(n=>n)])}function ae(e){return i()}function lf(e){return ce()}const df={Auto:"auto",Low:"low",High:"high"},pf=se(df),mf=ae(),hf=p({url:i(),detail:pf.optional()}),ff=p({url:i(),detail:mf.optional()}),yf=p({type:C("image_url"),image_url:R(()=>hf)}).transform(e=>S(e,{image_url:"imageUrl"})),gf=p({type:C("image_url"),imageUrl:R(()=>ff)}).transform(e=>S(e,{imageUrl:"image_url"})),_f={Fivem:"5m",Oneh:"1h"},bf=se(_f),vf=ae(),Sf=p({type:C("ephemeral"),ttl:bf.optional()}),wf=p({type:C("ephemeral"),ttl:vf.optional()}),kf=p({type:C("text"),text:i(),cache_control:Sf.optional()}).transform(e=>S(e,{cache_control:"cacheControl"})),Ln=p({type:C("text"),text:i(),cacheControl:wf.optional()}).transform(e=>S(e,{cacheControl:"cache_control"})),Rf=p({url:i()}),xf=p({url:i()}),$f=p({type:C("video_url"),video_url:R(()=>Rf)}).transform(e=>S(e,{video_url:"videoUrl"})),Cf=p({type:C("video_url"),videoUrl:R(()=>xf)}).transform(e=>S(e,{videoUrl:"video_url"})),If=p({url:i()}),Tf=p({url:i()}),Of=p({type:C("input_video"),video_url:R(()=>If)}).transform(e=>S(e,{video_url:"videoUrl"})),Af=p({type:C("input_video"),videoUrl:R(()=>Tf)}).transform(e=>S(e,{videoUrl:"video_url"})),fr=k([R(()=>Of),R(()=>$f)]),yr=k([R(()=>Af),R(()=>Cf)]),$a=k([kf,yf,af,fr.and(p({type:C("input_video")})),R(()=>fr).and(p({type:C("video_url")}))]),mn=k([Ln,gf,uf,yr.and(p({type:C("input_video")})),R(()=>yr).and(p({type:C("video_url")}))]),Ef=p({name:i(),arguments:i()}),Pf=p({name:i(),arguments:i()}),qf=p({id:i(),type:C("function"),function:R(()=>Ef)}),Mf=p({id:i(),type:C("function"),function:R(()=>Pf)});k([i(),I($a)]);k([i(),I(mn)]);const zf=p({role:C("assistant"),content:d(k([i(),I($a)])).optional(),name:i().optional(),tool_calls:I(qf).optional(),refusal:d(i()).optional(),reasoning:d(i()).optional()}).transform(e=>S(e,{tool_calls:"toolCalls"})),jf=p({role:C("assistant"),content:d(k([i(),I(mn)])).optional(),name:i().optional(),toolCalls:I(Mf).optional(),refusal:d(i()).optional(),reasoning:d(i()).optional()}).transform(e=>S(e,{toolCalls:"tool_calls"})),Nf=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Uf=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Lf={ToolCalls:"tool_calls",Stop:"stop",Length:"length",ContentFilter:"content_filter",Error:"error"},Ca=se(Lf);k([i(),y()]);const Df=p({code:d(k([i(),y()])),message:i(),param:d(i()).optional(),type:d(i()).optional()}),Zf=p({includeUsage:B().optional()}).transform(e=>S(e,{includeUsage:"include_usage"}));k([i(),I(Ln)]);const Ff=p({role:C("system"),content:k([i(),I(Ln)]),name:i().optional()});k([i(),I(mn)]);const Xf=p({role:C("tool"),content:k([i(),I(mn)]),toolCallId:i()}).transform(e=>S(e,{toolCallId:"tool_call_id"}));k([i(),I(mn)]);const Bf=p({role:C("user"),content:k([i(),I(mn)]),name:i().optional()});k([i(),I(Ln)]);const Vf=p({role:C("developer"),content:k([i(),I(Ln)]),name:i().optional()}),Kf=k([Ff,Bf,R(()=>Vf),jf,Xf]),Gf={Auto:"auto",Concise:"concise",Detailed:"detailed"},Hf=se(Gf),Ia=ae(),Wf=p({name:i(),description:i().optional(),schema:oe(i(),L()).optional(),strict:d(B()).optional()}),$o=p({type:C("json_schema"),jsonSchema:Wf}).transform(e=>S(e,{jsonSchema:"json_schema"})),Co=p({type:C("grammar"),grammar:i()}),Jf=p({name:i(),description:i().optional(),parameters:oe(i(),L()).optional(),strict:d(B()).optional()}),Yf=p({type:C("function"),function:R(()=>Jf)}),Qf=ae(),ey=p({effort:d(Qf).optional(),summary:d(Ia).optional()}),Ta=p({type:C("python")}),Oa=p({type:C("json_object")}),Aa=p({type:C("text")});k([R(()=>Aa),R(()=>Oa),$o,Co,R(()=>Ta)]);k([i(),I(i())]);const ty=p({echoUpstreamBody:B().optional()}).transform(e=>S(e,{echoUpstreamBody:"echo_upstream_body"})),ny=p({messages:I(Kf),model:i().optional(),models:I(i()).optional(),frequencyPenalty:d(y()).optional(),logitBias:d(oe(i(),y())).optional(),logprobs:d(B()).optional(),topLogprobs:d(y()).optional(),maxCompletionTokens:d(y()).optional(),maxTokens:d(y()).optional(),metadata:oe(i(),i()).optional(),presencePenalty:d(y()).optional(),reasoning:R(()=>ey).optional(),responseFormat:k([R(()=>Aa),R(()=>Oa),$o,Co,R(()=>Ta)]).optional(),seed:d(ce()).optional(),stop:d(k([i(),I(i())])).optional(),stream:B().default(!1),streamOptions:d(Zf).optional(),temperature:d(y()).optional(),toolChoice:L().optional(),tools:I(Yf).optional(),topP:d(y()).optional(),user:i().optional(),debug:R(()=>ty).optional()}).transform(e=>S(e,{frequencyPenalty:"frequency_penalty",logitBias:"logit_bias",topLogprobs:"top_logprobs",maxCompletionTokens:"max_completion_tokens",maxTokens:"max_tokens",presencePenalty:"presence_penalty",responseFormat:"response_format",streamOptions:"stream_options",toolChoice:"tool_choice",topP:"top_p"})),oy=p({reasoning_tokens:d(y()).optional(),audio_tokens:d(y()).optional(),accepted_prediction_tokens:d(y()).optional(),rejected_prediction_tokens:d(y()).optional()}).transform(e=>S(e,{reasoning_tokens:"reasoningTokens",audio_tokens:"audioTokens",accepted_prediction_tokens:"acceptedPredictionTokens",rejected_prediction_tokens:"rejectedPredictionTokens"})),sy=p({cached_tokens:y().optional(),audio_tokens:y().optional(),video_tokens:y().optional()}).transform(e=>S(e,{cached_tokens:"cachedTokens",audio_tokens:"audioTokens",video_tokens:"videoTokens"})),Ea=p({completion_tokens:y(),prompt_tokens:y(),total_tokens:y(),completion_tokens_details:d(R(()=>oy)).optional(),prompt_tokens_details:d(R(()=>sy)).optional()}).transform(e=>S(e,{completion_tokens:"completionTokens",prompt_tokens:"promptTokens",total_tokens:"totalTokens",completion_tokens_details:"completionTokensDetails",prompt_tokens_details:"promptTokensDetails"})),ry=p({token:i(),logprob:y(),bytes:d(I(y()))}),gr=p({token:i(),logprob:y(),bytes:d(I(y())),top_logprobs:I(R(()=>ry))}).transform(e=>S(e,{top_logprobs:"topLogprobs"})),Pa=p({content:d(I(gr)),refusal:d(I(gr))}),ay=p({finish_reason:d(Ca),index:y(),message:zf,logprobs:d(Pa).optional()}).transform(e=>S(e,{finish_reason:"finishReason"})),iy=p({id:i(),choices:I(ay),created:y(),model:i(),object:C("chat.completion"),system_fingerprint:d(i()).optional(),usage:Ea.optional()}).transform(e=>S(e,{system_fingerprint:"systemFingerprint"})),uy=p({name:i().optional(),arguments:i().optional()}),cy=p({index:y(),id:i().optional(),type:C("function").optional(),function:R(()=>uy).optional()}),ly={Assistant:"assistant"},dy=z(ly),py=p({role:dy.optional(),content:d(i()).optional(),reasoning:d(i()).optional(),refusal:d(i()).optional(),tool_calls:I(cy).optional()}).transform(e=>S(e,{tool_calls:"toolCalls"})),my=p({delta:py,finish_reason:d(Ca),index:y(),logprobs:d(Pa).optional()}).transform(e=>S(e,{finish_reason:"finishReason"})),hy=p({message:i(),code:y()}),fy=p({id:i(),choices:I(my),created:y(),model:i(),object:C("chat.completion.chunk"),system_fingerprint:d(i()).optional(),error:R(()=>hy).optional(),usage:Ea.optional()}).transform(e=>S(e,{system_fingerprint:"systemFingerprint"})),yy=p({data:i().transform((e,t)=>{try{return JSON.parse(e)}catch(n){return t.addIssue({input:e,code:"custom",message:`malformed json: ${n}`}),Zr}}).pipe(R(()=>fy))}),gy=p({tokens:I(i()),token_logprobs:I(y()),top_logprobs:d(I(oe(i(),y()))),text_offset:I(y())}).transform(e=>S(e,{token_logprobs:"tokenLogprobs",top_logprobs:"topLogprobs",text_offset:"textOffset"})),_y={Stop:"stop",Length:"length",ContentFilter:"content_filter"},by=se(_y),vy=p({text:i(),index:y(),logprobs:d(gy),finish_reason:d(by),native_finish_reason:i().optional(),reasoning:d(i()).optional()}).transform(e=>S(e,{finish_reason:"finishReason",native_finish_reason:"nativeFinishReason"}));k([i(),I(i()),I(y()),I(I(y()))]);k([i(),I(i())]);const Sy=p({includeUsage:d(B()).optional()}).transform(e=>S(e,{includeUsage:"include_usage"})),qa=p({type:C("python")}),Ma=p({type:C("json_object")}),za=p({type:C("text")});k([R(()=>za),R(()=>Ma),$o,Co,R(()=>qa)]);const wy=p({model:i().optional(),models:I(i()).optional(),prompt:k([i(),I(i()),I(y()),I(I(y()))]),bestOf:d(ce()).optional(),echo:d(B()).optional(),frequencyPenalty:d(y()).optional(),logitBias:d(oe(i(),y())).optional(),logprobs:d(ce()).optional(),maxTokens:d(ce()).optional(),n:d(ce()).optional(),presencePenalty:d(y()).optional(),seed:d(ce()).optional(),stop:d(k([i(),I(i())])).optional(),stream:B().default(!1),streamOptions:d(R(()=>Sy)).optional(),suffix:d(i()).optional(),temperature:d(y()).optional(),topP:d(y()).optional(),user:i().optional(),metadata:d(oe(i(),i())).optional(),responseFormat:d(k([R(()=>za),R(()=>Ma),$o,Co,R(()=>qa)])).optional()}).transform(e=>S(e,{bestOf:"best_of",frequencyPenalty:"frequency_penalty",logitBias:"logit_bias",maxTokens:"max_tokens",presencePenalty:"presence_penalty",streamOptions:"stream_options",topP:"top_p",responseFormat:"response_format"})),ky=p({prompt_tokens:y(),completion_tokens:y(),total_tokens:y()}).transform(e=>S(e,{prompt_tokens:"promptTokens",completion_tokens:"completionTokens",total_tokens:"totalTokens"})),Ry=p({id:i(),object:C("text_completion"),created:y(),model:i(),provider:i().optional(),system_fingerprint:i().optional(),choices:I(vy),usage:ky.optional()}).transform(e=>S(e,{system_fingerprint:"systemFingerprint"})),xy=lf(),$y=p({amount:y(),sender:i(),chainId:xy}).transform(e=>S(e,{chainId:"chain_id"})),ja=ae(),Cy=p({temperature:d(y()).optional(),top_p:d(y()).optional(),frequency_penalty:d(y()).optional()}).transform(e=>S(e,{top_p:"topP",frequency_penalty:"frequencyPenalty"})),Iy=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Ty={Zero:0,Minus1:-1,Minus2:-2,Minus3:-3,Minus5:-5,Minus10:-10},Oy=cf(Ty),Ay=p({type:C("file_citation"),file_id:i(),filename:i(),index:y()}).transform(e=>S(e,{file_id:"fileId"})),Ey=p({type:C("file_citation"),fileId:i(),filename:i(),index:y()}).transform(e=>S(e,{fileId:"file_id"})),Py=p({type:C("file_path"),file_id:i(),index:y()}).transform(e=>S(e,{file_id:"fileId"})),qy=p({type:C("file_path"),fileId:i(),index:y()}).transform(e=>S(e,{fileId:"file_id"})),My=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),zy={InProgress:"in_progress",Completed:"completed",Generating:"generating",Failed:"failed"},Na=se(zy),jy=ae(),Ny={Text:"text",Image:"image",File:"file",Audio:"audio",Video:"video"},Ua=se(Ny),Uy={None:"none",Airoboros:"airoboros",Alpaca:"alpaca",AlpacaModif:"alpaca-modif",Chatml:"chatml",Claude:"claude",CodeLlama:"code-llama",Gemma:"gemma",Llama2:"llama2",Llama3:"llama3",Mistral:"mistral",Nemotron:"nemotron",Neural:"neural",Openchat:"openchat",Phi3:"phi3",Rwkv:"rwkv",Vicuna:"vicuna",Zephyr:"zephyr",DeepseekR1:"deepseek-r1",DeepseekV31:"deepseek-v3.1",Qwq:"qwq",Qwen3:"qwen3"},Ly=se(Uy),Dy=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Zy={Text:"text",Image:"image",Embeddings:"embeddings"},La=se(Zy),Fy={Temperature:"temperature",TopP:"top_p",TopK:"top_k",MinP:"min_p",TopA:"top_a",FrequencyPenalty:"frequency_penalty",PresencePenalty:"presence_penalty",RepetitionPenalty:"repetition_penalty",MaxTokens:"max_tokens",LogitBias:"logit_bias",Logprobs:"logprobs",TopLogprobs:"top_logprobs",Seed:"seed",ResponseFormat:"response_format",StructuredOutputs:"structured_outputs",Stop:"stop",Tools:"tools",ToolChoice:"tool_choice",ParallelToolCalls:"parallel_tool_calls",IncludeReasoning:"include_reasoning",Reasoning:"reasoning",WebSearchOptions:"web_search_options",Verbosity:"verbosity"},Da=se(Fy),Xy={Ai21:"AI21",AionLabs:"AionLabs",Alibaba:"Alibaba",AmazonBedrock:"Amazon Bedrock",AmazonNova:"Amazon Nova",Anthropic:"Anthropic",ArceeAI:"Arcee AI",AtlasCloud:"AtlasCloud",Avian:"Avian",Azure:"Azure",BaseTen:"BaseTen",BytePlus:"BytePlus",BlackForestLabs:"Black Forest Labs",Cerebras:"Cerebras",Chutes:"Chutes",Cirrascale:"Cirrascale",Clarifai:"Clarifai",Cloudflare:"Cloudflare",Cohere:"Cohere",Crusoe:"Crusoe",DeepInfra:"DeepInfra",DeepSeek:"DeepSeek",Featherless:"Featherless",Fireworks:"Fireworks",Friendli:"Friendli",GMICloud:"GMICloud",GoPomelo:"GoPomelo",Google:"Google",GoogleAIStudio:"Google AI Studio",Groq:"Groq",Hyperbolic:"Hyperbolic",Inception:"Inception",InferenceNet:"InferenceNet",Infermatic:"Infermatic",Inflection:"Inflection",Liquid:"Liquid",Mancer2:"Mancer 2",Minimax:"Minimax",ModelRun:"ModelRun",Mistral:"Mistral",Modular:"Modular",MoonshotAI:"Moonshot AI",Morph:"Morph",NCompass:"NCompass",Nebius:"Nebius",NextBit:"NextBit",Novita:"Novita",Nvidia:"Nvidia",OpenAI:"OpenAI",OpenInference:"OpenInference",Parasail:"Parasail",Perplexity:"Perplexity",Phala:"Phala",Relace:"Relace",SambaNova:"SambaNova",SiliconFlow:"SiliconFlow",Stealth:"Stealth",StreamLake:"StreamLake",Switchpoint:"Switchpoint",Targon:"Targon",Together:"Together",Venice:"Venice",WandB:"WandB",XAI:"xAI",ZAi:"Z.AI",FakeProvider:"FakeProvider"},By=se(Xy),Le=ae(),Vy={Int4:"int4",Int8:"int8",Fp4:"fp4",Fp6:"fp6",Fp8:"fp8",Fp16:"fp16",Bf16:"bf16",Fp32:"fp32",Unknown:"unknown"},Ky=p({prompt:L().optional(),completion:L().optional(),request:L().optional(),image:L().optional(),image_token:L().optional(),image_output:L().optional(),audio:L().optional(),input_audio_cache:L().optional(),web_search:L().optional(),internal_reasoning:L().optional(),input_cache_read:L().optional(),input_cache_write:L().optional(),discount:y().optional()}).transform(e=>S(e,{image_token:"imageToken",image_output:"imageOutput",input_audio_cache:"inputAudioCache",web_search:"webSearch",internal_reasoning:"internalReasoning",input_cache_read:"inputCacheRead",input_cache_write:"inputCacheWrite"})),Gy=se(Vy),Za=p({name:i(),model_name:i(),context_length:y(),pricing:R(()=>Ky),provider_name:By,tag:i(),quantization:d(Gy),max_completion_tokens:d(y()),max_prompt_tokens:d(y()),supported_parameters:I(Da),status:Oy.optional(),uptime_last_30m:d(y()),supports_implicit_caching:B()}).transform(e=>S(e,{model_name:"modelName",context_length:"contextLength",provider_name:"providerName",max_completion_tokens:"maxCompletionTokens",max_prompt_tokens:"maxPromptTokens",supported_parameters:"supportedParameters",uptime_last_30m:"uptimeLast30m",supports_implicit_caching:"supportsImplicitCaching"})),Hy={Router:"Router",Media:"Media",Other:"Other",Gpt:"GPT",Claude:"Claude",Gemini:"Gemini",Grok:"Grok",Cohere:"Cohere",Nova:"Nova",Qwen:"Qwen",Yi:"Yi",DeepSeek:"DeepSeek",Mistral:"Mistral",Llama2:"Llama2",Llama3:"Llama3",Llama4:"Llama4",PaLM:"PaLM",Rwkv:"RWKV",Qwen3:"Qwen3"},Wy=se(Hy),Jy=p({tokenizer:d(Wy),instruct_type:d(Ly),modality:d(i()),input_modalities:I(Ua),output_modalities:I(La)}).transform(e=>S(e,{instruct_type:"instructType",input_modalities:"inputModalities",output_modalities:"outputModalities"})),Yy=p({id:i(),name:i(),created:y(),description:i(),architecture:R(()=>Jy),endpoints:I(Za)}),Qy={Router:"Router",Media:"Media",Other:"Other",Gpt:"GPT",Claude:"Claude",Gemini:"Gemini",Grok:"Grok",Cohere:"Cohere",Nova:"Nova",Qwen:"Qwen",Yi:"Yi",DeepSeek:"DeepSeek",Mistral:"Mistral",Llama2:"Llama2",Llama3:"Llama3",Llama4:"Llama4",PaLM:"PaLM",Rwkv:"RWKV",Qwen3:"Qwen3"},eg=se(Qy),tg={None:"none",Airoboros:"airoboros",Alpaca:"alpaca",AlpacaModif:"alpaca-modif",Chatml:"chatml",Claude:"claude",CodeLlama:"code-llama",Gemma:"gemma",Llama2:"llama2",Llama3:"llama3",Mistral:"mistral",Nemotron:"nemotron",Neural:"neural",Openchat:"openchat",Phi3:"phi3",Rwkv:"rwkv",Vicuna:"vicuna",Zephyr:"zephyr",DeepseekR1:"deepseek-r1",DeepseekV31:"deepseek-v3.1",Qwq:"qwq",Qwen3:"qwen3"},ng=se(tg),og=p({tokenizer:eg.optional(),instruct_type:d(ng).optional(),modality:d(i()),input_modalities:I(Ua),output_modalities:I(La)}).transform(e=>S(e,{instruct_type:"instructType",input_modalities:"inputModalities",output_modalities:"outputModalities"})),sg=p({prompt_tokens:y(),completion_tokens:y()}).transform(e=>S(e,{prompt_tokens:"promptTokens",completion_tokens:"completionTokens"})),rg=p({prompt:L().optional(),completion:L().optional(),request:L().optional(),image:L().optional(),image_token:L().optional(),image_output:L().optional(),audio:L().optional(),input_audio_cache:L().optional(),web_search:L().optional(),internal_reasoning:L().optional(),input_cache_read:L().optional(),input_cache_write:L().optional(),discount:y().optional()}).transform(e=>S(e,{image_token:"imageToken",image_output:"imageOutput",input_audio_cache:"inputAudioCache",web_search:"webSearch",internal_reasoning:"internalReasoning",input_cache_read:"inputCacheRead",input_cache_write:"inputCacheWrite"})),ag=p({context_length:d(y()).optional(),max_completion_tokens:d(y()).optional(),is_moderated:B()}).transform(e=>S(e,{context_length:"contextLength",max_completion_tokens:"maxCompletionTokens",is_moderated:"isModerated"})),ig=p({id:i(),canonical_slug:i(),hugging_face_id:d(i()).optional(),name:i(),created:y(),description:i().optional(),pricing:rg,context_length:d(y()),architecture:og,top_provider:ag,per_request_limits:d(sg),supported_parameters:I(Da),default_parameters:d(Cy)}).transform(e=>S(e,{canonical_slug:"canonicalSlug",hugging_face_id:"huggingFaceId",context_length:"contextLength",top_provider:"topProvider",per_request_limits:"perRequestLimits",supported_parameters:"supportedParameters",default_parameters:"defaultParameters"})),ug=p({count:y()}),cg=p({data:R(()=>ug)}),ls=p({data:I(ig)}),lg=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),dg=p({type:C("url_citation"),url:i(),title:i(),start_index:y(),end_index:y()}).transform(e=>S(e,{start_index:"startIndex",end_index:"endIndex"})),pg=p({type:C("url_citation"),url:i(),title:i(),startIndex:y(),endIndex:y()}).transform(e=>S(e,{startIndex:"start_index",endIndex:"end_index"})),Fa=k([Ay,dg,Py]),mg=k([Ey,pg,qy]),hg=ae(),fg={MaxOutputTokens:"max_output_tokens",ContentFilter:"content_filter"},yg=se(fg),gg=p({reason:yg.optional()}),_g={ImageGenerationCall:"image_generation_call"},bg=z(_g),Xa=p({type:bg,id:i(),result:d(i()).default(null),status:Na}),_t=p({type:C("refusal"),refusal:i()}),Ba=p({type:C("refusal"),refusal:i()}),bt=p({type:C("output_text"),text:i(),annotations:I(Fa).optional()}),Va=p({type:C("output_text"),text:i(),annotations:I(mg).optional()}),vg={Assistant:"assistant"},Sg={Message:"message"},wg={InProgress:"in_progress"},kg={Incomplete:"incomplete"},Rg={Completed:"completed"},xg=z(vg),$g=z(Sg),Ka=z(wg),Ga=z(kg),Ha=z(Rg);k([Ha,Ga,Ka]);k([bt,_t]);const Wa=p({id:i(),role:xg,type:$g,status:k([Ha,Ga,Ka]).optional(),content:I(k([bt,_t]))}),Cg={Mp3:"mp3",Wav:"wav"},Ig=se(Cg),Tg=ae(),Og=p({data:i(),format:Ig}),Ag=p({data:i(),format:Tg}),Dn=p({type:C("input_audio"),input_audio:R(()=>Og)}).transform(e=>S(e,{input_audio:"inputAudio"})),Zn=p({type:C("input_audio"),inputAudio:R(()=>Ag)}).transform(e=>S(e,{inputAudio:"input_audio"})),Mt=p({type:C("input_file"),file_id:d(i()).optional(),file_data:i().optional(),filename:i().optional(),file_url:i().optional()}).transform(e=>S(e,{file_id:"fileId",file_data:"fileData",file_url:"fileUrl"})),zt=p({type:C("input_file"),fileId:d(i()).optional(),fileData:i().optional(),filename:i().optional(),fileUrl:i().optional()}).transform(e=>S(e,{fileId:"file_id",fileData:"file_data",fileUrl:"file_url"})),Eg={Auto:"auto",High:"high",Low:"low"},Pg=se(Eg),qg=ae(),jt=p({type:C("input_image"),detail:Pg,image_url:d(i()).optional()}).transform(e=>S(e,{image_url:"imageUrl"})),Nt=p({type:C("input_image"),detail:qg,imageUrl:d(i()).optional()}).transform(e=>S(e,{imageUrl:"image_url"})),Ut=p({type:C("input_text"),text:i()}),Lt=p({type:C("input_text"),text:i()}),Mg={InProgress:"in_progress",Completed:"completed",Incomplete:"incomplete"},Ja=se(Mg),Ya=ae(),zg={FunctionCall:"function_call"},jg={FunctionCallOutput:"function_call_output"},Ng={Message:"message"},Ug={Developer:"developer"},Lg={System:"system"},Dg={User:"user"},Zg={Message:"message"},Fg={Developer:"developer"},Xg={Assistant:"assistant"},Bg={System:"system"},Vg={User:"user"},Kg=z(zg),Qa=p({type:Kg,call_id:i(),name:i(),arguments:i(),id:i().optional(),status:d(Ja).optional()}).transform(e=>S(e,{call_id:"callId"})),Gg=z(jg),ei=p({type:Gg,id:d(i()).optional(),call_id:i(),output:i(),status:d(Ja).optional()}).transform(e=>S(e,{call_id:"callId"})),Hg=z(Ng),ti=z(Ug),ni=z(Lg),oi=z(Dg);k([oi,ni,ti]);k([Ut,jt,Mt,Dn]);const si=p({id:i(),type:Hg.optional(),role:k([oi,ni,ti]),content:I(k([Ut,jt,Mt,Dn]))}),Wg=z(Zg),ri=z(Fg),ai=z(Xg),ii=z(Bg),ui=z(Vg);k([ui,ii,ai,ri]);k([Ut,jt,Mt,Dn]);k([I(k([Ut,jt,Mt,Dn])),i()]);const ci=p({type:Wg.optional(),role:k([ui,ii,ai,ri]),content:k([I(k([Ut,jt,Mt,Dn])),i()])});k([R(()=>Qa),Wa,R(()=>si),R(()=>ei),Xa,R(()=>ci)]);const Jg=k([i(),I(k([R(()=>Qa),Wa,R(()=>si),R(()=>ei),Xa,R(()=>ci)])),L()]);k([Ut,jt,Mt,i()]);k([Lt,Nt,zt,i()]);const Yg=p({id:i(),variables:d(oe(i(),k([Ut,jt,Mt,i()]))).optional()}),Qg=p({id:i(),variables:d(oe(i(),k([Lt,Nt,zt,i()]))).optional()}),e_={High:"high",Medium:"medium",Low:"low",Minimal:"minimal",None:"none"},t_=se(e_),n_=ae(),o_=p({effort:d(t_).optional(),summary:Hf.optional()}),s_={Completed:"completed",Incomplete:"incomplete",InProgress:"in_progress",Failed:"failed",Cancelled:"cancelled",Queued:"queued"},r_=se(s_),a_={Auto:"auto",Default:"default",Flex:"flex",Priority:"priority",Scale:"scale"},i_=se(a_),u_={WebSearchPreview:"web_search_preview"},c_={WebSearchPreview20250311:"web_search_preview_2025_03_11"},l_={Function:"function"},d_={Required:"required"},p_={None:"none"},m_={Auto:"auto"},ds=z(u_),li=ds,ps=z(c_),di=ps;k([ps,ds]);k([di,li]);const h_=p({type:k([ps,ds])}),f_=p({type:k([di,li])}),pi=z(l_),y_=pi,g_=p({type:pi,name:i()}),__=p({type:y_,name:i()}),mi=z(d_),b_=mi,hi=z(p_),v_=hi,fi=z(m_),S_=fi,w_=k([R(()=>g_),R(()=>h_),fi,hi,mi]),k_=k([R(()=>__),R(()=>f_),S_,v_,b_]),R_={Auto:"auto",Disabled:"disabled"},x_=se(R_),$_={Message:"message"},C_={Developer:"developer"},I_={Assistant:"assistant"},T_={System:"system"},O_={User:"user"},A_=z($_),yi=z(C_),gi=z(I_),_i=z(T_),bi=z(O_);k([bi,_i,gi,yi]);k([Lt,Nt,zt,Zn]);k([I(k([Lt,Nt,zt,Zn])),i()]);const vi=p({type:A_.optional(),role:k([bi,_i,gi,yi]),content:k([I(k([Lt,Nt,zt,Zn])),i()])}),E_=p({type:C("error"),code:d(i()),message:i(),param:d(i()),sequence_number:y()}).transform(e=>S(e,{sequence_number:"sequenceNumber"})),P_={FunctionCallOutput:"function_call_output"},q_=z(P_),Si=p({type:q_,id:d(i()).optional(),callId:i(),output:i(),status:d(Ya).optional()}).transform(e=>S(e,{callId:"call_id"})),M_={FunctionCall:"function_call"},z_=z(M_),wi=p({type:z_,callId:i(),name:i(),arguments:i(),id:i(),status:d(Ya).optional()}).transform(e=>S(e,{callId:"call_id"})),j_=p({type:C("response.image_generation_call.completed"),item_id:i(),output_index:y(),sequence_number:y()}).transform(e=>S(e,{item_id:"itemId",output_index:"outputIndex",sequence_number:"sequenceNumber"})),N_=p({type:C("response.image_generation_call.generating"),item_id:i(),output_index:y(),sequence_number:y()}).transform(e=>S(e,{item_id:"itemId",output_index:"outputIndex",sequence_number:"sequenceNumber"})),U_=p({type:C("response.image_generation_call.in_progress"),item_id:i(),output_index:y(),sequence_number:y()}).transform(e=>S(e,{item_id:"itemId",output_index:"outputIndex",sequence_number:"sequenceNumber"})),L_=p({type:C("response.image_generation_call.partial_image"),item_id:i(),output_index:y(),sequence_number:y(),partial_image_b64:i(),partial_image_index:y()}).transform(e=>S(e,{item_id:"itemId",output_index:"outputIndex",sequence_number:"sequenceNumber",partial_image_b64:"partialImageB64",partial_image_index:"partialImageIndex"})),D_={Message:"message"},Z_={Developer:"developer"},F_={System:"system"},X_={User:"user"},B_=z(D_),ki=z(Z_),Ri=z(F_),xi=z(X_);k([xi,Ri,ki]);k([Lt,Nt,zt,Zn]);const $i=p({id:i().optional(),type:B_.optional(),role:k([xi,Ri,ki]),content:I(k([Lt,Nt,zt,Zn]))}),V_={SummaryText:"summary_text"},Ci=z(V_),K_=Ci,ms=p({type:Ci,text:i()}),Ii=p({type:K_,text:i()}),G_={ReasoningText:"reasoning_text"},Ti=z(G_),H_=Ti,Fn=p({type:Ti,text:i()}),Oi=p({type:H_,text:i()}),W_={Reasoning:"reasoning"},J_={InProgress:"in_progress"},Y_={Incomplete:"incomplete"},Q_={Completed:"completed"},eb=z(W_),Ai=z(J_),Ei=z(Y_),Pi=z(Q_);k([Pi,Ei,Ai]);const tb=ae(),qi=p({type:eb,id:i(),content:I(Oi).optional(),summary:I(Ii),encryptedContent:d(i()).optional(),status:k([Pi,Ei,Ai]).optional(),signature:d(i()).optional(),format:d(tb).optional()}).transform(e=>S(e,{encryptedContent:"encrypted_content"})),nb={ImageGenerationCall:"image_generation_call"},Mi=z(nb),ob=Mi,sb=p({type:Mi,id:i(),result:d(i()).default(null),status:Na}),zi=p({type:ob,id:i(),result:d(i()).default(null),status:jy}),rb={Completed:"completed",Searching:"searching",InProgress:"in_progress",Failed:"failed"},ji=se(rb),Ni=ae(),ab={FileSearchCall:"file_search_call"},Ui=z(ab),ib=Ui,ub=p({type:Ui,id:i(),queries:I(i()),status:ji}),Li=p({type:ib,id:i(),queries:I(i()),status:Ni}),cb={FunctionCall:"function_call"},lb={InProgress:"in_progress"},db={Incomplete:"incomplete"},pb={Completed:"completed"},Di=z(cb),mb=Di,hs=z(lb),Zi=hs,fs=z(db),Fi=fs,ys=z(pb),Xi=ys;k([ys,fs,hs]);k([Xi,Fi,Zi]);const hb=p({type:Di,id:i().optional(),name:i(),arguments:i(),call_id:i(),status:k([ys,fs,hs]).optional()}).transform(e=>S(e,{call_id:"callId"})),Bi=p({type:mb,id:i().optional(),name:i(),arguments:i(),callId:i(),status:k([Xi,Fi,Zi]).optional()}).transform(e=>S(e,{callId:"call_id"})),fb={Reasoning:"reasoning"},yb={InProgress:"in_progress"},gb={Incomplete:"incomplete"},_b={Completed:"completed"},Vi=z(fb),bb=Vi,gs=z(yb),Ki=gs,_s=z(gb),Gi=_s,bs=z(_b),Hi=bs;k([bs,_s,gs]);k([Hi,Gi,Ki]);const vb=p({type:Vi,id:i(),content:I(Fn).optional(),summary:I(ms),encrypted_content:d(i()).optional(),status:k([bs,_s,gs]).optional()}).transform(e=>S(e,{encrypted_content:"encryptedContent"})),Wi=p({type:bb,id:i(),content:I(Oi).optional(),summary:I(Ii),encryptedContent:d(i()).optional(),status:k([Hi,Gi,Ki]).optional()}).transform(e=>S(e,{encryptedContent:"encrypted_content"})),Sb={Assistant:"assistant"},wb={Message:"message"},kb={InProgress:"in_progress"},Rb={Incomplete:"incomplete"},xb={Completed:"completed"},Ji=z(Sb),$b=Ji,Yi=z(wb),Cb=Yi,vs=z(kb),Qi=vs,Ss=z(Rb),eu=Ss,ws=z(xb),tu=ws;k([ws,Ss,vs]);k([tu,eu,Qi]);k([bt,_t]);k([Va,Ba]);const Ib=p({id:i(),role:Ji,type:Yi,status:k([ws,Ss,vs]).optional(),content:I(k([bt,_t]))}),nu=p({id:i(),role:$b,type:Cb,status:k([tu,eu,Qi]).optional(),content:I(k([Va,Ba]))}),Tb={WebSearchCall:"web_search_call"},ou=z(Tb),Ob=ou,Ab=p({type:ou,id:i(),status:ji}),su=p({type:Ob,id:i(),status:Ni});k([wi,nu,Bi,Li,qi,Si,Wi,su,zi,vi,$i]);const Eb=k([i(),I(k([wi,nu,Bi,Li,qi,Si,Wi,su,zi,vi,$i]))]),Pb=p({token:i().optional(),logprob:y().optional()}),ru=p({logprob:y(),token:i(),top_logprobs:I(Pb).optional()}).transform(e=>S(e,{top_logprobs:"topLogprobs"})),qb=p({cached_tokens:y()}).transform(e=>S(e,{cached_tokens:"cachedTokens"})),Mb=p({reasoning_tokens:y()}).transform(e=>S(e,{reasoning_tokens:"reasoningTokens"})),zb=p({upstream_inference_cost:d(y()).optional(),upstream_inference_input_cost:y(),upstream_inference_output_cost:y()}).transform(e=>S(e,{upstream_inference_cost:"upstreamInferenceCost",upstream_inference_input_cost:"upstreamInferenceInputCost",upstream_inference_output_cost:"upstreamInferenceOutputCost"})),jb=p({input_tokens:y(),input_tokens_details:R(()=>qb),output_tokens:y(),output_tokens_details:R(()=>Mb),total_tokens:y(),cost:d(y()).optional(),is_byok:B().optional(),cost_details:R(()=>zb).optional()}).transform(e=>S(e,{input_tokens:"inputTokens",input_tokens_details:"inputTokensDetails",output_tokens:"outputTokens",output_tokens_details:"outputTokensDetails",total_tokens:"totalTokens",is_byok:"isByok",cost_details:"costDetails"})),Nb={Low:"low",Medium:"medium",High:"high"},Io=se(Nb),To=ae(),Ub={Approximate:"approximate"},au=z(Ub),Lb=au,iu=p({type:au.optional(),city:d(i()).optional(),country:d(i()).optional(),region:d(i()).optional(),timezone:d(i()).optional()}),uu=p({type:Lb.optional(),city:d(i()).optional(),country:d(i()).optional(),region:d(i()).optional(),timezone:d(i()).optional()}),Db=p({allowed_domains:d(I(i())).optional()}).transform(e=>S(e,{allowed_domains:"allowedDomains"})),Zb=p({allowedDomains:d(I(i())).optional()}).transform(e=>S(e,{allowedDomains:"allowed_domains"})),cu=p({type:C("web_search_2025_08_26"),filters:d(R(()=>Db)).optional(),search_context_size:Io.optional(),user_location:d(iu).optional()}).transform(e=>S(e,{search_context_size:"searchContextSize",user_location:"userLocation"})),lu=p({type:C("web_search_2025_08_26"),filters:d(R(()=>Zb)).optional(),searchContextSize:To.optional(),userLocation:d(uu).optional()}).transform(e=>S(e,{searchContextSize:"search_context_size",userLocation:"user_location"})),Fb={Approximate:"approximate"},du=z(Fb),Xb=du,pu=p({type:du,city:d(i()).optional(),country:d(i()).optional(),region:d(i()).optional(),timezone:d(i()).optional()}),mu=p({type:Xb,city:d(i()).optional(),country:d(i()).optional(),region:d(i()).optional(),timezone:d(i()).optional()}),hu=p({type:C("web_search_preview_2025_03_11"),search_context_size:Io.optional(),user_location:d(pu).optional()}).transform(e=>S(e,{search_context_size:"searchContextSize",user_location:"userLocation"})),fu=p({type:C("web_search_preview_2025_03_11"),searchContextSize:To.optional(),userLocation:d(mu).optional()}).transform(e=>S(e,{searchContextSize:"search_context_size",userLocation:"user_location"})),yu=p({type:C("web_search_preview"),search_context_size:Io.optional(),user_location:d(pu).optional()}).transform(e=>S(e,{search_context_size:"searchContextSize",user_location:"userLocation"})),gu=p({type:C("web_search_preview"),searchContextSize:To.optional(),userLocation:d(mu).optional()}).transform(e=>S(e,{searchContextSize:"search_context_size",userLocation:"user_location"})),Bb=p({allowed_domains:d(I(i())).optional()}).transform(e=>S(e,{allowed_domains:"allowedDomains"})),Vb=p({allowedDomains:d(I(i())).optional()}).transform(e=>S(e,{allowedDomains:"allowed_domains"})),_u=p({type:C("web_search"),filters:d(R(()=>Bb)).optional(),search_context_size:Io.optional(),user_location:d(iu).optional()}).transform(e=>S(e,{search_context_size:"searchContextSize",user_location:"userLocation"})),bu=p({type:C("web_search"),filters:d(R(()=>Vb)).optional(),searchContextSize:To.optional(),userLocation:d(uu).optional()}).transform(e=>S(e,{searchContextSize:"search_context_size",userLocation:"user_location"})),Kb={ServerError:"server_error",RateLimitExceeded:"rate_limit_exceeded",InvalidPrompt:"invalid_prompt",VectorStoreTimeout:"vector_store_timeout",InvalidImage:"invalid_image",InvalidImageFormat:"invalid_image_format",InvalidBase64Image:"invalid_base64_image",InvalidImageUrl:"invalid_image_url",ImageTooLarge:"image_too_large",ImageTooSmall:"image_too_small",ImageParseError:"image_parse_error",ImageContentPolicyViolation:"image_content_policy_violation",InvalidImageMode:"invalid_image_mode",ImageFileTooLarge:"image_file_too_large",UnsupportedImageMediaType:"unsupported_image_media_type",EmptyImageFile:"empty_image_file",FailedToDownloadImage:"failed_to_download_image",ImageFileNotFound:"image_file_not_found"},Gb=se(Kb),Hb=p({code:Gb,message:i()}),ks=k([Ib.and(p({type:C("message")})),vb.and(p({type:C("reasoning")})),hb.and(p({type:C("function_call")})),Ab.and(p({type:C("web_search_call")})),ub.and(p({type:C("file_search_call")})),sb.and(p({type:C("image_generation_call")}))]),Wb=p({type:C("json_object")}),Jb=p({type:C("json_object")}),Yb=p({type:C("text")}),Qb=p({type:C("text")}),ev=p({type:C("json_schema"),name:i(),description:i().optional(),strict:d(B()).optional(),schema:oe(i(),d(L()))}),tv=p({type:C("json_schema"),name:i(),description:i().optional(),strict:d(B()).optional(),schema:oe(i(),d(L()))}),nv=k([Yb,Wb,ev]),ov=k([Qb,Jb,tv]),sv={High:"high",Low:"low",Medium:"medium"},rv=se(sv),av=p({format:nv.optional(),verbosity:d(rv).optional()}),iv={Response:"response"},uv=z(iv),vu=p({type:C("function"),name:i(),description:d(i()).optional(),strict:d(B()).optional(),parameters:d(oe(i(),d(L())))});k([R(()=>vu),yu,hu,_u,cu]);const hn=p({id:i(),object:uv,created_at:y(),model:i(),status:r_.optional(),output:I(ks),user:d(i()).optional(),output_text:i().optional(),prompt_cache_key:d(i()).optional(),safety_identifier:d(i()).optional(),error:d(Hb),incomplete_details:d(gg),usage:jb.optional(),max_tool_calls:d(y()).optional(),top_logprobs:y().optional(),max_output_tokens:d(y()).optional(),temperature:d(y()),top_p:d(y()),instructions:d(Jg).optional(),metadata:d(oe(i(),i())),tools:I(k([R(()=>vu),yu,hu,_u,cu])),tool_choice:w_,parallel_tool_calls:B(),prompt:d(Yg).optional(),background:d(B()).optional(),previous_response_id:d(i()).optional(),reasoning:d(o_).optional(),service_tier:d(i_).optional(),store:B().optional(),truncation:d(x_).optional(),text:av.optional()}).transform(e=>S(e,{created_at:"createdAt",output_text:"outputText",prompt_cache_key:"promptCacheKey",safety_identifier:"safetyIdentifier",incomplete_details:"incompleteDetails",max_tool_calls:"maxToolCalls",top_logprobs:"topLogprobs",max_output_tokens:"maxOutputTokens",top_p:"topP",tool_choice:"toolChoice",parallel_tool_calls:"parallelToolCalls",previous_response_id:"previousResponseId",service_tier:"serviceTier"})),cv=p({effort:d(n_).optional(),summary:Ia.optional(),maxTokens:d(y()).optional(),enabled:d(B()).optional()}).transform(e=>S(e,{maxTokens:"max_tokens"})),lv=p({type:C("response.reasoning_text.delta"),output_index:y(),item_id:i(),content_index:y(),delta:i(),sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber"})),dv=p({type:C("response.reasoning_text.done"),output_index:y(),item_id:i(),content_index:y(),text:i(),sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber"})),pv=p({type:C("response.reasoning_summary_part.added"),output_index:y(),item_id:i(),summary_index:y(),part:ms,sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",summary_index:"summaryIndex",sequence_number:"sequenceNumber"})),mv=p({type:C("response.reasoning_summary_text.delta"),item_id:i(),output_index:y(),summary_index:y(),delta:i(),sequence_number:y()}).transform(e=>S(e,{item_id:"itemId",output_index:"outputIndex",summary_index:"summaryIndex",sequence_number:"sequenceNumber"})),hv=p({type:C("response.reasoning_summary_text.done"),item_id:i(),output_index:y(),summary_index:y(),text:i(),sequence_number:y()}).transform(e=>S(e,{item_id:"itemId",output_index:"outputIndex",summary_index:"summaryIndex",sequence_number:"sequenceNumber"})),fv=ae(),yv=p({format:ov.optional(),verbosity:d(fv).optional()}),Su=ae(),wu=ae(),gv={Auto:"auto"},ku=p({type:C("function"),name:i(),description:d(i()).optional(),strict:d(B()).optional(),parameters:d(oe(i(),d(L())))});k([R(()=>ku),gu,fu,bu,lu]);const _v=z(gv),bv=ae();k([Le,i()]);k([Le,i()]);k([Le,i()]);const vv=p({prompt:L().optional(),completion:L().optional(),image:L().optional(),audio:L().optional(),request:L().optional()}),Sv=p({allowFallbacks:d(B()).optional(),requireParameters:d(B()).optional(),dataCollection:d(ja).optional(),zdr:d(B()).optional(),enforceDistillableText:d(B()).optional(),order:d(I(k([Le,i()]))).optional(),only:d(I(k([Le,i()]))).optional(),ignore:d(I(k([Le,i()]))).optional(),quantizations:d(I(wu)).optional(),sort:d(Su).optional(),maxPrice:R(()=>vv).optional()}).transform(e=>S(e,{allowFallbacks:"allow_fallbacks",requireParameters:"require_parameters",dataCollection:"data_collection",enforceDistillableText:"enforce_distillable_text",maxPrice:"max_price"})),Ru=p({id:C("response-healing")}),wv=ae(),kv=p({engine:wv.optional()}),xu=p({id:C("file-parser"),maxFiles:y().optional(),pdf:R(()=>kv).optional()}).transform(e=>S(e,{maxFiles:"max_files"})),Rv=ae(),$u=p({id:C("web"),maxResults:y().optional(),searchPrompt:i().optional(),engine:Rv.optional()}).transform(e=>S(e,{maxResults:"max_results",searchPrompt:"search_prompt"})),Cu=p({id:C("moderation")});k([R(()=>Cu),R(()=>$u),R(()=>xu),R(()=>Ru)]);const xv=p({input:Eb.optional(),instructions:d(i()).optional(),metadata:d(oe(i(),i())).optional(),tools:I(k([R(()=>ku),gu,fu,bu,lu])).optional(),toolChoice:k_.optional(),parallelToolCalls:d(B()).optional(),model:i().optional(),models:I(i()).optional(),text:yv.optional(),reasoning:d(cv).optional(),maxOutputTokens:d(y()).optional(),temperature:d(y()).optional(),topP:d(y()).optional(),topK:y().optional(),promptCacheKey:d(i()).optional(),previousResponseId:d(i()).optional(),prompt:d(Qg).optional(),include:d(I(hg)).optional(),background:d(B()).optional(),safetyIdentifier:d(i()).optional(),store:C(!1).default(!1),serviceTier:_v.default("auto"),truncation:d(bv).optional(),stream:B().default(!1),provider:d(R(()=>Sv)).optional(),plugins:I(k([R(()=>Cu),R(()=>$u),R(()=>xu),R(()=>Ru)])).optional(),user:i().optional()}).transform(e=>S(e,{toolChoice:"tool_choice",parallelToolCalls:"parallel_tool_calls",maxOutputTokens:"max_output_tokens",topP:"top_p",topK:"top_k",promptCacheKey:"prompt_cache_key",previousResponseId:"previous_response_id",safetyIdentifier:"safety_identifier",serviceTier:"service_tier"})),$v=p({type:C("response.reasoning_summary_part.done"),output_index:y(),item_id:i(),summary_index:y(),part:ms,sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",summary_index:"summaryIndex",sequence_number:"sequenceNumber"})),Cv=p({type:C("response.function_call_arguments.done"),item_id:i(),output_index:y(),name:i(),arguments:i(),sequence_number:y()}).transform(e=>S(e,{item_id:"itemId",output_index:"outputIndex",sequence_number:"sequenceNumber"})),Iv=p({type:C("response.function_call_arguments.delta"),item_id:i(),output_index:y(),delta:i(),sequence_number:y()}).transform(e=>S(e,{item_id:"itemId",output_index:"outputIndex",sequence_number:"sequenceNumber"})),Tv=p({type:C("response.output_text.annotation.added"),output_index:y(),item_id:i(),content_index:y(),sequence_number:y(),annotation_index:y(),annotation:Fa}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber",annotation_index:"annotationIndex"})),Ov=p({type:C("response.refusal.done"),output_index:y(),item_id:i(),content_index:y(),refusal:i(),sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber"})),Av=p({type:C("response.refusal.delta"),output_index:y(),item_id:i(),content_index:y(),delta:i(),sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber"})),Ev=p({type:C("response.output_text.done"),output_index:y(),item_id:i(),content_index:y(),text:i(),sequence_number:y(),logprobs:I(ru)}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber"})),Pv=p({type:C("response.output_text.delta"),logprobs:I(ru),output_index:y(),item_id:i(),content_index:y(),delta:i(),sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber"}));k([bt,Fn.and(p({type:C("reasoning_text")})),_t]);const qv=p({type:C("response.content_part.done"),output_index:y(),item_id:i(),content_index:y(),part:k([bt,Fn.and(p({type:C("reasoning_text")})),_t]),sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber"}));k([bt,Fn.and(p({type:C("reasoning_text")})),_t]);const Mv=p({type:C("response.content_part.added"),output_index:y(),item_id:i(),content_index:y(),part:k([bt,Fn.and(p({type:C("reasoning_text")})),_t]),sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",item_id:"itemId",content_index:"contentIndex",sequence_number:"sequenceNumber"})),zv=p({type:C("response.output_item.done"),output_index:y(),item:ks,sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",sequence_number:"sequenceNumber"})),jv=p({type:C("response.output_item.added"),output_index:y(),item:ks,sequence_number:y()}).transform(e=>S(e,{output_index:"outputIndex",sequence_number:"sequenceNumber"})),Nv=p({type:C("response.failed"),response:hn,sequence_number:y()}).transform(e=>S(e,{sequence_number:"sequenceNumber"})),Uv=p({type:C("response.incomplete"),response:hn,sequence_number:y()}).transform(e=>S(e,{sequence_number:"sequenceNumber"})),Lv=p({type:C("response.completed"),response:hn,sequence_number:y()}).transform(e=>S(e,{sequence_number:"sequenceNumber"})),Dv=p({type:C("response.in_progress"),response:hn,sequence_number:y()}).transform(e=>S(e,{sequence_number:"sequenceNumber"})),Zv=p({type:C("response.created"),response:hn,sequence_number:y()}).transform(e=>S(e,{sequence_number:"sequenceNumber"})),Fv=k([R(()=>Zv),R(()=>Dv),R(()=>Lv),R(()=>Uv),R(()=>Nv),E_,R(()=>jv),R(()=>zv),R(()=>Mv),R(()=>qv),R(()=>Pv),R(()=>Ev),R(()=>Av),R(()=>Ov),R(()=>Tv),R(()=>Iv),R(()=>Cv),lv,dv,pv,R(()=>$v),mv,hv,U_,N_,L_,j_]),Xv=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Bv=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Vv=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Kv=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Gv=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Hv=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Wv=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()}),Jv=p({code:ce(),message:i(),metadata:d(oe(i(),d(L()))).optional()});class Yv extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="BadGatewayResponseError"}}const Rs=p({error:Nf,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new Yv(t,{request:e.request$,response:e.response$,body:e.body$})});class Qv extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="BadRequestResponseError"}}const Ye=p({error:Uf,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new Qv(t,{request:e.request$,response:e.response$,body:e.body$})});class eS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,this.name="ChatError"}}const uo=p({error:R(()=>Df),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>new eS(e,{request:e.request$,response:e.response$,body:e.body$}));class tS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="EdgeNetworkTimeoutResponseError"}}const xs=p({error:Iy,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new tS(t,{request:e.request$,response:e.response$,body:e.body$})});class nS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="ForbiddenResponseError"}}const $s=p({error:My,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new nS(t,{request:e.request$,response:e.response$,body:e.body$})});class oS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="InternalServerResponseError"}}const Se=p({error:Dy,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new oS(t,{request:e.request$,response:e.response$,body:e.body$})});class sS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="NotFoundResponseError"}}const vt=p({error:lg,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new sS(t,{request:e.request$,response:e.response$,body:e.body$})});class rS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="PayloadTooLargeResponseError"}}const aS=p({error:Xv,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new rS(t,{request:e.request$,response:e.response$,body:e.body$})});class iS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="PaymentRequiredResponseError"}}const Cs=p({error:Bv,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new iS(t,{request:e.request$,response:e.response$,body:e.body$})});class uS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="ProviderOverloadedResponseError"}}const Is=p({error:Vv,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new uS(t,{request:e.request$,response:e.response$,body:e.body$})});class cS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="RequestTimeoutResponseError"}}const lS=p({error:Kv,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new cS(t,{request:e.request$,response:e.response$,body:e.body$})});class dS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="ServiceUnavailableResponseError"}}const Iu=p({error:Gv,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new dS(t,{request:e.request$,response:e.response$,body:e.body$})});class pS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="TooManyRequestsResponseError"}}const ut=p({error:Hv,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new pS(t,{request:e.request$,response:e.response$,body:e.body$})});class mS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="UnauthorizedResponseError"}}const qe=p({error:Wv,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new mS(t,{request:e.request$,response:e.response$,body:e.body$})});class hS extends Ce{constructor(t,n){const o=t.error?.message||`API error occurred: ${JSON.stringify(t)}`;super(o,n),this.data$=t,this.error=t.error,t.userId!=null&&(this.userId=t.userId),this.name="UnprocessableEntityResponseError"}}const fS=p({error:Jv,user_id:d(i()).optional(),request$:ee(e=>e instanceof Request),response$:ee(e=>e instanceof Response),body$:i()}).transform(e=>{const t=S(e,{user_id:"userId"});return new hS(t,{request:e.request$,response:e.response$,body:e.body$})}),yS=ae(),gS=p({callbackUrl:i(),codeChallenge:i().optional(),codeChallengeMethod:yS.optional(),limit:y().optional(),expiresAt:d(pa().transform(e=>e.toISOString())).optional()}).transform(e=>S(e,{callbackUrl:"callback_url",codeChallenge:"code_challenge",codeChallengeMethod:"code_challenge_method",expiresAt:"expires_at"})),_S=p({id:i(),app_id:y(),created_at:i()}).transform(e=>S(e,{app_id:"appId",created_at:"createdAt"})),bS=p({data:R(()=>_S)});p({bearer:i()});const vS=p({deadline:i(),fee_amount:i(),id:i(),operator:i(),prefix:i(),recipient:i(),recipient_amount:i(),recipient_currency:i(),refund_destination:i(),signature:i()}).transform(e=>S(e,{fee_amount:"feeAmount",recipient_amount:"recipientAmount",recipient_currency:"recipientCurrency",refund_destination:"refundDestination"})),SS=p({chain_id:y(),contract_address:i(),sender:i()}).transform(e=>S(e,{chain_id:"chainId",contract_address:"contractAddress"})),wS=p({call_data:R(()=>vS),metadata:R(()=>SS)}).transform(e=>S(e,{call_data:"callData"})),kS=p({transfer_intent:R(()=>wS)}).transform(e=>S(e,{transfer_intent:"transferIntent"})),RS=p({id:i(),created_at:i(),expires_at:i(),web3_data:R(()=>kS)}).transform(e=>S(e,{created_at:"createdAt",expires_at:"expiresAt",web3_data:"web3Data"})),xS=p({data:R(()=>RS)}),$S={List:"list"},CS={Embedding:"embedding"},IS=p({url:i()}),Tu=p({type:C("image_url"),imageUrl:R(()=>IS)}).transform(e=>S(e,{imageUrl:"image_url"})),Ou=p({type:C("text"),text:i()});k([R(()=>Ou),R(()=>Tu)]);const Au=p({content:I(k([R(()=>Ou),R(()=>Tu)]))});k([i(),I(i()),I(y()),I(I(y())),I(R(()=>Au))]);const TS=ae();k([Le,i()]);k([Le,i()]);k([Le,i()]);const OS=p({prompt:L().optional(),completion:L().optional(),image:L().optional(),audio:L().optional(),request:L().optional()}),AS=p({allowFallbacks:d(B()).optional(),requireParameters:d(B()).optional(),dataCollection:d(ja).optional(),zdr:d(B()).optional(),enforceDistillableText:d(B()).optional(),order:d(I(k([Le,i()]))).optional(),only:d(I(k([Le,i()]))).optional(),ignore:d(I(k([Le,i()]))).optional(),quantizations:d(I(wu)).optional(),sort:d(Su).optional(),maxPrice:R(()=>OS).optional()}).transform(e=>S(e,{allowFallbacks:"allow_fallbacks",requireParameters:"require_parameters",dataCollection:"data_collection",enforceDistillableText:"enforce_distillable_text",maxPrice:"max_price"})),ES=p({input:k([i(),I(i()),I(y()),I(I(y())),I(R(()=>Au))]),model:i(),encodingFormat:TS.optional(),dimensions:ce().optional(),user:i().optional(),provider:R(()=>AS).optional(),inputType:i().optional()}).transform(e=>S(e,{encodingFormat:"encoding_format",inputType:"input_type"})),PS=z($S),qS=z(CS);k([I(y()),i()]);const MS=p({object:qS,embedding:k([I(y()),i()]),index:y().optional()}),zS=p({prompt_tokens:y(),total_tokens:y(),cost:y().optional()}).transform(e=>S(e,{prompt_tokens:"promptTokens",total_tokens:"totalTokens"})),jS=p({id:i().optional(),object:PS,data:I(R(()=>MS)),model:i(),usage:R(()=>zS).optional()}),NS=ae(),US=p({name:i(),limit:d(y()).optional(),limitReset:d(NS).optional(),includeByokInLimit:B().optional(),expiresAt:d(pa().transform(e=>e.toISOString())).optional()}).transform(e=>S(e,{limitReset:"limit_reset",includeByokInLimit:"include_byok_in_limit",expiresAt:"expires_at"})),LS=p({hash:i(),name:i(),label:i(),disabled:B(),limit:d(y()),limit_remaining:d(y()),limit_reset:d(i()),include_byok_in_limit:B(),usage:y(),usage_daily:y(),usage_weekly:y(),usage_monthly:y(),byok_usage:y(),byok_usage_daily:y(),byok_usage_weekly:y(),byok_usage_monthly:y(),created_at:i(),updated_at:d(i()),expires_at:d(pn({offset:!0}).transform(e=>new Date(e))).optional()}).transform(e=>S(e,{limit_remaining:"limitRemaining",limit_reset:"limitReset",include_byok_in_limit:"includeByokInLimit",usage_daily:"usageDaily",usage_weekly:"usageWeekly",usage_monthly:"usageMonthly",byok_usage:"byokUsage",byok_usage_daily:"byokUsageDaily",byok_usage_weekly:"byokUsageWeekly",byok_usage_monthly:"byokUsageMonthly",created_at:"createdAt",updated_at:"updatedAt",expires_at:"expiresAt"})),DS=p({data:R(()=>LS),key:i()});class Eu extends ReadableStream{constructor(t,n){const o=t.getReader();let s=new Uint8Array;super({async pull(r){try{for(;;){const a=FS(s);if(!a){const l=await o.read();if(l.done)return r.close();s=ZS(s,l.value);continue}const u=s.slice(0,a.index);s=s.slice(a.index+a.length);const c=XS(u,n);if(c?.value)return r.enqueue(c.value);if(c?.done)return await o.cancel("done"),r.close()}}catch(a){r.error(a),await o.cancel(a)}},cancel:r=>o.cancel(r)})}[Symbol.asyncIterator](){const t=ReadableStream.prototype[Symbol.asyncIterator];if(typeof t=="function")return t.call(this);const n=this.getReader();return{next:async()=>{const o=await n.read();return o.done?(n.releaseLock(),{done:!0,value:void 0}):{done:!1,value:o.value}},throw:async o=>(await n.cancel(o),n.releaseLock(),{done:!0,value:void 0}),return:async()=>(await n.cancel("done"),n.releaseLock(),{done:!0,value:void 0}),[Symbol.asyncIterator](){return this}}}}function ZS(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function FS(e){const t=e.length;for(let n=0;n<t;n++){if(n<=t-4&&e[n]===13&&e[n+1]===10&&e[n+2]===13&&e[n+3]===10)return{index:n,length:4};if(n<=t-2&&e[n]===13&&e[n+1]===13)return{index:n,length:2};if(n<=t-2&&e[n]===10&&e[n+1]===10)return{index:n,length:2}}return null}function XS(e,t){const o=new TextDecoder().decode(e).split(/\r\n|\r|\n/),s=[],r={};let a=!0;for(const u of o){if(!u||u.startsWith(":"))continue;a=!1;const c=u.indexOf(":"),l=u.slice(0,c),m=u[c+1]===" "?u.slice(c+2):u.slice(c+1);if(l==="data")s.push(m);else if(l==="event")r.event=m;else if(l==="id")r.id=m;else if(l==="retry"){const f=Number(m);isNaN(f)||(r.retry=f)}}if(!a)return s.length&&(r.data=s.join(`
`)),t(r)}const BS=p({data:i().transform((e,t)=>{try{return JSON.parse(e)}catch(n){return t.addIssue({input:e,code:"custom",message:`malformed json: ${n}`}),Zr}}).pipe(Fv)}),_r=k([hn,ee(e=>e instanceof ReadableStream).transform(e=>new Eu(e,t=>t.data==="[DONE]"?{done:!0}:{value:R(()=>BS).parse(t)?.data}))]),VS=p({hash:i()}),KS=p({deleted:C(!0)}),GS=ae(),HS=p({code:i(),codeVerifier:i().optional(),codeChallengeMethod:d(GS).optional()}).transform(e=>S(e,{codeVerifier:"code_verifier",codeChallengeMethod:"code_challenge_method"})),WS=p({key:i(),user_id:d(i())}).transform(e=>S(e,{user_id:"userId"})),JS=p({total_credits:y(),total_usage:y()}).transform(e=>S(e,{total_credits:"totalCredits",total_usage:"totalUsage"})),YS=p({data:R(()=>JS)}),QS=p({requests:y(),interval:i(),note:i()}),ew=p({label:i(),limit:d(y()),usage:y(),usage_daily:y(),usage_weekly:y(),usage_monthly:y(),byok_usage:y(),byok_usage_daily:y(),byok_usage_weekly:y(),byok_usage_monthly:y(),is_free_tier:B(),is_provisioning_key:B(),limit_remaining:d(y()),limit_reset:d(i()),include_byok_in_limit:B(),expires_at:d(pn({offset:!0}).transform(e=>new Date(e))).optional(),rate_limit:R(()=>QS)}).transform(e=>S(e,{usage_daily:"usageDaily",usage_weekly:"usageWeekly",usage_monthly:"usageMonthly",byok_usage:"byokUsage",byok_usage_daily:"byokUsageDaily",byok_usage_weekly:"byokUsageWeekly",byok_usage_monthly:"byokUsageMonthly",is_free_tier:"isFreeTier",is_provisioning_key:"isProvisioningKey",limit_remaining:"limitRemaining",limit_reset:"limitReset",include_byok_in_limit:"includeByokInLimit",expires_at:"expiresAt",rate_limit:"rateLimit"})),tw=p({data:R(()=>ew)}),nw={Completions:"completions",Embeddings:"embeddings"},ow=p({id:i()}),sw=se(nw),rw=p({id:i(),upstream_id:d(i()),total_cost:y(),cache_discount:d(y()),upstream_inference_cost:d(y()),created_at:i(),model:i(),app_id:d(y()),streamed:d(B()),cancelled:d(B()),provider_name:d(i()),latency:d(y()),moderation_latency:d(y()),generation_time:d(y()),finish_reason:d(i()),tokens_prompt:d(y()),tokens_completion:d(y()),native_tokens_prompt:d(y()),native_tokens_completion:d(y()),native_tokens_completion_images:d(y()),native_tokens_reasoning:d(y()),native_tokens_cached:d(y()),num_media_prompt:d(y()),num_input_audio_prompt:d(y()),num_media_completion:d(y()),num_search_results:d(y()),origin:i(),usage:y(),is_byok:B(),native_finish_reason:d(i()),external_user:d(i()),api_type:d(sw)}).transform(e=>S(e,{upstream_id:"upstreamId",total_cost:"totalCost",cache_discount:"cacheDiscount",upstream_inference_cost:"upstreamInferenceCost",created_at:"createdAt",app_id:"appId",provider_name:"providerName",moderation_latency:"moderationLatency",generation_time:"generationTime",finish_reason:"finishReason",tokens_prompt:"tokensPrompt",tokens_completion:"tokensCompletion",native_tokens_prompt:"nativeTokensPrompt",native_tokens_completion:"nativeTokensCompletion",native_tokens_completion_images:"nativeTokensCompletionImages",native_tokens_reasoning:"nativeTokensReasoning",native_tokens_cached:"nativeTokensCached",num_media_prompt:"numMediaPrompt",num_input_audio_prompt:"numInputAudioPrompt",num_media_completion:"numMediaCompletion",num_search_results:"numSearchResults",is_byok:"isByok",native_finish_reason:"nativeFinishReason",external_user:"externalUser",api_type:"apiType"})),aw=p({data:R(()=>rw)}),iw=p({hash:i()}),uw=p({hash:i(),name:i(),label:i(),disabled:B(),limit:d(y()),limit_remaining:d(y()),limit_reset:d(i()),include_byok_in_limit:B(),usage:y(),usage_daily:y(),usage_weekly:y(),usage_monthly:y(),byok_usage:y(),byok_usage_daily:y(),byok_usage_weekly:y(),byok_usage_monthly:y(),created_at:i(),updated_at:d(i()),expires_at:d(pn({offset:!0}).transform(e=>new Date(e))).optional()}).transform(e=>S(e,{limit_remaining:"limitRemaining",limit_reset:"limitReset",include_byok_in_limit:"includeByokInLimit",usage_daily:"usageDaily",usage_weekly:"usageWeekly",usage_monthly:"usageMonthly",byok_usage:"byokUsage",byok_usage_daily:"byokUsageDaily",byok_usage_weekly:"byokUsageWeekly",byok_usage_monthly:"byokUsageMonthly",created_at:"createdAt",updated_at:"updatedAt",expires_at:"expiresAt"})),cw=p({data:R(()=>uw)}),lw=p({category:i().optional(),supportedParameters:i().optional()}).transform(e=>S(e,{supportedParameters:"supported_parameters"})),dw={Temperature:"temperature",TopP:"top_p",TopK:"top_k",MinP:"min_p",TopA:"top_a",FrequencyPenalty:"frequency_penalty",PresencePenalty:"presence_penalty",RepetitionPenalty:"repetition_penalty",MaxTokens:"max_tokens",LogitBias:"logit_bias",Logprobs:"logprobs",TopLogprobs:"top_logprobs",Seed:"seed",ResponseFormat:"response_format",StructuredOutputs:"structured_outputs",Stop:"stop",Tools:"tools",ToolChoice:"tool_choice",ParallelToolCalls:"parallel_tool_calls",IncludeReasoning:"include_reasoning",Reasoning:"reasoning",WebSearchOptions:"web_search_options",Verbosity:"verbosity"};p({bearer:i()});const pw=ae(),mw=p({author:i(),slug:i(),provider:pw.optional()}),hw=se(dw),fw=p({model:i(),supported_parameters:I(hw)}).transform(e=>S(e,{supported_parameters:"supportedParameters"})),yw=p({data:R(()=>fw)}),gw=p({date:i().optional()}),_w=p({data:I(of)}),bw=p({includeDisabled:i().optional(),offset:i().optional()}).transform(e=>S(e,{includeDisabled:"include_disabled"})),vw=p({hash:i(),name:i(),label:i(),disabled:B(),limit:d(y()),limit_remaining:d(y()),limit_reset:d(i()),include_byok_in_limit:B(),usage:y(),usage_daily:y(),usage_weekly:y(),usage_monthly:y(),byok_usage:y(),byok_usage_daily:y(),byok_usage_weekly:y(),byok_usage_monthly:y(),created_at:i(),updated_at:d(i()),expires_at:d(pn({offset:!0}).transform(e=>new Date(e))).optional()}).transform(e=>S(e,{limit_remaining:"limitRemaining",limit_reset:"limitReset",include_byok_in_limit:"includeByokInLimit",usage_daily:"usageDaily",usage_weekly:"usageWeekly",usage_monthly:"usageMonthly",byok_usage:"byokUsage",byok_usage_daily:"byokUsageDaily",byok_usage_weekly:"byokUsageWeekly",byok_usage_monthly:"byokUsageMonthly",created_at:"createdAt",updated_at:"updatedAt",expires_at:"expiresAt"})),Sw=p({data:I(R(()=>vw))}),ww=p({author:i(),slug:i()}),kw=p({data:Yy}),Rw=p({data:I(Za)}),xw=p({name:i(),slug:i(),privacy_policy_url:d(i()),terms_of_service_url:d(i()).optional(),status_page_url:d(i()).optional()}).transform(e=>S(e,{privacy_policy_url:"privacyPolicyUrl",terms_of_service_url:"termsOfServiceUrl",status_page_url:"statusPageUrl"})),$w=p({data:I(R(()=>xw))}),br=k([iy,ee(e=>e instanceof ReadableStream).transform(e=>new Eu(e,t=>t.data==="[DONE]"?{done:!0}:{value:yy.parse(t)?.data}))]),Cw=ae(),Iw=p({name:i().optional(),disabled:B().optional(),limit:d(y()).optional(),limitReset:d(Cw).optional(),includeByokInLimit:B().optional()}).transform(e=>S(e,{limitReset:"limit_reset",includeByokInLimit:"include_byok_in_limit"})),Tw=p({hash:i(),requestBody:R(()=>Iw)}).transform(e=>S(e,{requestBody:"RequestBody"})),Ow=p({hash:i(),name:i(),label:i(),disabled:B(),limit:d(y()),limit_remaining:d(y()),limit_reset:d(i()),include_byok_in_limit:B(),usage:y(),usage_daily:y(),usage_weekly:y(),usage_monthly:y(),byok_usage:y(),byok_usage_daily:y(),byok_usage_weekly:y(),byok_usage_monthly:y(),created_at:i(),updated_at:d(i()),expires_at:d(pn({offset:!0}).transform(e=>new Date(e))).optional()}).transform(e=>S(e,{limit_remaining:"limitRemaining",limit_reset:"limitReset",include_byok_in_limit:"includeByokInLimit",usage_daily:"usageDaily",usage_weekly:"usageWeekly",usage_monthly:"usageMonthly",byok_usage:"byokUsage",byok_usage_daily:"byokUsageDaily",byok_usage_weekly:"byokUsageWeekly",byok_usage_monthly:"byokUsageMonthly",created_at:"createdAt",updated_at:"updatedAt",expires_at:"expiresAt"})),Aw=p({data:R(()=>Ow)});var vr=function(e,t,n,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Sn=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Kt,kn,Pu;class ge{constructor(t){Kt.set(this,void 0),kn.set(this,void 0),this[Pu]="APIPromise",vr(this,Kt,t instanceof Promise?t:Promise.resolve(t),"f"),vr(this,kn,t instanceof Promise?Sn(this,Kt,"f").then(([n])=>n):Promise.resolve(t[0]),"f")}then(t,n){return Sn(this,Kt,"f").then(t?([o])=>t(o):void 0,n)}catch(t){return Sn(this,kn,"f").catch(t)}finally(t){return Sn(this,kn,"f").finally(t)}$inspect(){return Sn(this,Kt,"f")}}Kt=new WeakMap,kn=new WeakMap,Pu=Symbol.toStringTag;function Ew(e,t,n){return new ge(Pw(e,t,n))}async function Pw(e,t,n){const o=Ie(t,E=>gw.optional().parse(E),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=null,a=le("/activity")(),u=Un({date:s?.date}),c=new Headers(ye({Accept:"application/json"})),l=await ke(e._options.apiKey),m=l==null?{}:{apiKey:l},f=we(m),_={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"getUserActivity",oAuth2Scopes:null,resolvedSecurity:f,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"GET",baseURL:n?.serverURL,path:a,headers:c,query:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["400","401","403","4XX","500","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,_w),A(400,Ye),A(401,qe),A(403,$s),A(500,Se),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}class qw extends Pe{async getUserActivity(t,n){return ue(Ew(this,t,n))}}function Mw(e,t,n){return new ge(zw(e,t,n))}async function zw(e,t,n){const o=Ie(t,x=>US.parse(x),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=it("body",s,{explode:!0}),a=le("/keys")(),u=new Headers(ye({"Content-Type":"application/json",Accept:"application/json"})),c=await ke(e._options.apiKey),l=c==null?{}:{apiKey:c},m=we(l),f={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"createKeys",oAuth2Scopes:null,resolvedSecurity:m,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},_=e._createRequest(f,{security:m,method:"POST",baseURL:n?.serverURL,path:a,headers:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!_.ok)return[_,{status:"invalid"}];const g=_.value,h=await e._do(g,{context:f,errorCodes:["400","401","429","4XX","500","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return[h,{status:"request-error",request:g}];const b=h.value,v={HttpMeta:{Response:b,Request:g}},[w]=await fe(he(201,DS),A(400,Ye),A(401,qe),A(429,ut),A(500,Se),V("4XX"),V("5XX"))(b,g,{extraFields:v});return w.ok?[w,{status:"complete",request:g,response:b}]:[w,{status:"complete",request:g,response:b}]}function jw(e,t,n){return new ge(Nw(e,t,n))}async function Nw(e,t,n){const o=Ie(t,E=>VS.parse(E),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=null,a={hash:It("hash",s.hash,{explode:!1,charEncoding:"percent"})},u=le("/keys/{hash}")(a),c=new Headers(ye({Accept:"application/json"})),l=await ke(e._options.apiKey),m=l==null?{}:{apiKey:l},f=we(m),_={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"deleteKeys",oAuth2Scopes:null,resolvedSecurity:f,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"DELETE",baseURL:n?.serverURL,path:u,headers:c,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["401","404","429","4XX","500","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,KS),A(401,qe),A(404,vt),A(429,ut),A(500,Se),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}function Uw(e,t,n){return new ge(Lw(e,t,n))}async function Lw(e,t,n){const o=Ie(t,E=>iw.parse(E),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=null,a={hash:It("hash",s.hash,{explode:!1,charEncoding:"percent"})},u=le("/keys/{hash}")(a),c=new Headers(ye({Accept:"application/json"})),l=await ke(e._options.apiKey),m=l==null?{}:{apiKey:l},f=we(m),_={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"getKey",oAuth2Scopes:null,resolvedSecurity:f,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"GET",baseURL:n?.serverURL,path:u,headers:c,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["401","404","429","4XX","500","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,cw),A(401,qe),A(404,vt),A(429,ut),A(500,Se),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}function Dw(e,t){return new ge(Zw(e,t))}async function Zw(e,t){const n=le("/key")(),o=new Headers(ye({Accept:"application/json"})),s=await ke(e._options.apiKey),r=s==null?{}:{apiKey:s},a=we(r),u={options:e._options,baseURL:t?.serverURL??e._baseURL??"",operationID:"getCurrentKey",oAuth2Scopes:null,resolvedSecurity:a,securitySource:e._options.apiKey,retryConfig:t?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:t?.retryCodes||["429","500","502","503","504"]},c=e._createRequest(u,{security:a,method:"GET",baseURL:t?.serverURL,path:n,headers:o,userAgent:e._options.userAgent,timeoutMs:t?.timeoutMs||e._options.timeoutMs||-1},t);if(!c.ok)return[c,{status:"invalid"}];const l=c.value,m=await e._do(l,{context:u,errorCodes:["401","4XX","500","5XX"],retryConfig:u.retryConfig,retryCodes:u.retryCodes});if(!m.ok)return[m,{status:"request-error",request:l}];const f=m.value,_={HttpMeta:{Response:f,Request:l}},[g]=await fe(he(200,tw),A(401,qe),A(500,Se),V("4XX"),V("5XX"))(f,l,{extraFields:_});return g.ok?[g,{status:"complete",request:l,response:f}]:[g,{status:"complete",request:l,response:f}]}function Fw(e,t,n){return new ge(Xw(e,t,n))}async function Xw(e,t,n){const o=Ie(t,E=>bw.optional().parse(E),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=null,a=le("/keys")(),u=Un({include_disabled:s?.include_disabled,offset:s?.offset}),c=new Headers(ye({Accept:"application/json"})),l=await ke(e._options.apiKey),m=l==null?{}:{apiKey:l},f=we(m),_={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"list",oAuth2Scopes:null,resolvedSecurity:f,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"GET",baseURL:n?.serverURL,path:a,headers:c,query:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["401","429","4XX","500","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,Sw),A(401,qe),A(429,ut),A(500,Se),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}function Bw(e,t,n){return new ge(Vw(e,t,n))}async function Vw(e,t,n){const o=Ie(t,E=>Tw.parse(E),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=it("body",s.RequestBody,{explode:!0}),a={hash:It("hash",s.hash,{explode:!1,charEncoding:"percent"})},u=le("/keys/{hash}")(a),c=new Headers(ye({"Content-Type":"application/json",Accept:"application/json"})),l=await ke(e._options.apiKey),m=l==null?{}:{apiKey:l},f=we(m),_={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"updateKeys",oAuth2Scopes:null,resolvedSecurity:f,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"PATCH",baseURL:n?.serverURL,path:u,headers:c,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["400","401","404","429","4XX","500","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,Aw),A(400,Ye),A(401,qe),A(404,vt),A(429,ut),A(500,Se),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}class Kw extends Pe{async list(t,n){return ue(Fw(this,t,n))}async create(t,n){return ue(Mw(this,t,n))}async update(t,n){return ue(Bw(this,t,n))}async delete(t,n){return ue(jw(this,t,n))}async get(t,n){return ue(Uw(this,t,n))}async getCurrentKeyMetadata(t){return ue(Dw(this,t))}}function Zo(e,t,n){return new ge(Gw(e,t,n))}async function Gw(e,t,n){const o=Ie(t,x=>xv.parse(x),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=it("body",s,{explode:!0}),a=le("/responses")(),u=new Headers(ye({"Content-Type":"application/json",Accept:t?.stream?"text/event-stream":"application/json"})),c=await ke(e._options.apiKey),l=c==null?{}:{apiKey:c},m=we(l),f={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"createResponses",oAuth2Scopes:null,resolvedSecurity:m,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},_=e._createRequest(f,{security:m,method:"POST",baseURL:n?.serverURL,path:a,headers:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!_.ok)return[_,{status:"invalid"}];const g=_.value,h=await e._do(g,{context:f,errorCodes:["400","401","402","404","408","413","422","429","4XX","500","502","503","524","529","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return[h,{status:"request-error",request:g}];const b=h.value,v={HttpMeta:{Response:b,Request:g}},[w]=await fe(he(200,_r),xa(200,_r),A(400,Ye),A(401,qe),A(402,Cs),A(404,vt),A(408,lS),A(413,aS),A(422,fS),A(429,ut),A(500,Se),A(502,Rs),A(503,Iu),A(524,xs),A(529,Is),V("4XX"),V("5XX"))(b,g,{extraFields:v});return w.ok?[w,{status:"complete",request:g,response:b}]:[w,{status:"complete",request:g,response:b}]}class Hw extends Pe{async send(t,n){return ue(Zo(this,t,n))}}class Ww extends Pe{get responses(){return this._responses??(this._responses=new Hw(this._options))}}function Jw(e,t,n){return new ge(Yw(e,t,n))}async function Yw(e,t,n){const o=Ie(t,x=>ny.parse(x),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=it("body",s,{explode:!0}),a=le("/chat/completions")(),u=new Headers(ye({"Content-Type":"application/json",Accept:t?.stream?"text/event-stream":"application/json"})),c=await ke(e._options.apiKey),l=c==null?{}:{apiKey:c},m=we(l),f={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"sendChatCompletionRequest",oAuth2Scopes:null,resolvedSecurity:m,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},_=e._createRequest(f,{security:m,method:"POST",baseURL:n?.serverURL,path:a,headers:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!_.ok)return[_,{status:"invalid"}];const g=_.value,h=await e._do(g,{context:f,errorCodes:["400","401","429","4XX","500","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return[h,{status:"request-error",request:g}];const b=h.value,v={HttpMeta:{Response:b,Request:g}},[w]=await fe(he(200,br),xa(200,br),A([400,401,429],uo),A(500,uo),V("4XX"),V("5XX"))(b,g,{extraFields:v});return w.ok?[w,{status:"complete",request:g,response:b}]:[w,{status:"complete",request:g,response:b}]}class Qw extends Pe{async send(t,n){return ue(Jw(this,t,n))}}function ek(e,t,n){return new ge(tk(e,t,n))}async function tk(e,t,n){const o=Ie(t,x=>wy.parse(x),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=it("body",s,{explode:!0}),a=le("/completions")(),u=new Headers(ye({"Content-Type":"application/json",Accept:"application/json"})),c=await ke(e._options.apiKey),l=c==null?{}:{apiKey:c},m=we(l),f={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"createCompletions",oAuth2Scopes:null,resolvedSecurity:m,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},_=e._createRequest(f,{security:m,method:"POST",baseURL:n?.serverURL,path:a,headers:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!_.ok)return[_,{status:"invalid"}];const g=_.value,h=await e._do(g,{context:f,errorCodes:["400","401","429","4XX","500","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return[h,{status:"request-error",request:g}];const b=h.value,v={HttpMeta:{Response:b,Request:g}},[w]=await fe(he(200,Ry),A([400,401,429],uo),A(500,uo),V("4XX"),V("5XX"))(b,g,{extraFields:v});return w.ok?[w,{status:"complete",request:g,response:b}]:[w,{status:"complete",request:g,response:b}]}class nk extends Pe{async generate(t,n){return ue(ek(this,t,n))}}function ok(e,t,n,o){return new ge(sk(e,t,n,o))}async function sk(e,t,n,o){const s=Ie(n,w=>$y.parse(w),"Input validation failed");if(!s.ok)return[s,{status:"invalid"}];const r=s.value,a=it("body",r,{explode:!0}),u=le("/credits/coinbase")(),c=new Headers(ye({"Content-Type":"application/json",Accept:"application/json"})),l=xo([{fieldName:"Authorization",type:"http:bearer",value:t?.bearer}]),m={options:e._options,baseURL:o?.serverURL??e._baseURL??"",operationID:"createCoinbaseCharge",oAuth2Scopes:null,resolvedSecurity:l,securitySource:t,retryConfig:o?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:o?.retryCodes||["429","500","502","503","504"]},f=e._createRequest(m,{security:l,method:"POST",baseURL:o?.serverURL,path:u,headers:c,body:a,userAgent:e._options.userAgent,timeoutMs:o?.timeoutMs||e._options.timeoutMs||-1},o);if(!f.ok)return[f,{status:"invalid"}];const _=f.value,g=await e._do(_,{context:m,errorCodes:["400","401","429","4XX","500","5XX"],retryConfig:m.retryConfig,retryCodes:m.retryCodes});if(!g.ok)return[g,{status:"request-error",request:_}];const h=g.value,b={HttpMeta:{Response:h,Request:_}},[v]=await fe(he(200,xS),A(400,Ye),A(401,qe),A(429,ut),A(500,Se),V("4XX"),V("5XX"))(h,_,{extraFields:b});return v.ok?[v,{status:"complete",request:_,response:h}]:[v,{status:"complete",request:_,response:h}]}function rk(e,t){return new ge(ak(e,t))}async function ak(e,t){const n=le("/credits")(),o=new Headers(ye({Accept:"application/json"})),s=await ke(e._options.apiKey),r=s==null?{}:{apiKey:s},a=we(r),u={options:e._options,baseURL:t?.serverURL??e._baseURL??"",operationID:"getCredits",oAuth2Scopes:null,resolvedSecurity:a,securitySource:e._options.apiKey,retryConfig:t?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:t?.retryCodes||["429","500","502","503","504"]},c=e._createRequest(u,{security:a,method:"GET",baseURL:t?.serverURL,path:n,headers:o,userAgent:e._options.userAgent,timeoutMs:t?.timeoutMs||e._options.timeoutMs||-1},t);if(!c.ok)return[c,{status:"invalid"}];const l=c.value,m=await e._do(l,{context:u,errorCodes:["401","403","4XX","500","5XX"],retryConfig:u.retryConfig,retryCodes:u.retryCodes});if(!m.ok)return[m,{status:"request-error",request:l}];const f=m.value,_={HttpMeta:{Response:f,Request:l}},[g]=await fe(he(200,YS),A(401,qe),A(403,$s),A(500,Se),V("4XX"),V("5XX"))(f,l,{extraFields:_});return g.ok?[g,{status:"complete",request:l,response:f}]:[g,{status:"complete",request:l,response:f}]}class ik extends Pe{async getCredits(t){return ue(rk(this,t))}async createCoinbaseCharge(t,n,o){return ue(ok(this,t,n,o))}}function uk(e,t,n){return new ge(ck(e,t,n))}async function ck(e,t,n){const o=Ie(t,x=>ES.parse(x),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=it("body",s,{explode:!0}),a=le("/embeddings")(),u=new Headers(ye({"Content-Type":"application/json",Accept:"application/json"})),c=await ke(e._options.apiKey),l=c==null?{}:{apiKey:c},m=we(l),f={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"createEmbeddings",oAuth2Scopes:null,resolvedSecurity:m,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},_=e._createRequest(f,{security:m,method:"POST",baseURL:n?.serverURL,path:a,headers:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!_.ok)return[_,{status:"invalid"}];const g=_.value,h=await e._do(g,{context:f,errorCodes:["400","401","402","404","429","4XX","500","502","503","524","529","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return[h,{status:"request-error",request:g}];const b=h.value,v={HttpMeta:{Response:b,Request:g}},[w]=await fe(he(200,jS),A(400,Ye),A(401,qe),A(402,Cs),A(404,vt),A(429,ut),A(500,Se),A(502,Rs),A(503,Iu),A(524,xs),A(529,Is),V("4XX"),V("5XX"))(b,g,{extraFields:v});return w.ok?[w,{status:"complete",request:g,response:b}]:[w,{status:"complete",request:g,response:b}]}function lk(e,t){return new ge(dk(e,t))}async function dk(e,t){const n=le("/embeddings/models")(),o=new Headers(ye({Accept:"application/json"})),s=await ke(e._options.apiKey),r=s==null?{}:{apiKey:s},a=we(r),u={options:e._options,baseURL:t?.serverURL??e._baseURL??"",operationID:"listEmbeddingsModels",oAuth2Scopes:null,resolvedSecurity:a,securitySource:e._options.apiKey,retryConfig:t?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:t?.retryCodes||["429","500","502","503","504"]},c=e._createRequest(u,{security:a,method:"GET",baseURL:t?.serverURL,path:n,headers:o,userAgent:e._options.userAgent,timeoutMs:t?.timeoutMs||e._options.timeoutMs||-1},t);if(!c.ok)return[c,{status:"invalid"}];const l=c.value,m=await e._do(l,{context:u,errorCodes:["400","4XX","500","5XX"],retryConfig:u.retryConfig,retryCodes:u.retryCodes});if(!m.ok)return[m,{status:"request-error",request:l}];const f=m.value,_={HttpMeta:{Response:f,Request:l}},[g]=await fe(he(200,ls),A(400,Ye),A(500,Se),V("4XX"),V("5XX"))(f,l,{extraFields:_});return g.ok?[g,{status:"complete",request:l,response:f}]:[g,{status:"complete",request:l,response:f}]}class pk extends Pe{async generate(t,n){return ue(uk(this,t,n))}async listModels(t){return ue(lk(this,t))}}function mk(e,t,n){return new ge(hk(e,t,n))}async function hk(e,t,n){const o=Ie(t,E=>ww.parse(E),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=null,a={author:It("author",s.author,{explode:!1,charEncoding:"percent"}),slug:It("slug",s.slug,{explode:!1,charEncoding:"percent"})},u=le("/models/{author}/{slug}/endpoints")(a),c=new Headers(ye({Accept:"application/json"})),l=await ke(e._options.apiKey),m=l==null?{}:{apiKey:l},f=we(m),_={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"listEndpoints",oAuth2Scopes:null,resolvedSecurity:f,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"GET",baseURL:n?.serverURL,path:u,headers:c,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["404","4XX","500","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,kw),A(404,vt),A(500,Se),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}function fk(e,t){return new ge(yk(e,t))}async function yk(e,t){const n=le("/endpoints/zdr")(),o=new Headers(ye({Accept:"application/json"})),s=await ke(e._options.apiKey),r=s==null?{}:{apiKey:s},a=we(r),u={options:e._options,baseURL:t?.serverURL??e._baseURL??"",operationID:"listEndpointsZdr",oAuth2Scopes:null,resolvedSecurity:a,securitySource:e._options.apiKey,retryConfig:t?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:t?.retryCodes||["429","500","502","503","504"]},c=e._createRequest(u,{security:a,method:"GET",baseURL:t?.serverURL,path:n,headers:o,userAgent:e._options.userAgent,timeoutMs:t?.timeoutMs||e._options.timeoutMs||-1},t);if(!c.ok)return[c,{status:"invalid"}];const l=c.value,m=await e._do(l,{context:u,errorCodes:["4XX","500","5XX"],retryConfig:u.retryConfig,retryCodes:u.retryCodes});if(!m.ok)return[m,{status:"request-error",request:l}];const f=m.value,_={HttpMeta:{Response:f,Request:l}},[g]=await fe(he(200,Rw),A(500,Se),V("4XX"),V("5XX"))(f,l,{extraFields:_});return g.ok?[g,{status:"complete",request:l,response:f}]:[g,{status:"complete",request:l,response:f}]}class gk extends Pe{async list(t,n){return ue(mk(this,t,n))}async listZdrEndpoints(t){return ue(fk(this,t))}}function _k(e,t,n){return new ge(bk(e,t,n))}async function bk(e,t,n){const o=Ie(t,E=>ow.parse(E),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=null,a=le("/generation")(),u=Un({id:s.id}),c=new Headers(ye({Accept:"application/json"})),l=await ke(e._options.apiKey),m=l==null?{}:{apiKey:l},f=we(m),_={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"getGeneration",oAuth2Scopes:null,resolvedSecurity:f,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"GET",baseURL:n?.serverURL,path:a,headers:c,query:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["401","402","404","429","4XX","500","502","524","529","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,aw),A(401,qe),A(402,Cs),A(404,vt),A(429,ut),A(500,Se),A(502,Rs),A(524,xs),A(529,Is),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}class vk extends Pe{async getGeneration(t,n){return ue(_k(this,t,n))}}function Sk(e,t){return new ge(wk(e,t))}async function wk(e,t){const n=le("/models/count")(),o=new Headers(ye({Accept:"application/json"})),s=await ke(e._options.apiKey),r=s==null?{}:{apiKey:s},a=we(r),u={options:e._options,baseURL:t?.serverURL??e._baseURL??"",operationID:"listModelsCount",oAuth2Scopes:null,resolvedSecurity:a,securitySource:e._options.apiKey,retryConfig:t?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:t?.retryCodes||["429","500","502","503","504"]},c=e._createRequest(u,{security:a,method:"GET",baseURL:t?.serverURL,path:n,headers:o,userAgent:e._options.userAgent,timeoutMs:t?.timeoutMs||e._options.timeoutMs||-1},t);if(!c.ok)return[c,{status:"invalid"}];const l=c.value,m=await e._do(l,{context:u,errorCodes:["4XX","500","5XX"],retryConfig:u.retryConfig,retryCodes:u.retryCodes});if(!m.ok)return[m,{status:"request-error",request:l}];const f=m.value,_={HttpMeta:{Response:f,Request:l}},[g]=await fe(he(200,cg),A(500,Se),V("4XX"),V("5XX"))(f,l,{extraFields:_});return g.ok?[g,{status:"complete",request:l,response:f}]:[g,{status:"complete",request:l,response:f}]}function kk(e,t,n){return new ge(Rk(e,t,n))}async function Rk(e,t,n){const o=Ie(t,E=>lw.optional().parse(E),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=null,a=le("/models")(),u=Un({category:s?.category,supported_parameters:s?.supported_parameters}),c=new Headers(ye({Accept:"application/json"})),l=await ke(e._options.apiKey),m=l==null?{}:{apiKey:l},f=we(m),_={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"getModels",oAuth2Scopes:null,resolvedSecurity:f,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"GET",baseURL:n?.serverURL,path:a,headers:c,query:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["400","4XX","500","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,ls),A(400,Ye),A(500,Se),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}function xk(e,t,n){return new ge($k(e,t,n))}async function $k(e,t,n){const o=le("/models/user")(),s=new Headers(ye({Accept:"application/json"})),r=xo([{fieldName:"Authorization",type:"http:bearer",value:t?.bearer}]),a={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"listModelsUser",oAuth2Scopes:null,resolvedSecurity:r,securitySource:t,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},u=e._createRequest(a,{security:r,method:"GET",baseURL:n?.serverURL,path:o,headers:s,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!u.ok)return[u,{status:"invalid"}];const c=u.value,l=await e._do(c,{context:a,errorCodes:["401","4XX","500","5XX"],retryConfig:a.retryConfig,retryCodes:a.retryCodes});if(!l.ok)return[l,{status:"request-error",request:c}];const m=l.value,f={HttpMeta:{Response:m,Request:c}},[_]=await fe(he(200,ls),A(401,qe),A(500,Se),V("4XX"),V("5XX"))(m,c,{extraFields:f});return _.ok?[_,{status:"complete",request:c,response:m}]:[_,{status:"complete",request:c,response:m}]}class Ck extends Pe{async count(t){return ue(Sk(this,t))}async list(t,n){return ue(kk(this,t,n))}async listForUser(t,n){return ue(xk(this,t,n))}}function Ik(e,t,n){return new ge(Tk(e,t,n))}async function Tk(e,t,n){const o=Ie(t,x=>gS.parse(x),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=it("body",s,{explode:!0}),a=le("/auth/keys/code")(),u=new Headers(ye({"Content-Type":"application/json",Accept:"application/json"})),c=await ke(e._options.apiKey),l=c==null?{}:{apiKey:c},m=we(l),f={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"createAuthKeysCode",oAuth2Scopes:null,resolvedSecurity:m,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},_=e._createRequest(f,{security:m,method:"POST",baseURL:n?.serverURL,path:a,headers:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!_.ok)return[_,{status:"invalid"}];const g=_.value,h=await e._do(g,{context:f,errorCodes:["400","401","4XX","500","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return[h,{status:"request-error",request:g}];const b=h.value,v={HttpMeta:{Response:b,Request:g}},[w]=await fe(he(200,bS),A(400,Ye),A(401,qe),A(500,Se),V("4XX"),V("5XX"))(b,g,{extraFields:v});return w.ok?[w,{status:"complete",request:g,response:b}]:[w,{status:"complete",request:g,response:b}]}function Ok(e,t,n){return new ge(Ak(e,t,n))}async function Ak(e,t,n){const o=Ie(t,x=>HS.parse(x),"Input validation failed");if(!o.ok)return[o,{status:"invalid"}];const s=o.value,r=it("body",s,{explode:!0}),a=le("/auth/keys")(),u=new Headers(ye({"Content-Type":"application/json",Accept:"application/json"})),c=await ke(e._options.apiKey),l=c==null?{}:{apiKey:c},m=we(l),f={options:e._options,baseURL:n?.serverURL??e._baseURL??"",operationID:"exchangeAuthCodeForAPIKey",oAuth2Scopes:null,resolvedSecurity:m,securitySource:e._options.apiKey,retryConfig:n?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:n?.retryCodes||["429","500","502","503","504"]},_=e._createRequest(f,{security:m,method:"POST",baseURL:n?.serverURL,path:a,headers:u,body:r,userAgent:e._options.userAgent,timeoutMs:n?.timeoutMs||e._options.timeoutMs||-1},n);if(!_.ok)return[_,{status:"invalid"}];const g=_.value,h=await e._do(g,{context:f,errorCodes:["400","403","4XX","500","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return[h,{status:"request-error",request:g}];const b=h.value,v={HttpMeta:{Response:b,Request:g}},[w]=await fe(he(200,WS),A(400,Ye),A(403,$s),A(500,Se),V("4XX"),V("5XX"))(b,g,{extraFields:v});return w.ok?[w,{status:"complete",request:g,response:b}]:[w,{status:"complete",request:g,response:b}]}var Q;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const r={};for(const a of s)r[a]=a;return r},e.getValidEnumValues=s=>{const r=e.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),a={};for(const u of r)a[u]=s[u];return e.objectValues(a)},e.objectValues=s=>e.objectKeys(s).map(function(r){return s[r]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const r=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&r.push(a);return r},e.find=(s,r)=>{for(const a of s)if(r(a))return a},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function o(s,r=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(r)}e.joinValues=o,e.jsonStringifyReplacer=(s,r)=>typeof r=="bigint"?r.toString():r})(Q||(Q={}));var Fo;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Fo||(Fo={}));const q=Q.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),nt=e=>{switch(typeof e){case"undefined":return q.undefined;case"string":return q.string;case"number":return Number.isNaN(e)?q.nan:q.number;case"boolean":return q.boolean;case"function":return q.function;case"bigint":return q.bigint;case"symbol":return q.symbol;case"object":return Array.isArray(e)?q.array:e===null?q.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?q.promise:typeof Map<"u"&&e instanceof Map?q.map:typeof Set<"u"&&e instanceof Set?q.set:typeof Date<"u"&&e instanceof Date?q.date:q.object;default:return q.unknown}},T=Q.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ek=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ne extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(r){return r.message},o={_errors:[]},s=r=>{for(const a of r.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)o._errors.push(n(a));else{let u=o,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(u[l]=u[l]||{_errors:[]},u[l]._errors.push(n(a))):u[l]=u[l]||{_errors:[]},u=u[l],c++}}};return s(this),o}static assert(t){if(!(t instanceof Ne))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Q.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n=Object.create(null),o=[];for(const s of this.issues)if(s.path.length>0){const r=s.path[0];n[r]=n[r]||[],n[r].push(t(s))}else o.push(t(s));return{formErrors:o,fieldErrors:n}}get formErrors(){return this.flatten()}}Ne.create=e=>new Ne(e);const un=(e,t)=>{let n;switch(e.code){case T.invalid_type:e.received===q.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case T.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Q.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:n=`Unrecognized key(s) in object: ${Q.joinValues(e.keys,", ")}`;break;case T.invalid_union:n="Invalid input";break;case T.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Q.joinValues(e.options)}`;break;case T.invalid_enum_value:n=`Invalid enum value. Expected ${Q.joinValues(e.options)}, received '${e.received}'`;break;case T.invalid_arguments:n="Invalid function arguments";break;case T.invalid_return_type:n="Invalid function return type";break;case T.invalid_date:n="Invalid date";break;case T.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Q.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case T.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case T.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case T.custom:n="Invalid input";break;case T.invalid_intersection_types:n="Intersection results could not be merged";break;case T.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case T.not_finite:n="Number must be finite";break;default:n=t.defaultError,Q.assertNever(e)}return{message:n}};let qu=un;function Pk(e){qu=e}function co(){return qu}const lo=e=>{const{data:t,path:n,errorMaps:o,issueData:s}=e,r=[...n,...s.path||[]],a={...s,path:r};if(s.message!==void 0)return{...s,path:r,message:s.message};let u="";const c=o.filter(l=>!!l).slice().reverse();for(const l of c)u=l(a,{data:t,defaultError:u}).message;return{...s,path:r,message:u}},qk=[];function P(e,t){const n=co(),o=lo({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===un?void 0:un].filter(s=>!!s)});e.common.issues.push(o)}class Oe{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const o=[];for(const s of n){if(s.status==="aborted")return F;s.status==="dirty"&&t.dirty(),o.push(s.value)}return{status:t.value,value:o}}static async mergeObjectAsync(t,n){const o=[];for(const s of n){const r=await s.key,a=await s.value;o.push({key:r,value:a})}return Oe.mergeObjectSync(t,o)}static mergeObjectSync(t,n){const o={};for(const s of n){const{key:r,value:a}=s;if(r.status==="aborted"||a.status==="aborted")return F;r.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),r.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(o[r.value]=a.value)}return{status:t.value,value:o}}}const F=Object.freeze({status:"aborted"}),Jt=e=>({status:"dirty",value:e}),Ee=e=>({status:"valid",value:e}),Xo=e=>e.status==="aborted",Bo=e=>e.status==="dirty",Tt=e=>e.status==="valid",xn=e=>typeof Promise<"u"&&e instanceof Promise;var N;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(N||(N={}));class We{constructor(t,n,o,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=o,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sr=(e,t)=>{if(Tt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ne(e.common.issues);return this._error=n,this._error}}};function G(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:o,description:s}=e;if(t&&(n||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(a,u)=>{const{message:c}=e;return a.code==="invalid_enum_value"?{message:c??u.defaultError}:typeof u.data>"u"?{message:c??o??u.defaultError}:a.code!=="invalid_type"?{message:u.defaultError}:{message:c??n??u.defaultError}},description:s}}class W{get description(){return this._def.description}_getType(t){return nt(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:nt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Oe,ctx:{common:t.parent.common,data:t.data,parsedType:nt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(xn(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const o=this.safeParse(t,n);if(o.success)return o.data;throw o.error}safeParse(t,n){const o={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nt(t)},s=this._parseSync({data:t,path:o.path,parent:o});return Sr(o,s)}"~validate"(t){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nt(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:n});return Tt(o)?{value:o.value}:{issues:n.common.issues}}catch(o){o?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(o=>Tt(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(t,n){const o=await this.safeParseAsync(t,n);if(o.success)return o.data;throw o.error}async safeParseAsync(t,n){const o={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nt(t)},s=this._parse({data:t,path:o.path,parent:o}),r=await(xn(s)?s:Promise.resolve(s));return Sr(o,r)}refine(t,n){const o=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,r)=>{const a=t(s),u=()=>r.addIssue({code:T.custom,...o(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(u(),!1)):a?!0:(u(),!1)})}refinement(t,n){return this._refinement((o,s)=>t(o)?!0:(s.addIssue(typeof n=="function"?n(o,s):n),!1))}_refinement(t){return new Ve({schema:this,typeName:X.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return He.create(this,this._def)}nullable(){return yt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Be.create(this)}promise(){return ln.create(this,this._def)}or(t){return Tn.create([this,t],this._def)}and(t){return On.create(this,t,this._def)}transform(t){return new Ve({...G(this._def),schema:this,typeName:X.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Mn({...G(this._def),innerType:this,defaultValue:n,typeName:X.ZodDefault})}brand(){return new Ts({typeName:X.ZodBranded,type:this,...G(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new zn({...G(this._def),innerType:this,catchValue:n,typeName:X.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Xn.create(this,t)}readonly(){return jn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Mk=/^c[^\s-]{8,}$/i,zk=/^[0-9a-z]+$/,jk=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Nk=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Uk=/^[a-z0-9_-]{21}$/i,Lk=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Dk=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zk=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Fk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qo;const Xk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Bk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Vk=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Kk=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gk=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Hk=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Mu="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Wk=new RegExp(`^${Mu}$`);function zu(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function Jk(e){return new RegExp(`^${zu(e)}$`)}function ju(e){let t=`${Mu}T${zu(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Yk(e,t){return!!((t==="v4"||!t)&&Xk.test(e)||(t==="v6"||!t)&&Vk.test(e))}function Qk(e,t){if(!Lk.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const o=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(o));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function eR(e,t){return!!((t==="v4"||!t)&&Bk.test(e)||(t==="v6"||!t)&&Kk.test(e))}class Xe extends W{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==q.string){const r=this._getOrReturnCtx(t);return P(r,{code:T.invalid_type,expected:q.string,received:r.parsedType}),F}const o=new Oe;let s;for(const r of this._def.checks)if(r.kind==="min")t.data.length<r.value&&(s=this._getOrReturnCtx(t,s),P(s,{code:T.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),o.dirty());else if(r.kind==="max")t.data.length>r.value&&(s=this._getOrReturnCtx(t,s),P(s,{code:T.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),o.dirty());else if(r.kind==="length"){const a=t.data.length>r.value,u=t.data.length<r.value;(a||u)&&(s=this._getOrReturnCtx(t,s),a?P(s,{code:T.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):u&&P(s,{code:T.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),o.dirty())}else if(r.kind==="email")Zk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"email",code:T.invalid_string,message:r.message}),o.dirty());else if(r.kind==="emoji")qo||(qo=new RegExp(Fk,"u")),qo.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"emoji",code:T.invalid_string,message:r.message}),o.dirty());else if(r.kind==="uuid")Nk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"uuid",code:T.invalid_string,message:r.message}),o.dirty());else if(r.kind==="nanoid")Uk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"nanoid",code:T.invalid_string,message:r.message}),o.dirty());else if(r.kind==="cuid")Mk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"cuid",code:T.invalid_string,message:r.message}),o.dirty());else if(r.kind==="cuid2")zk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"cuid2",code:T.invalid_string,message:r.message}),o.dirty());else if(r.kind==="ulid")jk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"ulid",code:T.invalid_string,message:r.message}),o.dirty());else if(r.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),P(s,{validation:"url",code:T.invalid_string,message:r.message}),o.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"regex",code:T.invalid_string,message:r.message}),o.dirty())):r.kind==="trim"?t.data=t.data.trim():r.kind==="includes"?t.data.includes(r.value,r.position)||(s=this._getOrReturnCtx(t,s),P(s,{code:T.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),o.dirty()):r.kind==="toLowerCase"?t.data=t.data.toLowerCase():r.kind==="toUpperCase"?t.data=t.data.toUpperCase():r.kind==="startsWith"?t.data.startsWith(r.value)||(s=this._getOrReturnCtx(t,s),P(s,{code:T.invalid_string,validation:{startsWith:r.value},message:r.message}),o.dirty()):r.kind==="endsWith"?t.data.endsWith(r.value)||(s=this._getOrReturnCtx(t,s),P(s,{code:T.invalid_string,validation:{endsWith:r.value},message:r.message}),o.dirty()):r.kind==="datetime"?ju(r).test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{code:T.invalid_string,validation:"datetime",message:r.message}),o.dirty()):r.kind==="date"?Wk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{code:T.invalid_string,validation:"date",message:r.message}),o.dirty()):r.kind==="time"?Jk(r).test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{code:T.invalid_string,validation:"time",message:r.message}),o.dirty()):r.kind==="duration"?Dk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"duration",code:T.invalid_string,message:r.message}),o.dirty()):r.kind==="ip"?Yk(t.data,r.version)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"ip",code:T.invalid_string,message:r.message}),o.dirty()):r.kind==="jwt"?Qk(t.data,r.alg)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"jwt",code:T.invalid_string,message:r.message}),o.dirty()):r.kind==="cidr"?eR(t.data,r.version)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"cidr",code:T.invalid_string,message:r.message}),o.dirty()):r.kind==="base64"?Gk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"base64",code:T.invalid_string,message:r.message}),o.dirty()):r.kind==="base64url"?Hk.test(t.data)||(s=this._getOrReturnCtx(t,s),P(s,{validation:"base64url",code:T.invalid_string,message:r.message}),o.dirty()):Q.assertNever(r);return{status:o.value,value:t.data}}_regex(t,n,o){return this.refinement(s=>t.test(s),{validation:n,code:T.invalid_string,...N.errToObj(o)})}_addCheck(t){return new Xe({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...N.errToObj(t)})}url(t){return this._addCheck({kind:"url",...N.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...N.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...N.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...N.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...N.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...N.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...N.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...N.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...N.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...N.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...N.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...N.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...N.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...N.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...N.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...N.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n?.position,...N.errToObj(n?.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...N.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...N.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...N.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...N.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...N.errToObj(n)})}nonempty(t){return this.min(1,N.errToObj(t))}trim(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Xe.create=e=>new Xe({checks:[],typeName:X.ZodString,coerce:e?.coerce??!1,...G(e)});function tR(e,t){const n=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,s=n>o?n:o,r=Number.parseInt(e.toFixed(s).replace(".","")),a=Number.parseInt(t.toFixed(s).replace(".",""));return r%a/10**s}class mt extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==q.number){const r=this._getOrReturnCtx(t);return P(r,{code:T.invalid_type,expected:q.number,received:r.parsedType}),F}let o;const s=new Oe;for(const r of this._def.checks)r.kind==="int"?Q.isInteger(t.data)||(o=this._getOrReturnCtx(t,o),P(o,{code:T.invalid_type,expected:"integer",received:"float",message:r.message}),s.dirty()):r.kind==="min"?(r.inclusive?t.data<r.value:t.data<=r.value)&&(o=this._getOrReturnCtx(t,o),P(o,{code:T.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?t.data>r.value:t.data>=r.value)&&(o=this._getOrReturnCtx(t,o),P(o,{code:T.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="multipleOf"?tR(t.data,r.value)!==0&&(o=this._getOrReturnCtx(t,o),P(o,{code:T.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):r.kind==="finite"?Number.isFinite(t.data)||(o=this._getOrReturnCtx(t,o),P(o,{code:T.not_finite,message:r.message}),s.dirty()):Q.assertNever(r);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,N.toString(n))}gt(t,n){return this.setLimit("min",t,!1,N.toString(n))}lte(t,n){return this.setLimit("max",t,!0,N.toString(n))}lt(t,n){return this.setLimit("max",t,!1,N.toString(n))}setLimit(t,n,o,s){return new mt({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:o,message:N.toString(s)}]})}_addCheck(t){return new mt({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:N.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:N.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:N.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:N.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:N.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:N.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:N.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:N.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:N.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Q.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(n===null||o.value>n)&&(n=o.value):o.kind==="max"&&(t===null||o.value<t)&&(t=o.value)}return Number.isFinite(n)&&Number.isFinite(t)}}mt.create=e=>new mt({checks:[],typeName:X.ZodNumber,coerce:e?.coerce||!1,...G(e)});class ht extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==q.bigint)return this._getInvalidInput(t);let o;const s=new Oe;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?t.data<r.value:t.data<=r.value)&&(o=this._getOrReturnCtx(t,o),P(o,{code:T.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?t.data>r.value:t.data>=r.value)&&(o=this._getOrReturnCtx(t,o),P(o,{code:T.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="multipleOf"?t.data%r.value!==BigInt(0)&&(o=this._getOrReturnCtx(t,o),P(o,{code:T.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):Q.assertNever(r);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return P(n,{code:T.invalid_type,expected:q.bigint,received:n.parsedType}),F}gte(t,n){return this.setLimit("min",t,!0,N.toString(n))}gt(t,n){return this.setLimit("min",t,!1,N.toString(n))}lte(t,n){return this.setLimit("max",t,!0,N.toString(n))}lt(t,n){return this.setLimit("max",t,!1,N.toString(n))}setLimit(t,n,o,s){return new ht({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:o,message:N.toString(s)}]})}_addCheck(t){return new ht({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:N.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:N.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:N.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:N.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:N.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ht.create=e=>new ht({checks:[],typeName:X.ZodBigInt,coerce:e?.coerce??!1,...G(e)});class $n extends W{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==q.boolean){const o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:q.boolean,received:o.parsedType}),F}return Ee(t.data)}}$n.create=e=>new $n({typeName:X.ZodBoolean,coerce:e?.coerce||!1,...G(e)});class Ot extends W{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==q.date){const r=this._getOrReturnCtx(t);return P(r,{code:T.invalid_type,expected:q.date,received:r.parsedType}),F}if(Number.isNaN(t.data.getTime())){const r=this._getOrReturnCtx(t);return P(r,{code:T.invalid_date}),F}const o=new Oe;let s;for(const r of this._def.checks)r.kind==="min"?t.data.getTime()<r.value&&(s=this._getOrReturnCtx(t,s),P(s,{code:T.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),o.dirty()):r.kind==="max"?t.data.getTime()>r.value&&(s=this._getOrReturnCtx(t,s),P(s,{code:T.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),o.dirty()):Q.assertNever(r);return{status:o.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ot({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:N.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:N.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Ot.create=e=>new Ot({checks:[],coerce:e?.coerce||!1,typeName:X.ZodDate,...G(e)});class po extends W{_parse(t){if(this._getType(t)!==q.symbol){const o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:q.symbol,received:o.parsedType}),F}return Ee(t.data)}}po.create=e=>new po({typeName:X.ZodSymbol,...G(e)});class Cn extends W{_parse(t){if(this._getType(t)!==q.undefined){const o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:q.undefined,received:o.parsedType}),F}return Ee(t.data)}}Cn.create=e=>new Cn({typeName:X.ZodUndefined,...G(e)});class In extends W{_parse(t){if(this._getType(t)!==q.null){const o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:q.null,received:o.parsedType}),F}return Ee(t.data)}}In.create=e=>new In({typeName:X.ZodNull,...G(e)});class cn extends W{constructor(){super(...arguments),this._any=!0}_parse(t){return Ee(t.data)}}cn.create=e=>new cn({typeName:X.ZodAny,...G(e)});class Ct extends W{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ee(t.data)}}Ct.create=e=>new Ct({typeName:X.ZodUnknown,...G(e)});class at extends W{_parse(t){const n=this._getOrReturnCtx(t);return P(n,{code:T.invalid_type,expected:q.never,received:n.parsedType}),F}}at.create=e=>new at({typeName:X.ZodNever,...G(e)});class mo extends W{_parse(t){if(this._getType(t)!==q.undefined){const o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:q.void,received:o.parsedType}),F}return Ee(t.data)}}mo.create=e=>new mo({typeName:X.ZodVoid,...G(e)});class Be extends W{_parse(t){const{ctx:n,status:o}=this._processInputParams(t),s=this._def;if(n.parsedType!==q.array)return P(n,{code:T.invalid_type,expected:q.array,received:n.parsedType}),F;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,u=n.data.length<s.exactLength.value;(a||u)&&(P(n,{code:a?T.too_big:T.too_small,minimum:u?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),o.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(P(n,{code:T.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),o.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(P(n,{code:T.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),o.dirty()),n.common.async)return Promise.all([...n.data].map((a,u)=>s.type._parseAsync(new We(n,a,n.path,u)))).then(a=>Oe.mergeArray(o,a));const r=[...n.data].map((a,u)=>s.type._parseSync(new We(n,a,n.path,u)));return Oe.mergeArray(o,r)}get element(){return this._def.type}min(t,n){return new Be({...this._def,minLength:{value:t,message:N.toString(n)}})}max(t,n){return new Be({...this._def,maxLength:{value:t,message:N.toString(n)}})}length(t,n){return new Be({...this._def,exactLength:{value:t,message:N.toString(n)}})}nonempty(t){return this.min(1,t)}}Be.create=(e,t)=>new Be({type:e,minLength:null,maxLength:null,exactLength:null,typeName:X.ZodArray,...G(t)});function Gt(e){if(e instanceof _e){const t={};for(const n in e.shape){const o=e.shape[n];t[n]=He.create(Gt(o))}return new _e({...e._def,shape:()=>t})}else return e instanceof Be?new Be({...e._def,type:Gt(e.element)}):e instanceof He?He.create(Gt(e.unwrap())):e instanceof yt?yt.create(Gt(e.unwrap())):e instanceof Je?Je.create(e.items.map(t=>Gt(t))):e}class _e extends W{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Q.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==q.object){const l=this._getOrReturnCtx(t);return P(l,{code:T.invalid_type,expected:q.object,received:l.parsedType}),F}const{status:o,ctx:s}=this._processInputParams(t),{shape:r,keys:a}=this._getCached(),u=[];if(!(this._def.catchall instanceof at&&this._def.unknownKeys==="strip"))for(const l in s.data)a.includes(l)||u.push(l);const c=[];for(const l of a){const m=r[l],f=s.data[l];c.push({key:{status:"valid",value:l},value:m._parse(new We(s,f,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof at){const l=this._def.unknownKeys;if(l==="passthrough")for(const m of u)c.push({key:{status:"valid",value:m},value:{status:"valid",value:s.data[m]}});else if(l==="strict")u.length>0&&(P(s,{code:T.unrecognized_keys,keys:u}),o.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const m of u){const f=s.data[m];c.push({key:{status:"valid",value:m},value:l._parse(new We(s,f,s.path,m)),alwaysSet:m in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const m of c){const f=await m.key,_=await m.value;l.push({key:f,value:_,alwaysSet:m.alwaysSet})}return l}).then(l=>Oe.mergeObjectSync(o,l)):Oe.mergeObjectSync(o,c)}get shape(){return this._def.shape()}strict(t){return N.errToObj,new _e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,o)=>{const s=this._def.errorMap?.(n,o).message??o.defaultError;return n.code==="unrecognized_keys"?{message:N.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new _e({...this._def,unknownKeys:"strip"})}passthrough(){return new _e({...this._def,unknownKeys:"passthrough"})}extend(t){return new _e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new _e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:X.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new _e({...this._def,catchall:t})}pick(t){const n={};for(const o of Q.objectKeys(t))t[o]&&this.shape[o]&&(n[o]=this.shape[o]);return new _e({...this._def,shape:()=>n})}omit(t){const n={};for(const o of Q.objectKeys(this.shape))t[o]||(n[o]=this.shape[o]);return new _e({...this._def,shape:()=>n})}deepPartial(){return Gt(this)}partial(t){const n={};for(const o of Q.objectKeys(this.shape)){const s=this.shape[o];t&&!t[o]?n[o]=s:n[o]=s.optional()}return new _e({...this._def,shape:()=>n})}required(t){const n={};for(const o of Q.objectKeys(this.shape))if(t&&!t[o])n[o]=this.shape[o];else{let r=this.shape[o];for(;r instanceof He;)r=r._def.innerType;n[o]=r}return new _e({...this._def,shape:()=>n})}keyof(){return Nu(Q.objectKeys(this.shape))}}_e.create=(e,t)=>new _e({shape:()=>e,unknownKeys:"strip",catchall:at.create(),typeName:X.ZodObject,...G(t)});_e.strictCreate=(e,t)=>new _e({shape:()=>e,unknownKeys:"strict",catchall:at.create(),typeName:X.ZodObject,...G(t)});_e.lazycreate=(e,t)=>new _e({shape:e,unknownKeys:"strip",catchall:at.create(),typeName:X.ZodObject,...G(t)});class Tn extends W{_parse(t){const{ctx:n}=this._processInputParams(t),o=this._def.options;function s(r){for(const u of r)if(u.result.status==="valid")return u.result;for(const u of r)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const a=r.map(u=>new Ne(u.ctx.common.issues));return P(n,{code:T.invalid_union,unionErrors:a}),F}if(n.common.async)return Promise.all(o.map(async r=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await r._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let r;const a=[];for(const c of o){const l={...n,common:{...n.common,issues:[]},parent:null},m=c._parseSync({data:n.data,path:n.path,parent:l});if(m.status==="valid")return m;m.status==="dirty"&&!r&&(r={result:m,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(r)return n.common.issues.push(...r.ctx.common.issues),r.result;const u=a.map(c=>new Ne(c));return P(n,{code:T.invalid_union,unionErrors:u}),F}}get options(){return this._def.options}}Tn.create=(e,t)=>new Tn({options:e,typeName:X.ZodUnion,...G(t)});const tt=e=>e instanceof En?tt(e.schema):e instanceof Ve?tt(e.innerType()):e instanceof Pn?[e.value]:e instanceof ft?e.options:e instanceof qn?Q.objectValues(e.enum):e instanceof Mn?tt(e._def.innerType):e instanceof Cn?[void 0]:e instanceof In?[null]:e instanceof He?[void 0,...tt(e.unwrap())]:e instanceof yt?[null,...tt(e.unwrap())]:e instanceof Ts||e instanceof jn?tt(e.unwrap()):e instanceof zn?tt(e._def.innerType):[];class Oo extends W{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==q.object)return P(n,{code:T.invalid_type,expected:q.object,received:n.parsedType}),F;const o=this.discriminator,s=n.data[o],r=this.optionsMap.get(s);return r?n.common.async?r._parseAsync({data:n.data,path:n.path,parent:n}):r._parseSync({data:n.data,path:n.path,parent:n}):(P(n,{code:T.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),F)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,o){const s=new Map;for(const r of n){const a=tt(r.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const u of a){if(s.has(u))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(u)}`);s.set(u,r)}}return new Oo({typeName:X.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:s,...G(o)})}}function Vo(e,t){const n=nt(e),o=nt(t);if(e===t)return{valid:!0,data:e};if(n===q.object&&o===q.object){const s=Q.objectKeys(t),r=Q.objectKeys(e).filter(u=>s.indexOf(u)!==-1),a={...e,...t};for(const u of r){const c=Vo(e[u],t[u]);if(!c.valid)return{valid:!1};a[u]=c.data}return{valid:!0,data:a}}else if(n===q.array&&o===q.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let r=0;r<e.length;r++){const a=e[r],u=t[r],c=Vo(a,u);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===q.date&&o===q.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class On extends W{_parse(t){const{status:n,ctx:o}=this._processInputParams(t),s=(r,a)=>{if(Xo(r)||Xo(a))return F;const u=Vo(r.value,a.value);return u.valid?((Bo(r)||Bo(a))&&n.dirty(),{status:n.value,value:u.data}):(P(o,{code:T.invalid_intersection_types}),F)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([r,a])=>s(r,a)):s(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}On.create=(e,t,n)=>new On({left:e,right:t,typeName:X.ZodIntersection,...G(n)});class Je extends W{_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.parsedType!==q.array)return P(o,{code:T.invalid_type,expected:q.array,received:o.parsedType}),F;if(o.data.length<this._def.items.length)return P(o,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F;!this._def.rest&&o.data.length>this._def.items.length&&(P(o,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const r=[...o.data].map((a,u)=>{const c=this._def.items[u]||this._def.rest;return c?c._parse(new We(o,a,o.path,u)):null}).filter(a=>!!a);return o.common.async?Promise.all(r).then(a=>Oe.mergeArray(n,a)):Oe.mergeArray(n,r)}get items(){return this._def.items}rest(t){return new Je({...this._def,rest:t})}}Je.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Je({items:e,typeName:X.ZodTuple,rest:null,...G(t)})};class An extends W{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.parsedType!==q.object)return P(o,{code:T.invalid_type,expected:q.object,received:o.parsedType}),F;const s=[],r=this._def.keyType,a=this._def.valueType;for(const u in o.data)s.push({key:r._parse(new We(o,u,o.path,u)),value:a._parse(new We(o,o.data[u],o.path,u)),alwaysSet:u in o.data});return o.common.async?Oe.mergeObjectAsync(n,s):Oe.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(t,n,o){return n instanceof W?new An({keyType:t,valueType:n,typeName:X.ZodRecord,...G(o)}):new An({keyType:Xe.create(),valueType:t,typeName:X.ZodRecord,...G(n)})}}class ho extends W{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.parsedType!==q.map)return P(o,{code:T.invalid_type,expected:q.map,received:o.parsedType}),F;const s=this._def.keyType,r=this._def.valueType,a=[...o.data.entries()].map(([u,c],l)=>({key:s._parse(new We(o,u,o.path,[l,"key"])),value:r._parse(new We(o,c,o.path,[l,"value"]))}));if(o.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,m=await c.value;if(l.status==="aborted"||m.status==="aborted")return F;(l.status==="dirty"||m.status==="dirty")&&n.dirty(),u.set(l.value,m.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const c of a){const l=c.key,m=c.value;if(l.status==="aborted"||m.status==="aborted")return F;(l.status==="dirty"||m.status==="dirty")&&n.dirty(),u.set(l.value,m.value)}return{status:n.value,value:u}}}}ho.create=(e,t,n)=>new ho({valueType:t,keyType:e,typeName:X.ZodMap,...G(n)});class At extends W{_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.parsedType!==q.set)return P(o,{code:T.invalid_type,expected:q.set,received:o.parsedType}),F;const s=this._def;s.minSize!==null&&o.data.size<s.minSize.value&&(P(o,{code:T.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&o.data.size>s.maxSize.value&&(P(o,{code:T.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const r=this._def.valueType;function a(c){const l=new Set;for(const m of c){if(m.status==="aborted")return F;m.status==="dirty"&&n.dirty(),l.add(m.value)}return{status:n.value,value:l}}const u=[...o.data.values()].map((c,l)=>r._parse(new We(o,c,o.path,l)));return o.common.async?Promise.all(u).then(c=>a(c)):a(u)}min(t,n){return new At({...this._def,minSize:{value:t,message:N.toString(n)}})}max(t,n){return new At({...this._def,maxSize:{value:t,message:N.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}At.create=(e,t)=>new At({valueType:e,minSize:null,maxSize:null,typeName:X.ZodSet,...G(t)});class en extends W{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==q.function)return P(n,{code:T.invalid_type,expected:q.function,received:n.parsedType}),F;function o(u,c){return lo({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,co(),un].filter(l=>!!l),issueData:{code:T.invalid_arguments,argumentsError:c}})}function s(u,c){return lo({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,co(),un].filter(l=>!!l),issueData:{code:T.invalid_return_type,returnTypeError:c}})}const r={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof ln){const u=this;return Ee(async function(...c){const l=new Ne([]),m=await u._def.args.parseAsync(c,r).catch(g=>{throw l.addIssue(o(c,g)),l}),f=await Reflect.apply(a,this,m);return await u._def.returns._def.type.parseAsync(f,r).catch(g=>{throw l.addIssue(s(f,g)),l})})}else{const u=this;return Ee(function(...c){const l=u._def.args.safeParse(c,r);if(!l.success)throw new Ne([o(c,l.error)]);const m=Reflect.apply(a,this,l.data),f=u._def.returns.safeParse(m,r);if(!f.success)throw new Ne([s(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new en({...this._def,args:Je.create(t).rest(Ct.create())})}returns(t){return new en({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,o){return new en({args:t||Je.create([]).rest(Ct.create()),returns:n||Ct.create(),typeName:X.ZodFunction,...G(o)})}}class En extends W{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}En.create=(e,t)=>new En({getter:e,typeName:X.ZodLazy,...G(t)});class Pn extends W{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return P(n,{received:n.data,code:T.invalid_literal,expected:this._def.value}),F}return{status:"valid",value:t.data}}get value(){return this._def.value}}Pn.create=(e,t)=>new Pn({value:e,typeName:X.ZodLiteral,...G(t)});function Nu(e,t){return new ft({values:e,typeName:X.ZodEnum,...G(t)})}class ft extends W{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),o=this._def.values;return P(n,{expected:Q.joinValues(o),received:n.parsedType,code:T.invalid_type}),F}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),o=this._def.values;return P(n,{received:n.data,code:T.invalid_enum_value,options:o}),F}return Ee(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ft.create(t,{...this._def,...n})}exclude(t,n=this._def){return ft.create(this.options.filter(o=>!t.includes(o)),{...this._def,...n})}}ft.create=Nu;class qn extends W{_parse(t){const n=Q.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(t);if(o.parsedType!==q.string&&o.parsedType!==q.number){const s=Q.objectValues(n);return P(o,{expected:Q.joinValues(s),received:o.parsedType,code:T.invalid_type}),F}if(this._cache||(this._cache=new Set(Q.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=Q.objectValues(n);return P(o,{received:o.data,code:T.invalid_enum_value,options:s}),F}return Ee(t.data)}get enum(){return this._def.values}}qn.create=(e,t)=>new qn({values:e,typeName:X.ZodNativeEnum,...G(t)});class ln extends W{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==q.promise&&n.common.async===!1)return P(n,{code:T.invalid_type,expected:q.promise,received:n.parsedType}),F;const o=n.parsedType===q.promise?n.data:Promise.resolve(n.data);return Ee(o.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ln.create=(e,t)=>new ln({type:e,typeName:X.ZodPromise,...G(t)});class Ve extends W{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===X.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:o}=this._processInputParams(t),s=this._def.effect||null,r={addIssue:a=>{P(o,a),a.fatal?n.abort():n.dirty()},get path(){return o.path}};if(r.addIssue=r.addIssue.bind(r),s.type==="preprocess"){const a=s.transform(o.data,r);if(o.common.async)return Promise.resolve(a).then(async u=>{if(n.value==="aborted")return F;const c=await this._def.schema._parseAsync({data:u,path:o.path,parent:o});return c.status==="aborted"?F:c.status==="dirty"||n.value==="dirty"?Jt(c.value):c});{if(n.value==="aborted")return F;const u=this._def.schema._parseSync({data:a,path:o.path,parent:o});return u.status==="aborted"?F:u.status==="dirty"||n.value==="dirty"?Jt(u.value):u}}if(s.type==="refinement"){const a=u=>{const c=s.refinement(u,r);if(o.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(o.common.async===!1){const u=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return u.status==="aborted"?F:(u.status==="dirty"&&n.dirty(),a(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(u=>u.status==="aborted"?F:(u.status==="dirty"&&n.dirty(),a(u.value).then(()=>({status:n.value,value:u.value}))))}if(s.type==="transform")if(o.common.async===!1){const a=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Tt(a))return F;const u=s.transform(a.value,r);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(a=>Tt(a)?Promise.resolve(s.transform(a.value,r)).then(u=>({status:n.value,value:u})):F);Q.assertNever(s)}}Ve.create=(e,t,n)=>new Ve({schema:e,typeName:X.ZodEffects,effect:t,...G(n)});Ve.createWithPreprocess=(e,t,n)=>new Ve({schema:t,effect:{type:"preprocess",transform:e},typeName:X.ZodEffects,...G(n)});class He extends W{_parse(t){return this._getType(t)===q.undefined?Ee(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}He.create=(e,t)=>new He({innerType:e,typeName:X.ZodOptional,...G(t)});class yt extends W{_parse(t){return this._getType(t)===q.null?Ee(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}yt.create=(e,t)=>new yt({innerType:e,typeName:X.ZodNullable,...G(t)});class Mn extends W{_parse(t){const{ctx:n}=this._processInputParams(t);let o=n.data;return n.parsedType===q.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Mn.create=(e,t)=>new Mn({innerType:e,typeName:X.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...G(t)});class zn extends W{_parse(t){const{ctx:n}=this._processInputParams(t),o={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return xn(s)?s.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Ne(o.common.issues)},input:o.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ne(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}zn.create=(e,t)=>new zn({innerType:e,typeName:X.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...G(t)});class fo extends W{_parse(t){if(this._getType(t)!==q.nan){const o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:q.nan,received:o.parsedType}),F}return{status:"valid",value:t.data}}}fo.create=e=>new fo({typeName:X.ZodNaN,...G(e)});const nR=Symbol("zod_brand");class Ts extends W{_parse(t){const{ctx:n}=this._processInputParams(t),o=n.data;return this._def.type._parse({data:o,path:n.path,parent:n})}unwrap(){return this._def.type}}class Xn extends W{_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return r.status==="aborted"?F:r.status==="dirty"?(n.dirty(),Jt(r.value)):this._def.out._parseAsync({data:r.value,path:o.path,parent:o})})();{const s=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?F:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:o.path,parent:o})}}static create(t,n){return new Xn({in:t,out:n,typeName:X.ZodPipeline})}}class jn extends W{_parse(t){const n=this._def.innerType._parse(t),o=s=>(Tt(s)&&(s.value=Object.freeze(s.value)),s);return xn(n)?n.then(s=>o(s)):o(n)}unwrap(){return this._def.innerType}}jn.create=(e,t)=>new jn({innerType:e,typeName:X.ZodReadonly,...G(t)});function wr(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function Uu(e,t={},n){return e?cn.create().superRefine((o,s)=>{const r=e(o);if(r instanceof Promise)return r.then(a=>{if(!a){const u=wr(t,o),c=u.fatal??n??!0;s.addIssue({code:"custom",...u,fatal:c})}});if(!r){const a=wr(t,o),u=a.fatal??n??!0;s.addIssue({code:"custom",...a,fatal:u})}}):cn.create()}const oR={object:_e.lazycreate};var X;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(X||(X={}));const sR=(e,t={message:`Input not instance of ${e.name}`})=>Uu(n=>n instanceof e,t),Lu=Xe.create,Du=mt.create,rR=fo.create,aR=ht.create,Zu=$n.create,iR=Ot.create,uR=po.create,cR=Cn.create,lR=In.create,dR=cn.create,pR=Ct.create,mR=at.create,hR=mo.create,fR=Be.create,yR=_e.create,gR=_e.strictCreate,_R=Tn.create,bR=Oo.create,vR=On.create,SR=Je.create,wR=An.create,kR=ho.create,RR=At.create,xR=en.create,$R=En.create,CR=Pn.create,IR=ft.create,TR=qn.create,OR=ln.create,kr=Ve.create,AR=He.create,ER=yt.create,PR=Ve.createWithPreprocess,qR=Xn.create,MR=()=>Lu().optional(),zR=()=>Du().optional(),jR=()=>Zu().optional(),NR={string:(e=>Xe.create({...e,coerce:!0})),number:(e=>mt.create({...e,coerce:!0})),boolean:(e=>$n.create({...e,coerce:!0})),bigint:(e=>ht.create({...e,coerce:!0})),date:(e=>Ot.create({...e,coerce:!0}))},UR=F,Ge=Object.freeze(Object.defineProperty({__proto__:null,BRAND:nR,DIRTY:Jt,EMPTY_PATH:qk,INVALID:F,NEVER:UR,OK:Ee,ParseStatus:Oe,Schema:W,ZodAny:cn,ZodArray:Be,ZodBigInt:ht,ZodBoolean:$n,ZodBranded:Ts,ZodCatch:zn,ZodDate:Ot,ZodDefault:Mn,ZodDiscriminatedUnion:Oo,ZodEffects:Ve,ZodEnum:ft,ZodError:Ne,get ZodFirstPartyTypeKind(){return X},ZodFunction:en,ZodIntersection:On,ZodIssueCode:T,ZodLazy:En,ZodLiteral:Pn,ZodMap:ho,ZodNaN:fo,ZodNativeEnum:qn,ZodNever:at,ZodNull:In,ZodNullable:yt,ZodNumber:mt,ZodObject:_e,ZodOptional:He,ZodParsedType:q,ZodPipeline:Xn,ZodPromise:ln,ZodReadonly:jn,ZodRecord:An,ZodSchema:W,ZodSet:At,ZodString:Xe,ZodSymbol:po,ZodTransformer:Ve,ZodTuple:Je,ZodType:W,ZodUndefined:Cn,ZodUnion:Tn,ZodUnknown:Ct,ZodVoid:mo,addIssueToContext:P,any:dR,array:fR,bigint:aR,boolean:Zu,coerce:NR,custom:Uu,date:iR,datetimeRegex:ju,defaultErrorMap:un,discriminatedUnion:bR,effect:kr,enum:IR,function:xR,getErrorMap:co,getParsedType:nt,instanceof:sR,intersection:vR,isAborted:Xo,isAsync:xn,isDirty:Bo,isValid:Tt,late:oR,lazy:$R,literal:CR,makeIssue:lo,map:kR,nan:rR,nativeEnum:TR,never:mR,null:lR,nullable:ER,number:Du,object:yR,get objectUtil(){return Fo},oboolean:jR,onumber:zR,optional:AR,ostring:MR,pipeline:qR,preprocess:PR,promise:OR,quotelessJson:Ek,record:wR,set:RR,setErrorMap:Pk,strictObject:gR,string:Lu,symbol:uR,transformer:kr,tuple:SR,undefined:cR,union:_R,unknown:pR,get util(){return Q},void:hR},Symbol.toStringTag,{value:"Module"})),Rr=Ge.object({callbackUrl:Ge.union([Ge.string().url(),Ge.instanceof(URL)]),limit:Ge.number().optional()}),LR=Ge.union([Rr.extend({codeChallengeMethod:Ge.enum(["S256","plain"]),codeChallenge:Ge.string()}),Rr]);function DR(e,t){const n=LR.safeParse(t);if(!n.success)return{ok:!1,error:n.error};const o=Ur(e._options);if(!o)return{ok:!1,error:new Error("No server URL configured")};const s=new URL("/auth",o);return s.searchParams.set("callback_url",n.data.callbackUrl.toString()),"codeChallengeMethod"in n.data&&(s.searchParams.set("code_challenge",n.data.codeChallenge),s.searchParams.set("code_challenge_method",n.data.codeChallengeMethod)),n.data.limit!==void 0&&s.searchParams.set("limit",n.data.limit.toString()),{ok:!0,value:s.toString()}}const ZR=Ge.object({codeVerifier:Ge.string().min(43,"Code verifier must be at least 43 characters").max(128,"Code verifier must be at most 128 characters").regex(/^[A-Za-z0-9\-._~]+$/,"Code verifier must only contain unreserved characters: [A-Za-z0-9-._~]").optional()});function Fu(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function FR(){const e=crypto.getRandomValues(new Uint8Array(32));return Fu(e)}async function XR(e={}){const t=ZR.safeParse(e);if(!t.success)return{ok:!1,error:t.error};const{codeVerifier:n=FR()}=t.data,s=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(r);return{ok:!0,value:{codeChallenge:Fu(a),codeVerifier:n}}}class BR extends Pe{async createAuthorizationUrl(t){const n=DR(this,t);if(!n.ok)throw n.error;return n.value}async createSHA256CodeChallenge(){return ue(XR())}async exchangeAuthCodeForAPIKey(t,n){return ue(Ok(this,t,n))}async createAuthCode(t,n){return ue(Ik(this,t,n))}}function VR(e,t,n,o){return new ge(KR(e,t,n,o))}async function KR(e,t,n,o){const s=Ie(n,E=>mw.parse(E),"Input validation failed");if(!s.ok)return[s,{status:"invalid"}];const r=s.value,a=null,u={author:It("author",r.author,{explode:!1,charEncoding:"percent"}),slug:It("slug",r.slug,{explode:!1,charEncoding:"percent"})},c=le("/parameters/{author}/{slug}")(u),l=Un({provider:r.provider}),m=new Headers(ye({Accept:"application/json"})),f=xo([{fieldName:"Authorization",type:"http:bearer",value:t?.bearer}]),_={options:e._options,baseURL:o?.serverURL??e._baseURL??"",operationID:"getParameters",oAuth2Scopes:null,resolvedSecurity:f,securitySource:t,retryConfig:o?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:o?.retryCodes||["429","500","502","503","504"]},g=e._createRequest(_,{security:f,method:"GET",baseURL:o?.serverURL,path:c,headers:m,query:l,body:a,userAgent:e._options.userAgent,timeoutMs:o?.timeoutMs||e._options.timeoutMs||-1},o);if(!g.ok)return[g,{status:"invalid"}];const h=g.value,b=await e._do(h,{context:_,errorCodes:["401","404","4XX","500","5XX"],retryConfig:_.retryConfig,retryCodes:_.retryCodes});if(!b.ok)return[b,{status:"request-error",request:h}];const v=b.value,w={HttpMeta:{Response:v,Request:h}},[x]=await fe(he(200,yw),A(401,qe),A(404,vt),A(500,Se),V("4XX"),V("5XX"))(v,h,{extraFields:w});return x.ok?[x,{status:"complete",request:h,response:v}]:[x,{status:"complete",request:h,response:v}]}class GR extends Pe{async getParameters(t,n,o){return ue(VR(this,t,n,o))}}function HR(e,t){return new ge(WR(e,t))}async function WR(e,t){const n=le("/providers")(),o=new Headers(ye({Accept:"application/json"})),s=await ke(e._options.apiKey),r=s==null?{}:{apiKey:s},a=we(r),u={options:e._options,baseURL:t?.serverURL??e._baseURL??"",operationID:"listProviders",oAuth2Scopes:null,resolvedSecurity:a,securitySource:e._options.apiKey,retryConfig:t?.retries||e._options.retryConfig||{strategy:"none"},retryCodes:t?.retryCodes||["429","500","502","503","504"]},c=e._createRequest(u,{security:a,method:"GET",baseURL:t?.serverURL,path:n,headers:o,userAgent:e._options.userAgent,timeoutMs:t?.timeoutMs||e._options.timeoutMs||-1},t);if(!c.ok)return[c,{status:"invalid"}];const l=c.value,m=await e._do(l,{context:u,errorCodes:["4XX","500","5XX"],retryConfig:u.retryConfig,retryCodes:u.retryCodes});if(!m.ok)return[m,{status:"request-error",request:l}];const f=m.value,_={HttpMeta:{Response:f,Request:l}},[g]=await fe(he(200,$w),A(500,Se),V("4XX"),V("5XX"))(f,l,{extraFields:_});return g.ok?[g,{status:"complete",request:l,response:f}]:[g,{status:"complete",request:l,response:f}]}class JR extends Pe{async list(t){return ue(HR(this,t))}}class xr{constructor(t){this.sourceStream=t,this.buffer=[],this.consumers=new Map,this.nextConsumerId=0,this.sourceReader=null,this.sourceComplete=!1,this.sourceError=null,this.pumpStarted=!1}createConsumer(){const t=this.nextConsumerId++,n={position:0,waitingPromise:null,cancelled:!1};this.consumers.set(t,n),this.pumpStarted||this.startPump();const o=this;return{async next(){const s=o.consumers.get(t);if(!s)return{done:!0,value:void 0};if(s.cancelled)return{done:!0,value:void 0};if(s.position<o.buffer.length){const a=o.buffer[s.position];return s.position++,{done:!1,value:a}}if(o.sourceComplete)return o.consumers.delete(t),{done:!0,value:void 0};if(o.sourceError)throw o.consumers.delete(t),o.sourceError;const r=new Promise((a,u)=>{s.waitingPromise={resolve:a,reject:u}});return(o.sourceComplete||o.sourceError||s.position<o.buffer.length)&&s.waitingPromise&&(s.waitingPromise.resolve(),s.waitingPromise=null),await r,this.next()},async return(){const s=o.consumers.get(t);return s&&(s.cancelled=!0,o.consumers.delete(t)),{done:!0,value:void 0}},async throw(s){const r=o.consumers.get(t);throw r&&(r.cancelled=!0,o.consumers.delete(t)),s},[Symbol.asyncIterator](){return this}}}startPump(){this.pumpStarted||(this.pumpStarted=!0,this.sourceReader=this.sourceStream.getReader(),(async()=>{try{for(;;){const t=await this.sourceReader.read();if(t.done){this.sourceComplete=!0,this.notifyAllConsumers();break}this.buffer.push(t.value),this.notifyAllConsumers()}}catch(t){this.sourceError=t instanceof Error?t:new Error(String(t)),this.notifyAllConsumers()}finally{this.sourceReader&&this.sourceReader.releaseLock()}})())}notifyAllConsumers(){for(const t of this.consumers.values())t.waitingPromise&&(this.sourceError?t.waitingPromise.reject(this.sourceError):t.waitingPromise.resolve(),t.waitingPromise=null)}async cancel(){for(const t of this.consumers.values())t.cancelled=!0,t.waitingPromise&&t.waitingPromise.resolve();this.consumers.clear(),this.sourceReader&&(await this.sourceReader.cancel(),this.sourceReader.releaseLock())}}async function*YR(e){const t=e.createConsumer();for await(const n of t)if("type"in n&&n.type==="response.output_text.delta"){const o=n;o.delta&&(yield o.delta)}}async function*QR(e){const t=e.createConsumer();for await(const n of t)if("type"in n&&n.type==="response.reasoning_text.delta"){const o=n;o.delta&&(yield o.delta)}}async function*ex(e){const t=e.createConsumer();for await(const n of t)if("type"in n&&n.type==="response.function_call_arguments.delta"){const o=n;o.delta&&(yield o.delta)}}async function*tx(e){const t=e.createConsumer();let n="",o=!1;for await(const s of t)if("type"in s)switch(s.type){case"response.output_item.added":{const r=s;r.item&&"type"in r.item&&r.item.type==="message"&&(o=!0,n="");break}case"response.output_text.delta":{const r=s;o&&r.delta&&(n+=r.delta,yield{role:"assistant",content:n});break}case"response.output_item.done":{const r=s;if(r.item&&"type"in r.item&&r.item.type==="message"){const a=r.item;yield Xu(a)}break}}}async function Mo(e){const t=e.createConsumer();for await(const n of t)if("type"in n){if(n.type==="response.completed")return n.response;if(n.type==="response.failed"){const o=n;throw new Error(`Response failed: ${JSON.stringify(o.response.error)}`)}if(n.type==="response.incomplete")return n.response}throw new Error("Stream ended without completion event")}function Xu(e){return{role:"assistant",content:e.content.filter(n=>"type"in n&&n.type==="output_text").map(n=>n.text).join("")||null}}function Ko(e){const t=e.output.find(n=>"type"in n&&n.type==="message");if(!t)throw new Error("No message found in response output");return Xu(t)}function nx(e){if(e.outputText)return e.outputText;const t=Ko(e);return typeof t.content=="string"?t.content:""}function zo(e){const t=[];for(const n of e.output)if("type"in n&&n.type==="function_call"){const o=n;try{const s=JSON.parse(o.arguments);t.push({id:o.callId,name:o.name,arguments:s})}catch{t.push({id:o.callId,name:o.name,arguments:o.arguments})}}return t}async function*ox(e){const t=e.createConsumer(),n=new Map;for await(const o of t)if("type"in o)switch(o.type){case"response.output_item.added":{const s=o;if(s.item&&"type"in s.item&&s.item.type==="function_call"){const r=s.item;n.set(r.callId,{id:r.callId,name:r.name,argumentsAccumulated:""})}break}case"response.function_call_arguments.delta":{const s=o,r=n.get(s.itemId);r&&s.delta&&(r.argumentsAccumulated+=s.delta);break}case"response.function_call_arguments.done":{const s=o,r=n.get(s.itemId);if(r){try{const a=JSON.parse(s.arguments);yield{id:r.id,name:s.name,arguments:a}}catch{yield{id:r.id,name:s.name,arguments:s.arguments}}n.delete(s.itemId)}break}case"response.output_item.done":{const s=o;if(s.item&&"type"in s.item&&s.item.type==="function_call"){const r=s.item;if(n.has(r.callId)){try{const a=JSON.parse(r.arguments);yield{id:r.callId,name:r.name,arguments:a}}catch{yield{id:r.callId,name:r.name,arguments:r.arguments}}n.delete(r.callId)}}break}}}var $r;(function(e){e.Function="function"})($r||($r={}));function Yt(e){return"execute"in e.function&&typeof e.function.execute=="function"}function Os(e){return"eventSchema"in e.function}function sx(e){return Yt(e)&&!Os(e)}function rx(e){return ym(e,{target:"openapi-3.0"})}function ax(e){return e.map(t=>({type:"function",name:t.function.name,description:t.function.description||null,strict:null,parameters:rx(t.function.inputSchema)}))}function Bu(e,t){return e.parse(t)}function Go(e,t){return e.parse(t)}async function ix(e,t,n){if(!sx(e))throw new Error(`Tool "${t.name}" is not a regular execute tool or has no execute function`);try{const o=Bu(e.function.inputSchema,t.arguments),s=await Promise.resolve(e.function.execute(o,n));if(e.function.outputSchema){const r=Go(e.function.outputSchema,s);return{toolCallId:t.id,toolName:t.name,result:r}}return{toolCallId:t.id,toolName:t.name,result:s}}catch(o){return{toolCallId:t.id,toolName:t.name,result:null,error:o instanceof Error?o:new Error(String(o))}}}async function ux(e,t,n,o){if(!Os(e))throw new Error(`Tool "${t.name}" is not a generator tool`);try{const s=Bu(e.function.inputSchema,t.arguments),r=[];let a=null,u=!1;for await(const l of e.function.execute(s,n)){u=!0;const m=Go(e.function.eventSchema,l);r.push(m),a=m}if(!u)throw new Error(`Generator tool "${t.name}" completed without emitting any values`);const c=Go(e.function.outputSchema,a);return r.pop(),{toolCallId:t.id,toolName:t.name,result:c,preliminaryResults:r}}catch(s){return{toolCallId:t.id,toolName:t.name,result:null,error:s instanceof Error?s:new Error(String(s))}}}async function cx(e,t,n,o){if(!Yt(e))throw new Error(`Tool "${t.name}" has no execute function. Use manual tool execution.`);return Os(e)?ux(e,t,n,o):ix(e,t,n)}class lx{constructor(t){this.reusableStream=null,this.streamPromise=null,this.messagePromise=null,this.textPromise=null,this.initPromise=null,this.toolExecutionPromise=null,this.finalResponse=null,this.preliminaryResults=new Map,this.allToolExecutionRounds=[],this.options=t}isNonStreamingResponse(t){return t!==null&&typeof t=="object"&&"id"in t&&"object"in t&&"output"in t&&!("toReadableStream"in t)}initStream(){return this.initPromise?this.initPromise:(this.initPromise=(async()=>{const t={...this.options.request,stream:!0};this.streamPromise=Zo(this.options.client,t,this.options.options).then(o=>{if(!o.ok)throw o.error;return o.value});const n=await this.streamPromise;this.reusableStream=new xr(n)})(),this.initPromise)}async executeToolsIfNeeded(){return this.toolExecutionPromise?this.toolExecutionPromise:(this.toolExecutionPromise=(async()=>{if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");const t=await Mo(this.reusableStream);if(!(this.options.tools&&this.options.tools.length>0&&t.output.some(l=>"type"in l&&l.type==="function_call"))){this.finalResponse=t;return}if(zo(t).filter(l=>{const m=this.options.tools?.find(f=>f.function.name===l.name);return m&&Yt(m)}).length===0){this.finalResponse=t;return}const r=this.options.maxToolRounds??5;let a=t,u=0,c=this.options.request.input||[];for(;;){const l=zo(a);if(l.length===0||!l.some(w=>{const x=this.options.tools?.find(E=>E.function.name===w.name);return x&&Yt(x)}))break;if(typeof r=="number"){if(u>=r)break}else if(typeof r=="function"){const w={numberOfTurns:u+1,messageHistory:c,...this.options.request.model&&{model:this.options.request.model},...this.options.request.models&&{models:this.options.request.models}};if(!r(w))break}this.allToolExecutionRounds.push({round:u,toolCalls:l,response:a});const f={numberOfTurns:u+1,messageHistory:c,...this.options.request.model&&{model:this.options.request.model},...this.options.request.models&&{models:this.options.request.models}},_=[];for(const w of l){const x=this.options.tools?.find(M=>M.function.name===w.name);if(!x||!Yt(x))continue;const E=await cx(x,w,f);E.preliminaryResults&&E.preliminaryResults.length>0&&this.preliminaryResults.set(w.id,E.preliminaryResults),_.push({type:"function_call_output",id:`output_${w.id}`,callId:w.id,output:E.error?JSON.stringify({error:E.error.message}):JSON.stringify(E.result)})}const g=[...Array.isArray(a.output)?a.output:[a.output],..._];c=g;const h={...this.options.request,input:g,stream:!1},b=await Zo(this.options.client,h,this.options.options);if(!b.ok)throw b.error;const v=b.value;if(v&&typeof v=="object"&&"toReadableStream"in v){const w=new xr(v);a=await Mo(w)}else if(this.isNonStreamingResponse(v))a=v;else throw new Error("Unexpected response type from API");u++}if(!a||!a.id||!a.output)throw new Error("Invalid final response: missing required fields");if(!Array.isArray(a.output)||a.output.length===0)throw new Error("Invalid final response: empty or invalid output");this.finalResponse=a})(),this.toolExecutionPromise)}async getMessageInternal(){if(await this.executeToolsIfNeeded(),!this.finalResponse)throw new Error("Response not available");return Ko(this.finalResponse)}async getTextInternal(){if(await this.executeToolsIfNeeded(),!this.finalResponse)throw new Error("Response not available");return nx(this.finalResponse)}getMessage(){return this.messagePromise?this.messagePromise:(this.messagePromise=this.getMessageInternal(),this.messagePromise)}getText(){return this.textPromise?this.textPromise:(this.textPromise=this.getTextInternal(),this.textPromise)}async getResponse(){if(await this.executeToolsIfNeeded(),!this.finalResponse)throw new Error("Response not available");return this.finalResponse}getFullResponsesStream(){return(async function*(){if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");const t=this.reusableStream.createConsumer();for await(const n of t)yield n;await this.executeToolsIfNeeded();for(const[n,o]of this.preliminaryResults)for(const s of o)yield{type:"tool.preliminary_result",toolCallId:n,result:s,timestamp:Date.now()}}).call(this)}getTextStream(){return(async function*(){if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");yield*YR(this.reusableStream)}).call(this)}getNewMessagesStream(){return(async function*(){if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");yield*tx(this.reusableStream),await this.executeToolsIfNeeded();for(const t of this.allToolExecutionRounds)for(const n of t.toolCalls){const o=this.options.tools?.find(a=>a.function.name===n.name);if(!o||!Yt(o))continue;const s=this.preliminaryResults.get(n.id),r=s&&s.length>0?s[s.length-1]:void 0;yield{role:"tool",content:r!==void 0?JSON.stringify(r):"",toolCallId:n.id}}this.finalResponse&&this.allToolExecutionRounds.length>0&&this.finalResponse.output.some(n=>"type"in n&&n.type==="message")&&(yield Ko(this.finalResponse))}).call(this)}getReasoningStream(){return(async function*(){if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");yield*QR(this.reusableStream)}).call(this)}getToolStream(){return(async function*(){if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");for await(const t of ex(this.reusableStream))yield{type:"delta",content:t};await this.executeToolsIfNeeded();for(const[t,n]of this.preliminaryResults)for(const o of n)yield{type:"preliminary_result",toolCallId:t,result:o}}).call(this)}getFullChatStream(){return(async function*(){if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");const t=this.reusableStream.createConsumer();for await(const n of t)"type"in n&&(n.type==="response.output_text.delta"?yield{type:"content.delta",delta:n.delta}:n.type==="response.completed"?yield{type:"message.complete",response:n.response}:yield{type:n.type,event:n});await this.executeToolsIfNeeded();for(const[n,o]of this.preliminaryResults)for(const s of o)yield{type:"tool.preliminary_result",toolCallId:n,result:s}}).call(this)}async getToolCalls(){if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");const t=await Mo(this.reusableStream);return zo(t)}getToolCallsStream(){return(async function*(){if(await this.initStream(),!this.reusableStream)throw new Error("Stream not initialized");yield*ox(this.reusableStream)}).call(this)}async cancel(){this.reusableStream&&await this.reusableStream.cancel()}}function dx(e){if(!Array.isArray(e)||e.length===0)return!1;const t=e[0];return t&&"role"in t&&!("type"in t)}function px(e){if(!Array.isArray(e)||e.length===0)return!1;const t=e[0],n=t?.function;return t&&"function"in t&&n!==void 0&&n!==null&&"name"in n&&!("inputSchema"in n)}function mx(e){return e.map(t=>({type:"function",name:t.function.name,description:t.function.description??null,strict:t.function.strict??null,parameters:t.function.parameters??null}))}function hx(e){return e.map(t=>{const{role:n,content:o,...s}=t;if(n==="tool"){const a=t;return{type:"function_call_output",callId:a.toolCallId,output:typeof a.content=="string"?a.content:JSON.stringify(a.content),...s}}if(n==="assistant"){const a=t;return{role:"assistant",content:typeof a.content=="string"?a.content:a.content===null?"":JSON.stringify(a.content),...s}}const r=typeof o=="string"?o:o==null?"":JSON.stringify(o);return{role:n,content:r,...s}})}function fx(e,t,n){const{tools:o,maxToolRounds:s,input:r,...a}=t,u=r&&dx(r)?hx(r):r,c={...a,input:u};let l=!1,m=!1;if(o&&Array.isArray(o)&&o.length>0){const b=o[0],v=b?.function;l="function"in b&&v!==void 0&&v!==null&&"inputSchema"in v,m=!l&&px(o)}const f=l?o:void 0;let _;f?_=ax(f):m?_=mx(o):_=o;const g={...c,..._&&{tools:_}},h={client:e,request:g,options:n??{}};return f&&(h.tools=f),s!==void 0&&(h.maxToolRounds=s),new lx(h)}class yx extends Pe{get beta(){return this._beta??(this._beta=new Ww(this._options))}get analytics(){return this._analytics??(this._analytics=new qw(this._options))}get credits(){return this._credits??(this._credits=new ik(this._options))}get embeddings(){return this._embeddings??(this._embeddings=new pk(this._options))}get generations(){return this._generations??(this._generations=new vk(this._options))}get models(){return this._models??(this._models=new Ck(this._options))}get endpoints(){return this._endpoints??(this._endpoints=new gk(this._options))}get parameters(){return this._parameters??(this._parameters=new GR(this._options))}get providers(){return this._providers??(this._providers=new JR(this._options))}get apiKeys(){return this._apiKeys??(this._apiKeys=new Kw(this._options))}get oAuth(){return this._oAuth??(this._oAuth=new BR(this._options))}get chat(){return this._chat??(this._chat=new Qw(this._options))}get completions(){return this._completions??(this._completions=new nk(this._options))}callModel(t,n){return fx(this,t,n)}}const gx=new yx({apiKey:"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"});function Rx(){const e=yc.useLoaderData(),{chat:t,activePersona:n,activePreset:o,characters:s,lorebooks:r,branches:a,activeBranchId:u}=e,c=Z.useRef(null),l=Z.useCallback(()=>{const j=c.current;j&&j.scrollTo({top:j.scrollHeight,behavior:"smooth"})},[]),[m,f]=Z.useState(u??null),_=zs(()=>ne.chatBranches.where("chatId").equals(t.id).toArray(),[t.id]),g=Z.useMemo(()=>[..._??a??[]].sort((D,Y)=>D.createdAt-Y.createdAt),[_,a]);Z.useEffect(()=>{if(!g.length)return;if(!(m?g.some(D=>D.id===m):!1)){const D=g[g.length-1]??g[0];D&&(f(D.id),ne.chats.update(t.id,{activeBranchId:D.id}))}},[m,g,t.id]);const h=zs(async()=>m?ne.messages.where("chatId").equals(t.id).and(j=>j.branchId===m).toArray():[],[t.id,m],m===u?e.messages:[]),[b,v]=Z.useState(()=>s[0]?.id??null);Z.useEffect(()=>{!b&&s[0]&&v(s[0].id)},[s,b]);const w=Z.useMemo(()=>s.find(j=>j.id===b)??s[0]??null,[s,b]),x=Z.useMemo(()=>w?.inChatName?.trim()||w?.name?.trim()||"Assistant",[w]),E=Z.useMemo(()=>n?.inChatName?.trim()||n?.name?.trim()||"You",[n]),M=gc(x,E),J=Z.useMemo(()=>h?h.length>0:e.messages.length>0,[e.messages.length,h]);Z.useEffect(()=>{const j=w;if(!j||J||!j.initMessage?.trim()||!m)return;(async()=>{await ne.transaction("rw",ne.messages,async()=>{await ne.messages.where("chatId").equals(t.id).and(Re=>Re.branchId===m).count()>0||await ne.messages.add({id:Rt(),role:"assistant",name:j.inChatName??j.name,content:M(j.initMessage),timestamp:Date.now(),chatId:t.id,avatar:j.avatar,branchId:m})})})()},[m,t.id,J,M,w]),Z.useEffect(()=>{l()},[m,h?.length,l]);const[H,re]=Z.useState(!1),[Me,ve]=Z.useState(null),[Ze,Fe]=Z.useState(null),Dt=Z.useCallback(j=>{Fe(j)},[]),ct=Z.useCallback(()=>{Fe(null)},[]),Zt=Z.useCallback(async()=>{const j=Ze;!j||!m||(await ne.transaction("rw",ne.messages,async()=>{const Y=(await ne.messages.where("chatId").equals(t.id).and(K=>K.branchId===m).toArray()).slice().sort((K,xe)=>K.timestamp-xe.timestamp),Re=Y.findIndex(K=>K.id===j.id);if(Re===-1)return;const je=Y.slice(Re).map(K=>K.id);await ne.messages.bulkDelete(je)}),Fe(null))},[m,t.id,Ze]);Z.useEffect(()=>{Fe(null)},[m]);const Te=Z.useMemo(()=>m?g.findIndex(j=>j.id===m):-1,[m,g]),fn=Z.useMemo(()=>Te===-1||g.length===0?void 0:`${g[Te]?.name?.trim()||`Branch ${Te+1}`} (${Te+1}/${g.length})`,[Te,g]),Ft=Te>0,yn=Te>=0&&Te<g.length-1,St=Z.useCallback(async j=>{if(Te===-1)return;const D=j==="previous"?Te-1:Te+1,Y=g[D];Y&&(f(Y.id),Fe(null),await ne.chats.update(t.id,{activeBranchId:Y.id}))},[Te,g,t.id]),Xt=Z.useCallback(async j=>{if(!m){ve("No active branch is available.");return}const D=Rt();try{await ne.transaction("rw",ne.chatBranches,ne.messages,ne.chats,async()=>{const Re=`Branch ${(await ne.chatBranches.where("chatId").equals(t.id).toArray()).length+1}`;await ne.chatBranches.add({id:D,chatId:t.id,name:Re,parentBranchId:m,pivotMessageId:j.id,createdAt:Date.now()});const K=(await ne.messages.where("chatId").equals(t.id).and($e=>$e.branchId===m).toArray()).slice().sort(($e,bn)=>$e.timestamp-bn.timestamp),xe=K.findIndex($e=>$e.id===j.id);if(xe===-1)throw new Error("The selected message is no longer available.");const pe=K.slice(0,xe+1).map($e=>({...$e,id:Rt(),branchId:D}));pe.length>0&&await ne.messages.bulkAdd(pe),await ne.chats.update(t.id,{activeBranchId:D})}),f(D),ve(null),l()}catch(Y){const Re=Y instanceof Error?Y.message:"Failed to create a branch.";ve(Re)}},[m,t.id,l]),lt=Z.useMemo(()=>{const j=[];return o||j.push("activate at least one preset"),s.length===0&&j.push("add a character to this chat"),b||j.push("select which character should answer"),j},[o,s,b]),Qe=Z.useCallback(j=>j?typeof j=="string"?j:Array.isArray(j)?j.map(D=>typeof D=="string"?D:D&&typeof D=="object"&&"text"in D&&typeof D.text=="string"?D.text:"").join(""):"":"",[]),gn=Z.useCallback(()=>{if(!o)return"You are a helpful AI assistant.";const j=[];if(o.preHistoryInstructions?.trim()&&j.push(`Pre-history instructions:
${M(o.preHistoryInstructions.trim())}`),w&&j.push(`You are roleplaying as "${w.inChatName??w.name}" (internal name: ${w.name}).
Description: ${M(w.description)}
Scenario: ${M(w.scenario)}
Initial message guidance: ${M(w.initMessage)}`),w&&s.length>1){const D=s.filter(Y=>Y.id!==w.id).map(Y=>`${Y.inChatName}: ${M(Y.description)}`).join(`
`);D&&j.push(`Other characters in this chat:
${D}`)}if(n&&j.push(`The user persona is "${n.inChatName}".
Description: ${n.description}`),o.impersonationPrompt?.trim()&&j.push(`Impersonation prompt:
${M(o.impersonationPrompt.trim())}`),o.postHistoryInstructions?.trim()&&j.push(`Post-history instructions:
${M(o.postHistoryInstructions.trim())}`),r.length>0){const D=r.map(Y=>{const Re=[Y.description?.trim()?`Summary: ${M(Y.description)}`:null,M(Y.content).trim()].filter(Boolean);return`${Y.name}
${Re.join(`
`)}`}).join(`

`);j.push(`Relevant lorebooks:
${D}`)}return o.repetitionPenalty!==void 0&&j.push(`Apply an implicit repetition penalty of ${o.repetitionPenalty}.`),j.map(D=>D.trim()).filter(D=>D.length>0).join(`

`)||"You are a helpful AI assistant."},[n,o,s,r,M,w]),wt=Z.useCallback(async j=>{if(!o)throw new Error("You need to activate a preset before chatting.");const D=gn(),Y=j.filter(pe=>pe.role==="user"||pe.role==="assistant").map(pe=>({role:pe.role,content:pe.content,name:pe.name}));if(Y.length===0||Y[Y.length-1]?.role!=="user")throw new Error("Cannot generate a response without a preceding user message.");const Re=[{role:"system",content:D},...Y],K=(await gx.chat.send({model:o.model,messages:Re,temperature:o.temperature,topP:o.topP,frequencyPenalty:o.frequencyPenalty,presencePenalty:o.presencePenalty,maxTokens:o.maxNewToken}))?.choices?.[0]?.message?.content,xe=Qe(K).trim();if(!xe)throw new Error("Model returned an empty response.");return xe},[o,gn,Qe]),_n=Z.useCallback(async j=>{if(H)return;if(!o){ve("You need to activate a preset before chatting.");return}if(!w){ve("Select a character to respond to your messages.");return}if(!m){ve("No active branch is available.");return}re(!0),ve(null);const D=Date.now(),Y=M(j),Re={id:Rt(),role:"user",name:n?.inChatName??n?.name??"You",content:Y,timestamp:D,chatId:t.id,avatar:n?.avatar,branchId:m};try{await ne.messages.add(Re);const K=(await ne.messages.where("chatId").equals(t.id).and($e=>$e.branchId===m).toArray()).slice().sort(($e,bn)=>$e.timestamp-bn.timestamp),xe=await wt(K),pe={id:Rt(),role:"assistant",name:w.inChatName??w.name,content:xe,timestamp:Date.now(),chatId:t.id,avatar:w.avatar,branchId:m};await ne.messages.add(pe)}catch(je){const K=je instanceof Error?je.message:"Unexpected error";ve(K),await ne.messages.add({id:Rt(),role:"system",name:"System",content:`Failed to fetch a response: ${K}`,timestamp:Date.now(),chatId:t.id,avatar:void 0,branchId:m})}finally{re(!1)}},[n,o,m,t.id,H,wt,M,w]),Ao=Z.useCallback(async j=>{if(!H){if(!o){ve("You need to activate a preset before regenerating.");return}if(!w){ve("Select a character to respond to your messages.");return}if(!m){ve("No active branch is available.");return}re(!0),ve(null),Fe(null);try{const Y=(await ne.messages.where("chatId").equals(t.id).and(pe=>pe.branchId===m).toArray()).slice().sort((pe,$e)=>pe.timestamp-$e.timestamp),Re=Y.findIndex(pe=>pe.id===j.id);if(Re===-1)throw new Error("Message to regenerate was not found.");const je=Y.slice(0,Re),K=await wt(je),xe={id:Rt(),role:"assistant",name:w.inChatName??w.name,content:K,timestamp:Date.now(),chatId:t.id,avatar:w.avatar,branchId:m};await ne.transaction("rw",ne.messages,async()=>{const pe=Y.slice(Re).map($e=>$e.id);pe.length>0&&await ne.messages.bulkDelete(pe),await ne.messages.add(xe)})}catch(D){const Y=D instanceof Error?D.message:"Unexpected error";ve(Y)}finally{re(!1)}}},[o,m,t.id,H,wt,w]),As=h??e.messages;return O.jsxs(xt,{justify:"space-between",style:{height:"calc(100dvh - 64px - var(--mantine-spacing-md))"},children:[O.jsxs(xt,{gap:"xs",children:[O.jsx(st,{children:s.map(j=>O.jsx(Jn,{size:"compact-xs",variant:j.id===w?.id?"filled":"default",onClick:()=>v(j.id),children:j.name},j.id))}),lt.length>0&&O.jsx(to,{variant:"light",color:"yellow",icon:O.jsx(Us,{size:16}),children:`To start chatting, ${lt.join(", ")}.`}),Me&&O.jsx(to,{variant:"light",color:"red",icon:O.jsx(Us,{size:16}),children:Me})]}),O.jsx(Gc,{viewport:c,messages:As,characters:s,persona:n,onDeleteMessage:Dt,onRegenerateMessage:Ao,onCreateBranch:Xt,onNavigateBranch:St,branchLabel:fn,canNavigatePrev:Ft,canNavigateNext:yn}),O.jsxs(xt,{gap:"xs",children:[H&&O.jsxs(st,{gap:"xs",children:[O.jsx(qr,{size:"xs"}),O.jsxs($t,{size:"sm",c:"dimmed",children:[w?.inChatName??"Assistant"," is thinking..."]})]}),O.jsx(Hc,{onSend:_n,disabled:lt.length>0||!m,isProcessing:H})]}),O.jsx(_c,{opened:Ze!==null,onClose:ct,title:"Delete message?",centered:!0,children:O.jsxs(xt,{gap:"sm",children:[O.jsx($t,{size:"sm",children:"Are you sure you want to delete this message? This action cannot be undone."}),O.jsxs(st,{justify:"flex-end",gap:"xs",children:[O.jsx(Jn,{variant:"default",onClick:ct,children:"Cancel"}),O.jsx(Jn,{color:"red",onClick:Zt,children:"Delete"})]})]})})]})}export{Rx as component};
