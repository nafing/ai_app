import{R as s,af as v}from"./index-BUOXtG_d.js";function d(t,i,f){var o,a;typeof t=="function"?(o=i||[],a=f):(o=[],a=i);var r=s.useRef({hasResult:!1,result:a,error:null}),l=s.useReducer(function(e){return e+1},0);l[0];var c=l[1],b=s.useMemo(function(){var e=typeof t=="function"?t():t;if(!e||typeof e.subscribe!="function")throw t===e?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!r.current.hasResult&&typeof window<"u"&&(typeof e.hasValue!="function"||e.hasValue()))if(typeof e.getValue=="function")r.current.result=e.getValue(),r.current.hasResult=!0;else{var n=e.subscribe(function(u){r.current.result=u,r.current.hasResult=!0});typeof n=="function"?n():n.unsubscribe()}return e},o);if(s.useDebugValue(r.current.result),s.useEffect(function(){var e=b.subscribe(function(n){var u=r.current;(u.error!==null||u.result!==n)&&(u.error=null,u.result=n,u.hasResult=!0,c())},function(n){var u=r.current;u.error!==n&&(u.error=n,c())});return typeof e=="function"?e:e.unsubscribe.bind(e)},o),r.current.error)throw r.current.error;return r.current.result}function y(t,i,f){return d(function(){return v.liveQuery(t)},i||[],f)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(t){var i=v.DexieYProvider;i&&i.release(t)});export{y as u};
