import{u,R as d,j as e,G as l,B as r,L as x,M as j,d as i,a as C}from"./index-BrAtYWpN.js";import{u as f}from"./dexie-react-hooks-CsjlevEe.js";import{T as g}from"./Title-VPPFuY2B.js";import{S as c}from"./Stack-MIQAC9Ot.js";import{C as w}from"./Card-D_uNUUZV.js";import{T as h}from"./Text-BYB51XnE.js";function R(){const a=f(()=>i.chats.toArray()),[n,s]=u(),[t,p]=d.useState(null),m=o=>{p(o),s.open()};return e.jsxs(d.Fragment,{children:[e.jsxs(l,{justify:"space-between",align:"end",mb:"md",children:[e.jsx(g,{order:2,children:"Chats"}),e.jsx(r,{component:x,to:"/chat/new/",children:"New Chat"})]}),e.jsx(c,{gap:"xs",children:a?.map(o=>e.jsx(k,{c:o,onDelete:()=>m(o.id)},o.id))}),e.jsxs(j,{opened:n,onClose:s.close,title:"Delete Chat",children:["Are you sure you want to delete this chat?",e.jsxs(l,{mt:"md",justify:"flex-end",children:[e.jsx(r,{variant:"default",onClick:s.close,children:"Cancel"}),e.jsx(r,{color:"red",onClick:async()=>{t&&(await i.messages.where("chatId").equals(t).delete(),await i.chats.delete(t)),s.close()},children:"Delete"})]})]})]})}function k({c:a,onDelete:n}){const s=C();return e.jsx(w,{radius:"md",p:"md",withBorder:!0,style:{backdropFilter:"saturate(180%) blur(20px)",backgroundColor:"rgba(0, 0, 0, 0.3)"},onClick:t=>{t.stopPropagation(),s({to:`/conversation/${a.id}`})},children:e.jsxs(l,{justify:"space-between",wrap:"nowrap",children:[e.jsxs(c,{gap:4,children:[e.jsx(h,{fw:600,children:a.name}),e.jsxs(h,{size:"sm",c:"dimmed",children:[a.characterIds.length," Characters"]})]}),e.jsxs(c,{gap:"xs",children:[e.jsx(r,{onClick:t=>{t.stopPropagation(),s({to:`/chat/${a.id}`})},size:"compact-xs",children:"Edit"}),e.jsx(r,{size:"compact-xs",color:"red",onClick:t=>{t.preventDefault(),t.stopPropagation(),n()},children:"Delete"})]})]})})}export{R as component};
