import{o as he,b as je,j as Ce,al as ie,r as a,aw as ke}from"./index-BUOXtG_d.js";const le=he((t,e)=>{const r=je("TextInput",null,t);return Ce.jsx(ie,{component:"input",ref:e,...r,__staticSelector:"TextInput"})});le.classes=ie.classes;le.displayName="@mantine/core/TextInput";function De(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const Oe=typeof window<"u"?a.useLayoutEffect:a.useEffect;function j(t,e){Oe(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function we(t,e){t&&De(t),j(`mantine-form:${t}:set-field-value`,r=>e.setFieldValue(r.detail.path,r.detail.value)),j(`mantine-form:${t}:set-values`,r=>e.setValues(r.detail)),j(`mantine-form:${t}:set-initial-values`,r=>e.setInitialValues(r.detail)),j(`mantine-form:${t}:set-errors`,r=>e.setErrors(r.detail)),j(`mantine-form:${t}:set-field-error`,r=>e.setFieldError(r.detail.path,r.detail.error)),j(`mantine-form:${t}:clear-field-error`,r=>e.clearFieldError(r.detail)),j(`mantine-form:${t}:clear-errors`,e.clearErrors),j(`mantine-form:${t}:reset`,e.reset),j(`mantine-form:${t}:validate`,e.validate),j(`mantine-form:${t}:validate-field`,r=>e.validateField(r.detail)),j(`mantine-form:${t}:reorder-list-item`,r=>e.reorderListItem(r.detail.path,r.detail.payload)),j(`mantine-form:${t}:remove-list-item`,r=>e.removeListItem(r.detail.path,r.detail.index)),j(`mantine-form:${t}:insert-list-item`,r=>e.insertListItem(r.detail.path,r.detail.item,r.detail.index)),j(`mantine-form:${t}:set-dirty`,r=>e.setDirty(r.detail)),j(`mantine-form:${t}:set-touched`,r=>e.setTouched(r.detail)),j(`mantine-form:${t}:reset-dirty`,r=>e.resetDirty(r.detail)),j(`mantine-form:${t}:reset-touched`,e.resetTouched)}function Ie(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:r}=e;r instanceof HTMLInputElement?r.type==="checkbox"?t(r.checked):t(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&t(r.value)}else t(e)}}function X(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,r)=>{const s=t[r];return s!=null&&s!==!1&&(e[r]=s),e},{})}function Te(t){const[e,r]=a.useState(X(t)),s=a.useRef(e),n=a.useCallback(u=>{r(f=>{const V=X(typeof u=="function"?u(f):u);return s.current=V,V})},[]),o=a.useCallback(()=>n({}),[]),c=a.useCallback(u=>{s.current[u]!==void 0&&n(f=>{const V={...f};return delete V[u],V})},[e]),i=a.useCallback((u,f)=>{f==null||f===!1?c(u):s.current[u]!==f&&n(V=>({...V,[u]:f}))},[e]);return{errorsState:e,setErrors:n,clearErrors:o,setFieldError:i,clearFieldError:c}}function Z(t,e){if(e===null||typeof e!="object")return{};const r={...e};return Object.keys(e).forEach(s=>{s.includes(`${String(t)}.`)&&delete r[s]}),r}function ee(t,e){const r=t.substring(e.length+1).split(".")[0];return parseInt(r,10)}function te(t,e,r,s){if(e===void 0)return r;const n=`${String(t)}`;let o=r;s===-1&&(o=Z(`${n}.${e}`,o));const c={...o},i=new Set;return Object.entries(o).filter(([u])=>{if(!u.startsWith(`${n}.`))return!1;const f=ee(u,n);return Number.isNaN(f)?!1:f>=e}).forEach(([u,f])=>{const V=ee(u,n),m=u.replace(`${n}.${V}`,`${n}.${V+s}`);c[m]=f,i.add(m),i.has(u)||delete c[u]}),c}function $e(t,{from:e,to:r},s){const n=`${t}.${e}`,o=`${t}.${r}`,c={...s},i=new Set;return Object.keys(s).forEach(u=>{if(i.has(u))return;let f,V;if(u.startsWith(n)?(f=u,V=u.replace(n,o)):u.startsWith(o)&&(f=u.replace(o,n),V=u),f&&V){const m=c[f],h=c[V];h===void 0?delete c[f]:c[f]=h,m===void 0?delete c[V]:c[V]=m,i.add(f),i.add(V)}}),c}function re(t,e,r){typeof r.value=="object"&&(r.value=A(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||e==="__proto__"?Object.defineProperty(t,e,r):t[e]=r.value}function A(t){if(typeof t!="object")return t;var e=0,r,s,n,o=Object.prototype.toString.call(t);if(o==="[object Object]"?n=Object.create(t.__proto__||null):o==="[object Array]"?n=Array(t.length):o==="[object Set]"?(n=new Set,t.forEach(function(c){n.add(A(c))})):o==="[object Map]"?(n=new Map,t.forEach(function(c,i){n.set(A(i),A(c))})):o==="[object Date]"?n=new Date(+t):o==="[object RegExp]"?n=new RegExp(t.source,t.flags):o==="[object DataView]"?n=new t.constructor(A(t.buffer)):o==="[object ArrayBuffer]"?n=t.slice(0):o.slice(-6)==="Array]"&&(n=new t.constructor(t)),n){for(s=Object.getOwnPropertySymbols(t);e<s.length;e++)re(n,s[e],Object.getOwnPropertyDescriptor(t,s[e]));for(e=0,s=Object.getOwnPropertyNames(t);e<s.length;e++)Object.hasOwnProperty.call(n,r=s[e])&&n[r]===t[r]||re(n,r,Object.getOwnPropertyDescriptor(t,r))}return n||t}function ae(t){return typeof t!="string"?[]:t.split(".")}function F(t,e){const r=ae(t);if(r.length===0||typeof e!="object"||e===null)return;let s=e[r[0]];for(let n=1;n<r.length&&s!=null;n+=1)s=s[r[n]];return s}function q(t,e,r){const s=ae(t);if(s.length===0)return r;const n=A(r);if(s.length===1)return n[s[0]]=e,n;let o=n[s[0]];for(let c=1;c<s.length-1;c+=1){if(o===void 0)return n;o=o[s[c]]}return o[s[s.length-1]]=e,n}function Re(t,{from:e,to:r},s){const n=F(t,s);if(!Array.isArray(n))return s;const o=[...n],c=n[e];return o.splice(e,1),o.splice(r,0,c),q(t,o,s)}function Le(t,e,r,s){const n=F(t,s);if(!Array.isArray(n))return s;const o=[...n];return o.splice(typeof r=="number"?r:o.length,0,e),q(t,o,s)}function Ae(t,e,r){const s=F(t,r);return Array.isArray(s)?q(t,s.filter((n,o)=>o!==e),r):r}function Pe(t,e,r,s){const n=F(t,s);if(!Array.isArray(n)||n.length<=r)return s;const o=[...n];return o[r]=e,q(t,o,s)}function _e({$values:t,$errors:e,$status:r}){const s=a.useCallback((i,u)=>{r.clearFieldDirty(i),e.setErrors(f=>$e(i,u,f)),t.setValues({values:Re(i,u,t.refValues.current),updateState:!0})},[]),n=a.useCallback((i,u)=>{r.clearFieldDirty(i),e.setErrors(f=>te(i,u,f,-1)),t.setValues({values:Ae(i,u,t.refValues.current),updateState:!0})},[]),o=a.useCallback((i,u,f)=>{r.clearFieldDirty(i),e.setErrors(V=>te(i,f,V,1)),t.setValues({values:Le(i,u,f,t.refValues.current),updateState:!0})},[]),c=a.useCallback((i,u,f)=>{r.clearFieldDirty(i),t.setValues({values:Pe(i,f,u,t.refValues.current),updateState:!0})},[]);return{reorderListItem:s,removeListItem:n,insertListItem:o,replaceListItem:c}}var U,se;function ve(){return se||(se=1,U=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,o;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=s;n--!==0;){var c=o[n];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r}),U}var Ne=ve();const W=ke(Ne);function N(t,e){const r=Object.keys(t);if(typeof e=="string"){const s=r.filter(n=>n.startsWith(`${e}.`));return t[e]||s.some(n=>t[n])||!1}return r.some(s=>t[s])}function qe({initialDirty:t,initialTouched:e,mode:r,$values:s}){const[n,o]=a.useState(e),[c,i]=a.useState(t),u=a.useRef(e),f=a.useRef(t),V=a.useCallback(b=>{const g=typeof b=="function"?b(u.current):b;u.current=g,r==="controlled"&&o(g)},[]),m=a.useCallback((b,g=!1)=>{const S=typeof b=="function"?b(f.current):b;f.current=S,(r==="controlled"||g)&&i(S)},[]),h=a.useCallback(()=>V({}),[]),L=a.useCallback(b=>{const g=b?{...s.refValues.current,...b}:s.refValues.current;s.setValuesSnapshot(g),m({})},[]),P=a.useCallback((b,g)=>{V(S=>N(S,b)===g?S:{...S,[b]:g})},[]),_=a.useCallback((b,g,S)=>{m(O=>N(O,b)===g?O:{...O,[b]:g},S)},[]),d=a.useCallback((b,g)=>{const S=N(f.current,b),O=!W(F(b,s.getValuesSnapshot()),g),$=Z(b,f.current);$[b]=O,m($,S!==O)},[]),y=a.useCallback(b=>N(u.current,b),[]),E=a.useCallback(b=>m(g=>{if(typeof b!="string")return g;const S=Z(b,g);return delete S[b],W(S,g)?g:S}),[]),D=a.useCallback(b=>{if(b){const S=F(b,f.current);if(typeof S=="boolean")return S;const O=F(b,s.refValues.current),$=F(b,s.valuesSnapshot.current);return!W(O,$)}return Object.keys(f.current).length>0?N(f.current):!W(s.refValues.current,s.valuesSnapshot.current)},[]),C=a.useCallback(()=>f.current,[]),T=a.useCallback(()=>u.current,[]);return{touchedState:n,dirtyState:c,touchedRef:u,dirtyRef:f,setTouched:V,setDirty:m,resetDirty:L,resetTouched:h,isTouched:y,setFieldTouched:P,setFieldDirty:_,setTouchedState:o,setDirtyState:i,clearFieldDirty:E,isDirty:D,getDirty:C,getTouched:T,setCalculatedFieldDirty:d}}function Ke({initialValues:t,onValuesChange:e,mode:r}){const s=a.useRef(!1),[n,o]=a.useState(t||{}),c=a.useRef(n),i=a.useRef(n),u=a.useCallback(({values:d,subscribers:y,updateState:E=!0,mergeWithPreviousValues:D=!0})=>{const C=c.current,T=d instanceof Function?d(c.current):d,b=D?{...C,...T}:T;c.current=b,E&&(o(b),r==="uncontrolled"&&(c.current=b)),e?.(b,C),y?.filter(Boolean).forEach(g=>g({updatedValues:b,previousValues:C}))},[e]),f=a.useCallback(d=>{const y=F(d.path,c.current),E=d.value instanceof Function?d.value(y):d.value;if(y!==E){const D=c.current,C=q(d.path,E,c.current);u({values:C,updateState:d.updateState}),d.subscribers?.filter(Boolean).forEach(T=>T({path:d.path,updatedValues:C,previousValues:D}))}},[u]),V=a.useCallback(d=>{i.current=d},[]),m=a.useCallback((d,y)=>{s.current||(s.current=!0,u({values:d,updateState:r==="controlled"}),V(d),y())},[u]),h=a.useCallback(()=>{u({values:i.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),L=a.useCallback(()=>c.current,[]),P=a.useCallback(()=>i.current,[]),_=a.useCallback((d,y)=>{const E=F(d,i.current);typeof E>"u"||f({path:d,value:E,updateState:r==="controlled",subscribers:y})},[f,r]);return{initialized:s,stateValues:n,refValues:c,valuesSnapshot:i,setValues:u,setFieldValue:f,resetValues:h,setValuesSnapshot:V,initialize:m,getValues:L,getValuesSnapshot:P,resetField:_}}function Me({$status:t,cascadeUpdates:e}){const r=a.useRef({}),s=a.useCallback((o,c)=>{a.useEffect(()=>(r.current[o]=r.current[o]||[],r.current[o].push(c),()=>{r.current[o]=r.current[o].filter(i=>i!==c)}),[c])},[]),n=a.useCallback(o=>{const c=r.current[o]?.map(i=>u=>i({previousValue:F(o,u.previousValues),value:F(o,u.updatedValues),touched:t.isTouched(o),dirty:t.isDirty(o)}))??[];if(e)for(const i in r.current)(i.startsWith(`${o}.`)||o.startsWith(`${i}.`))&&c.push(...r.current[i].map(u=>f=>u({previousValue:F(i,f.previousValues),value:F(i,f.updatedValues),touched:t.isTouched(i),dirty:t.isDirty(i)})));return c},[]);return{subscribers:r,watch:s,getFieldSubscribers:n}}function ne(t,e){return t?`${t}-${e.toString()}`:e.toString()}const z=Symbol("root-rule");function oe(t){const e=X(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function G(t,e,r="",s={}){return typeof t!="object"||t===null?s:Object.keys(t).reduce((n,o)=>{const c=t[o],i=`${r===""?"":`${r}.`}${o}`,u=F(i,e);let f=!1;return typeof c=="function"&&(n[i]=c(u,e,i)),typeof c=="object"&&Array.isArray(u)&&(f=!0,u.forEach((V,m)=>G(c,e,`${i}.${m}`,n)),z in c&&(n[i]=c[z](u,e,i))),typeof c=="object"&&typeof u=="object"&&u!==null&&(f||G(c,e,i,n),z in c&&(n[i]=c[z](u,e,i))),n},s)}function J(t,e){return oe(typeof t=="function"?t(e):G(t,e))}function B(t,e,r){if(typeof t!="string")return{hasError:!1,error:null};const s=J(e,r),n=Object.keys(s.errors).find(o=>t.split(".").every((c,i)=>c===o.split(".")[i]));return{hasError:!!n,error:n?s.errors[n]:null}}const We="__MANTINE_FORM_INDEX__";function ce(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]+/g,`.${We}`)):!1:!1}function Be({name:t,mode:e="controlled",initialValues:r,initialErrors:s={},initialDirty:n={},initialTouched:o={},clearInputErrorOnChange:c=!0,validateInputOnChange:i=!1,validateInputOnBlur:u=!1,onValuesChange:f,transformValues:V=(d=>d),enhanceGetInputProps:m,validate:h,onSubmitPreventDefault:L="always",touchTrigger:P="change",cascadeUpdates:_=!1}={}){const d=Te(s),y=Ke({initialValues:r,onValuesChange:f,mode:e}),E=qe({initialDirty:n,initialTouched:o,$values:y,mode:e}),D=_e({$values:y,$errors:d,$status:E}),C=Me({$status:E,cascadeUpdates:_}),[T,b]=a.useState(0),[g,S]=a.useState({}),[O,$]=a.useState(!1),Q=a.useCallback(()=>{y.resetValues(),d.clearErrors(),E.resetDirty(),E.resetTouched(),e==="uncontrolled"&&b(l=>l+1)},[]),K=a.useCallback(l=>{c&&d.clearErrors(),e==="uncontrolled"&&b(p=>p+1),Object.keys(C.subscribers.current).forEach(p=>{const k=F(p,y.refValues.current),w=F(p,l);k!==w&&C.getFieldSubscribers(p).forEach(R=>R({previousValues:l,updatedValues:y.refValues.current}))})},[c]),fe=a.useCallback(l=>{const p=y.refValues.current;y.initialize(l,()=>e==="uncontrolled"&&b(k=>k+1)),K(p)},[K]),Y=a.useCallback((l,p,k)=>{const w=ce(l,i),R=p instanceof Function?p(F(l,y.refValues.current)):p;E.setCalculatedFieldDirty(l,R),P==="change"&&E.setFieldTouched(l,!0),!w&&c&&d.clearFieldError(l),y.setFieldValue({path:l,value:p,updateState:e==="controlled",subscribers:[...C.getFieldSubscribers(l),w?v=>{const I=B(l,h,v.updatedValues);I.hasError?d.setFieldError(l,I.error):d.clearFieldError(l)}:null,k?.forceUpdate!==!1&&e!=="controlled"?()=>S(v=>({...v,[l]:(v[l]||0)+1})):null]})},[f,h]),de=a.useCallback(l=>{const p=y.refValues.current;y.setValues({values:l,updateState:e==="controlled"}),K(p)},[f,K]),x=a.useCallback(()=>{const l=J(h,y.refValues.current);return d.setErrors(l.errors),l},[h]),be=a.useCallback(l=>{const p=B(l,h,y.refValues.current);return p.hasError?d.setFieldError(l,p.error):d.clearFieldError(l),p},[h]),ye=(l,{type:p="input",withError:k=!0,withFocus:w=!0,...R}={})=>{const I={onChange:Ie(M=>Y(l,M,{forceUpdate:!1})),"data-path":ne(t,l)};return k&&(I.error=d.errorsState[l]),p==="checkbox"?I[e==="controlled"?"checked":"defaultChecked"]=F(l,y.refValues.current):I[e==="controlled"?"value":"defaultValue"]=F(l,y.refValues.current),w&&(I.onFocus=()=>E.setFieldTouched(l,!0),I.onBlur=()=>{if(ce(l,u)){const M=B(l,h,y.refValues.current);M.hasError?d.setFieldError(l,M.error):d.clearFieldError(l)}}),Object.assign(I,m?.({inputProps:I,field:l,options:{type:p,withError:k,withFocus:w,...R},form:H}))},Ve=(l,p)=>k=>{L==="always"&&k?.preventDefault();const w=x();if(w.hasErrors)L==="validation-failed"&&k?.preventDefault(),p?.(w.errors,y.refValues.current,k);else{const R=l?.(V(y.refValues.current),k);R instanceof Promise&&($(!0),R.finally(()=>$(!1)))}},pe=l=>V(l||y.refValues.current),Ee=a.useCallback(l=>{l.preventDefault(),Q()},[]),ge=a.useCallback(l=>l?!B(l,h,y.refValues.current).hasError:!J(h,y.refValues.current).hasErrors,[h]),Se=l=>`${T}-${String(l)}-${g[String(l)]||0}`,Fe=a.useCallback(l=>document.querySelector(`[data-path="${ne(t,l)}"]`),[]),me=a.useCallback(l=>{y.resetField(l,[e!=="controlled"?()=>S(p=>({...p,[l]:(p[l]||0)+1})):null])},[y.resetField,e,S]),H={watch:C.watch,initialized:y.initialized.current,values:e==="uncontrolled"?y.refValues.current:y.stateValues,getValues:y.getValues,getInitialValues:y.getValuesSnapshot,setInitialValues:y.setValuesSnapshot,resetField:me,initialize:fe,setValues:de,setFieldValue:Y,submitting:O,setSubmitting:$,errors:d.errorsState,setErrors:d.setErrors,setFieldError:d.setFieldError,clearFieldError:d.clearFieldError,clearErrors:d.clearErrors,resetDirty:E.resetDirty,setTouched:E.setTouched,setDirty:E.setDirty,isTouched:E.isTouched,resetTouched:E.resetTouched,isDirty:E.isDirty,getTouched:E.getTouched,getDirty:E.getDirty,reorderListItem:D.reorderListItem,insertListItem:D.insertListItem,removeListItem:D.removeListItem,replaceListItem:D.replaceListItem,reset:Q,validate:x,validateField:be,getInputProps:ye,onSubmit:Ve,onReset:Ee,isValid:ge,getTransformedValues:pe,key:Se,getInputNode:Fe};return we(t,H),H}function ue(t,e){if(typeof t=="number")return e.length===t;const{max:r,min:s}=t;let n=!0;return typeof r=="number"&&e.length>r&&(n=!1),typeof s=="number"&&e.length<s&&(n=!1),n}function He(t,e){const r=e||!0;return s=>typeof s=="string"?ue(t,s.trim())?null:r:typeof s=="object"&&s!==null&&"length"in s&&ue(t,s)?null:r}export{le as T,He as h,Be as u};
