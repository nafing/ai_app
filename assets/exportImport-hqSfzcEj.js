import{r as u,b,c as j,j as l,e as x}from"./index-B4XXapqm.js";const R={multiple:!1},E=u.forwardRef((n,a)=>{const{onChange:e,children:r,multiple:t,accept:i,name:o,form:p,resetRef:d,disabled:f,capture:m,inputProps:y,...h}=b("FileButton",R,n),s=u.useRef(null),g=()=>{!f&&s.current?.click()},w=c=>{if(c.currentTarget.files===null)return e(t?[]:null);e(t?Array.from(c.currentTarget.files):c.currentTarget.files[0]||null)};return j(d,()=>{s.current&&(s.current.value="")}),l.jsxs(l.Fragment,{children:[l.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:t,onChange:w,ref:x(a,s),name:o,form:p,capture:m,...y}),r({onClick:g,...h})]})});E.displayName="@mantine/core/FileButton";const T={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};function S(){return new Intl.DateTimeFormat("en-GB",T).formatToParts(new Date).filter(e=>e.type!=="literal").map(e=>e.value.padStart(e.type==="year"?4:2,"0")).join("")}function F(n,a){const e={entity:n,version:1,exportedAt:new Date().toISOString(),items:a},r=`${n}-${S()}.json`,t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),o=document.createElement("a");o.href=i,o.download=r,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}async function C(n,a){const e=await a.text();let r;try{r=JSON.parse(e)}catch{throw new Error("Selected file is not valid JSON.")}if(Array.isArray(r))return r;if(r&&typeof r=="object"){const t=r;if(t.entity&&t.entity!==n)throw new Error(`Import data is for '${t.entity}', expected '${n}'.`);if(Array.isArray(t.items))return t.items}throw new Error("Unsupported import structure. Expected an array or an object with an 'items' array.")}export{E as F,F as e,C as p};
